<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ares: Ext/WeaponType/Hooks.Wave.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_4f38a043d9972e86e8aa3f2d4f00b04c.html">Ext</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_c63426b7d90ca616220c198784f797b6.html">WeaponType</a>
  </div>
</div>
<div class="contents">
<h1>Hooks.Wave.cpp File Reference</h1><code>#include &quot;<a class="el" href="_weapon_type_2_body_8h.html">Body.h</a>&quot;</code><br/>
<code>#include &quot;../Techno/Body.h&quot;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#a2939fe46ddddf81787f08b88418a09df">upcolor</a>(c)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#ade7f7c96725c002927f794f8bdfaa73d">DEFINE_HOOK</a> (6FF5F5, TechnoClass_Fire, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#a61852186e976a43a9061e34226c0fc03">DEFINE_HOOK</a> (75E963, WaveClass_CTOR, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#ae33dbc0db02b6347d432d6f9e4e30bef">DEFINE_HOOK</a> (763226, WaveClass_DTOR, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#a80dadc1a330e76d99f58ea2ed7ca8f29">DEFINE_HOOK</a> (760F50, WaveClass_Update, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#aba3db0b3bd9dbbed3844e74a19c95277">DEFINE_HOOK</a> (760BC2, WaveClass_Draw2, 9)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#a243a830bcaf647dec3f0cede38b79495">DEFINE_HOOK</a> (760DE2, WaveClass_Draw3, 9)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#aa61d82316bc3c1e02e25ba73d08449d3">DEFINE_HOOK</a> (75EE57, WaveClass_Draw_Sonic, 7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#a246be02698c144d4fac0b75979e39658">DEFINE_HOOK</a> (7601FB, WaveClass_Draw_Magnetron, 0B)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#ac3f7a6f2fe57b281c64ab5e1720f0c14">DEFINE_HOOK</a> (760286, WaveClass_Draw_Magnetron2, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#ae60450ec6f6d0cd5a2fa73abf209d49f">DEFINE_HOOK</a> (762C5C, WaveClass_Update_Wave, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#ac15d1f44a3e320d2f6614f97c15a1d98">DEFINE_HOOK</a> (75F38F, WaveClass_DamageCell, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_wave_8cpp.html#a908a5a8daca214c6eb167554d15dcb46">DEFINE_HOOK</a> (7601C7, WaveClass_Draw_Purple, 8)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a2939fe46ddddf81787f08b88418a09df"></a><!-- doxytag: member="Hooks.Wave.cpp::upcolor" ref="a2939fe46ddddf81787f08b88418a09df" args="(c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define upcolor</td>
          <td>(</td>
          <td class="paramtype">c&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordtype">int</span> _ ## c = initial. c + (Intensity * CurrentColor-&gt; c ) / 256; \
        _ ## c = std::min(_ ## c, 255); \
        modified. c = (BYTE)_ ## c;
</pre></div>
</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a908a5a8daca214c6eb167554d15dcb46"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="a908a5a8daca214c6eb167554d15dcb46" args="(7601C7, WaveClass_Draw_Purple, 8)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">7601C7&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_Draw_Purple&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">8&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00287"></a>00287 {
<a name="l00288"></a>00288         GET(<span class="keywordtype">int</span>, Q, EDX);
<a name="l00289"></a>00289         <span class="keywordflow">if</span>(Q &gt; 0x15F90) {
<a name="l00290"></a>00290                 Q = 0x15F90;
<a name="l00291"></a>00291         }
<a name="l00292"></a>00292         R-&gt;EDX(Q);
<a name="l00293"></a>00293         <span class="keywordflow">return</span> 0;
<a name="l00294"></a>00294 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac15d1f44a3e320d2f6614f97c15a1d98"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="ac15d1f44a3e320d2f6614f97c15a1d98" args="(75F38F, WaveClass_DamageCell, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">75F38F&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_DamageCell&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00278"></a>00278 {
<a name="l00279"></a>00279         GET(WaveClass *, Wave, EBP);
<a name="l00280"></a>00280         <a class="code" href="class_weapon_type_ext_1_1_ext_data.html">WeaponTypeExt::ExtData</a> *pData = <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>[Wave];
<a name="l00281"></a>00281         R-&gt;EDI(R-&gt;EAX());
<a name="l00282"></a>00282         R-&gt;EBX(pData-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>);
<a name="l00283"></a>00283         <span class="keywordflow">return</span> 0x75F39D;
<a name="l00284"></a>00284 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae60450ec6f6d0cd5a2fa73abf209d49f"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="ae60450ec6f6d0cd5a2fa73abf209d49f" args="(762C5C, WaveClass_Update_Wave, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">762C5C&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_Update_Wave&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00243"></a>00243 {
<a name="l00244"></a>00244         GET(WaveClass *, Wave, ESI);
<a name="l00245"></a>00245         TechnoClass *Firer = Wave-&gt;Owner;
<a name="l00246"></a>00246         TechnoClass *Target = Wave-&gt;Target;
<a name="l00247"></a>00247         <span class="keywordflow">if</span>(!Target || !Firer) {
<a name="l00248"></a>00248                 <span class="keywordflow">return</span> 0x762D57;
<a name="l00249"></a>00249         }
<a name="l00250"></a>00250 
<a name="l00251"></a>00251         RET_UNLESS(<a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>.find(Wave) != <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>.end());
<a name="l00252"></a>00252         <a class="code" href="class_weapon_type_ext_1_1_ext_data.html">WeaponTypeExt::ExtData</a> *pData = <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>[Wave];
<a name="l00253"></a>00253         <span class="keywordtype">int</span> weaponIdx = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Firer)-&gt;idxSlot_Wave;
<a name="l00254"></a>00254 
<a name="l00255"></a>00255         CoordStruct xyzSrc, xyzTgt, xyzDummy = {0, 0, 0};
<a name="l00256"></a>00256         Firer-&gt;GetFLH(&amp;xyzSrc, weaponIdx, xyzDummy);
<a name="l00257"></a>00257         Target-&gt;GetCoords__(&amp;xyzTgt); <span class="comment">// not GetCoords() !</span>
<a name="l00258"></a>00258 
<a name="l00259"></a>00259         <span class="keywordtype">char</span> idx = <a class="code" href="class_weapon_type_ext.html#abe46cab9ba684690723b88a54a83a14e">WeaponTypeExt:: AbsIDtoIdx</a>(Target-&gt;WhatAmI());
<a name="l00260"></a>00260 
<a name="l00261"></a>00261         <span class="keywordtype">bool</span> reversed = pData-&gt;<a class="code" href="class_weapon_type_ext_1_1_ext_data.html#a4420845c77e59a4300f03f619a94da6e">Wave_Reverse</a>[idx];
<a name="l00262"></a>00262 
<a name="l00263"></a>00263         <span class="keywordflow">if</span>(Wave-&gt;Type == wave_Magnetron) {
<a name="l00264"></a>00264                 reversed
<a name="l00265"></a>00265                         ? Wave-&gt;Draw_Magnetic(&amp;xyzTgt, &amp;xyzSrc)
<a name="l00266"></a>00266                         : Wave-&gt;Draw_Magnetic(&amp;xyzSrc, &amp;xyzTgt);
<a name="l00267"></a>00267         } <span class="keywordflow">else</span> {
<a name="l00268"></a>00268                 reversed
<a name="l00269"></a>00269                         ? Wave-&gt;Draw_NonMagnetic(&amp;xyzTgt, &amp;xyzSrc)
<a name="l00270"></a>00270                         : Wave-&gt;Draw_NonMagnetic(&amp;xyzSrc, &amp;xyzTgt);
<a name="l00271"></a>00271         }
<a name="l00272"></a>00272 
<a name="l00273"></a>00273         <span class="keywordflow">return</span> 0x762D57;
<a name="l00274"></a>00274 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac3f7a6f2fe57b281c64ab5e1720f0c14"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="ac3f7a6f2fe57b281c64ab5e1720f0c14" args="(760286, WaveClass_Draw_Magnetron2, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">760286&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_Draw_Magnetron2&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00205"></a>00205 {
<a name="l00206"></a>00206         <span class="keywordflow">return</span> 0x7602D3;
<a name="l00207"></a>00207 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a246be02698c144d4fac0b75979e39658"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="a246be02698c144d4fac0b75979e39658" args="(7601FB, WaveClass_Draw_Magnetron, 0B)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">7601FB&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_Draw_Magnetron&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0B&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00191"></a>00191 {
<a name="l00192"></a>00192         GET_STACK(WaveClass *, Wave, 0x8);
<a name="l00193"></a>00193         GET(DWORD, src, EBX);
<a name="l00194"></a>00194         GET(DWORD, offset, ECX);
<a name="l00195"></a>00195         DWORD offs = src + offset * 2;
<a name="l00196"></a>00196 
<a name="l00197"></a>00197         <span class="keywordflow">return</span> (<a class="code" href="class_weapon_type_ext.html#ae1f1b828eb2813103c30ccbb707b03c4">WeaponTypeExt::ModifyWaveColor</a>((WORD *)offs, (WORD *)src, R-&gt;EBP(), Wave))
<a name="l00198"></a>00198                 ? 0x760285
<a name="l00199"></a>00199                 : 0
<a name="l00200"></a>00200         ;
<a name="l00201"></a>00201 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa61d82316bc3c1e02e25ba73d08449d3"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="aa61d82316bc3c1e02e25ba73d08449d3" args="(75EE57, WaveClass_Draw_Sonic, 7)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">75EE57&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_Draw_Sonic&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">7&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00177"></a>00177 {
<a name="l00178"></a>00178         GET_STACK(WaveClass *, Wave, 0x4);
<a name="l00179"></a>00179         GET(DWORD, src, EDI);
<a name="l00180"></a>00180         GET(DWORD, offset, ECX);
<a name="l00181"></a>00181         DWORD offs = src + offset * 2;
<a name="l00182"></a>00182 
<a name="l00183"></a>00183         <span class="keywordflow">return</span> (<a class="code" href="class_weapon_type_ext.html#ae1f1b828eb2813103c30ccbb707b03c4">WeaponTypeExt::ModifyWaveColor</a>((WORD *)offs, (WORD *)src, R-&gt;ESI(), Wave))
<a name="l00184"></a>00184                 ? 0x75EF1C
<a name="l00185"></a>00185                 : 0
<a name="l00186"></a>00186         ;
<a name="l00187"></a>00187 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a243a830bcaf647dec3f0cede38b79495"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="a243a830bcaf647dec3f0cede38b79495" args="(760DE2, WaveClass_Draw3, 9)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">760DE2&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_Draw3&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">9&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00165"></a>00165 {
<a name="l00166"></a>00166         GET(WaveClass *, Wave, EBX);
<a name="l00167"></a>00167         GET(WORD *, dest, EDI);
<a name="l00168"></a>00168 
<a name="l00169"></a>00169         <span class="keywordflow">return</span> (<a class="code" href="class_weapon_type_ext.html#ae1f1b828eb2813103c30ccbb707b03c4">WeaponTypeExt::ModifyWaveColor</a>(dest, dest, Wave-&gt;LaserIntensity, Wave))
<a name="l00170"></a>00170                 ? 0x760ECB
<a name="l00171"></a>00171                 : 0
<a name="l00172"></a>00172         ;
<a name="l00173"></a>00173 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aba3db0b3bd9dbbed3844e74a19c95277"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="aba3db0b3bd9dbbed3844e74a19c95277" args="(760BC2, WaveClass_Draw2, 9)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">760BC2&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_Draw2&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">9&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00153"></a>00153 {
<a name="l00154"></a>00154         GET(WaveClass *, Wave, EBX);
<a name="l00155"></a>00155         GET(WORD *, dest, EBP);
<a name="l00156"></a>00156 
<a name="l00157"></a>00157         <span class="keywordflow">return</span> (<a class="code" href="class_weapon_type_ext.html#ae1f1b828eb2813103c30ccbb707b03c4">WeaponTypeExt::ModifyWaveColor</a>(dest, dest, Wave-&gt;LaserIntensity, Wave))
<a name="l00158"></a>00158                 ? 0x760CAF
<a name="l00159"></a>00159                 : 0
<a name="l00160"></a>00160         ;
<a name="l00161"></a>00161 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a80dadc1a330e76d99f58ea2ed7ca8f29"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="a80dadc1a330e76d99f58ea2ed7ca8f29" args="(760F50, WaveClass_Update, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">760F50&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_Update&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00077"></a>00077 {
<a name="l00078"></a>00078         GET(WaveClass *, pThis, ECX);
<a name="l00079"></a>00079 
<a name="l00080"></a>00080         <a class="code" href="class_weapon_type_ext_1_1_ext_data.html">WeaponTypeExt::ExtData</a> *pData = <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>[pThis];
<a name="l00081"></a>00081         <span class="keyword">const</span> WeaponTypeClass *Weap = pData-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>;
<a name="l00082"></a>00082 
<a name="l00083"></a>00083         RET_UNLESS(Weap);
<a name="l00084"></a>00084 
<a name="l00085"></a>00085         <span class="keywordtype">int</span> Intensity;
<a name="l00086"></a>00086 
<a name="l00087"></a>00087         <span class="keywordflow">if</span>(Weap-&gt;AmbientDamage) {
<a name="l00088"></a>00088                 CoordStruct coords;
<a name="l00089"></a>00089 <span class="comment">//              Debug::Log(&quot;Damaging Cells for weapon %X (Intensity = %d)\n&quot;, pData, pThis-&gt;WaveIntensity);</span>
<a name="l00090"></a>00090                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; pThis-&gt;Cells.Count; ++i) {
<a name="l00091"></a>00091                         CellClass *Cell = pThis-&gt;Cells.GetItem(i);
<a name="l00092"></a>00092 <span class="comment">//                      Debug::Log(&quot;\t(%hd,%hd)\n&quot;, Cell-&gt;MapCoords.X, Cell-&gt;MapCoords.Y);</span>
<a name="l00093"></a>00093                         pThis-&gt;DamageArea(Cell-&gt;Get3DCoords3(&amp;coords));
<a name="l00094"></a>00094                 }
<a name="l00095"></a>00095 <span class="comment">//              Debug::Log(&quot;Done damaging %X\n&quot;, pData);</span>
<a name="l00096"></a>00096         }
<a name="l00097"></a>00097 
<a name="l00098"></a>00098         <span class="keywordflow">switch</span>(pThis-&gt;Type) {
<a name="l00099"></a>00099                 <span class="keywordflow">case</span> wave_Sonic:
<a name="l00100"></a>00100                         pThis-&gt;Update_Wave();
<a name="l00101"></a>00101                         Intensity = pThis-&gt;WaveIntensity;
<a name="l00102"></a>00102                         --Intensity;
<a name="l00103"></a>00103                         pThis-&gt;WaveIntensity = Intensity;
<a name="l00104"></a>00104                         <span class="keywordflow">if</span>(Intensity &lt; 0) {
<a name="l00105"></a>00105                                 pThis-&gt;UnInit();
<a name="l00106"></a>00106                         } <span class="keywordflow">else</span> {
<a name="l00107"></a>00107                                 SET_REG32(ECX, pThis);
<a name="l00108"></a>00108                                 CALL(0x5F3E70); <span class="comment">// ObjectClass::Update</span>
<a name="l00109"></a>00109                         }
<a name="l00110"></a>00110                         <span class="keywordflow">break</span>;
<a name="l00111"></a>00111                 <span class="keywordflow">case</span> wave_BigLaser:
<a name="l00112"></a>00112                 <span class="keywordflow">case</span> wave_Laser:
<a name="l00113"></a>00113                         Intensity = pThis-&gt;LaserIntensity;
<a name="l00114"></a>00114                         Intensity -= 6;
<a name="l00115"></a>00115                         pThis-&gt;LaserIntensity = Intensity;
<a name="l00116"></a>00116                         <span class="keywordflow">if</span>(Intensity &lt; 32) {
<a name="l00117"></a>00117                                 pThis-&gt;UnInit();
<a name="l00118"></a>00118                         }
<a name="l00119"></a>00119                         <span class="keywordflow">break</span>;
<a name="l00120"></a>00120                 <span class="keywordflow">case</span> wave_Magnetron:
<a name="l00121"></a>00121                         pThis-&gt;Update_Wave();
<a name="l00122"></a>00122                         Intensity = pThis-&gt;WaveIntensity;
<a name="l00123"></a>00123                         --Intensity;
<a name="l00124"></a>00124                         pThis-&gt;WaveIntensity = Intensity;
<a name="l00125"></a>00125                         <span class="keywordflow">if</span>(Intensity &lt; 0) {
<a name="l00126"></a>00126                                 pThis-&gt;UnInit();
<a name="l00127"></a>00127                         } <span class="keywordflow">else</span> {
<a name="l00128"></a>00128                                 SET_REG32(ECX, pThis);
<a name="l00129"></a>00129                                 CALL(0x5F3E70); <span class="comment">// ObjectClass::Update</span>
<a name="l00130"></a>00130                         }
<a name="l00131"></a>00131                         <span class="keywordflow">break</span>;
<a name="l00132"></a>00132         }
<a name="l00133"></a>00133 
<a name="l00134"></a>00134         <span class="keywordflow">return</span> 0x76101A;
<a name="l00135"></a>00135 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae33dbc0db02b6347d432d6f9e4e30bef"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="ae33dbc0db02b6347d432d6f9e4e30bef" args="(763226, WaveClass_DTOR, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">763226&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_DTOR&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00064"></a>00064 {
<a name="l00065"></a>00065         GET(WaveClass *, Wave, EDI);
<a name="l00066"></a>00066         hash_waveExt::iterator i = <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>.find(Wave);
<a name="l00067"></a>00067         <span class="keywordflow">if</span>(i != <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>.end()) {
<a name="l00068"></a>00068                 <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>.erase(i);
<a name="l00069"></a>00069         }
<a name="l00070"></a>00070 
<a name="l00071"></a>00071         <span class="keywordflow">return</span> 0;
<a name="l00072"></a>00072 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a61852186e976a43a9061e34226c0fc03"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="a61852186e976a43a9061e34226c0fc03" args="(75E963, WaveClass_CTOR, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">75E963&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WaveClass_CTOR&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00035"></a>00035 {
<a name="l00036"></a>00036         GET(WaveClass *, Wave, ESI);
<a name="l00037"></a>00037         GET(DWORD, Type, ECX);
<a name="l00038"></a>00038         <span class="keywordflow">if</span>(Type == wave_Laser || Type == wave_BigLaser) {
<a name="l00039"></a>00039                 <span class="keywordflow">return</span> 0;
<a name="l00040"></a>00040         }
<a name="l00041"></a>00041         GET(WeaponTypeClass *, Weapon, EBX);
<a name="l00042"></a>00042 
<a name="l00043"></a>00043         <span class="keywordflow">if</span>(Weapon) {
<a name="l00044"></a>00044                 <a class="code" href="class_weapon_type_ext_1_1_ext_data.html">WeaponTypeExt::ExtData</a> *pData = <a class="code" href="class_weapon_type_ext.html#a6e448392133b3079a9490b5c5fabdd09">WeaponTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Weapon);
<a name="l00045"></a>00045                 <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>[Wave] = pData;
<a name="l00046"></a>00046         }
<a name="l00047"></a>00047         <span class="keywordflow">return</span> 0;
<a name="l00048"></a>00048 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ade7f7c96725c002927f794f8bdfaa73d"></a><!-- doxytag: member="Hooks.Wave.cpp::DEFINE_HOOK" ref="ade7f7c96725c002927f794f8bdfaa73d" args="(6FF5F5, TechnoClass_Fire, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6FF5F5&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_Fire&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00007"></a>00007 {
<a name="l00008"></a>00008         GET(WeaponTypeClass *, Source, EBX);
<a name="l00009"></a>00009         GET(TechnoClass *, Owner, ESI);
<a name="l00010"></a>00010         GET(TechnoClass *, Target, EDI);
<a name="l00011"></a>00011 
<a name="l00012"></a>00012         <a class="code" href="class_weapon_type_ext_1_1_ext_data.html">WeaponTypeExt::ExtData</a> *pData = <a class="code" href="class_weapon_type_ext.html#a6e448392133b3079a9490b5c5fabdd09">WeaponTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Source);
<a name="l00013"></a>00013 
<a name="l00014"></a>00014         RET_UNLESS(Source-&gt;IsMagBeam || Source-&gt;IsSonic || pData-&gt;<a class="code" href="class_weapon_type_ext_1_1_ext_data.html#a4d411d085aad9c2a200181a528087b90">Wave_IsLaser</a> || pData-&gt;<a class="code" href="class_weapon_type_ext_1_1_ext_data.html#a17aba878593f8badc064e475aa7f1785">Wave_IsBigLaser</a>);
<a name="l00015"></a>00015 
<a name="l00016"></a>00016         GET_BASE(byte, idxWeapon, 0xC);
<a name="l00017"></a>00017 
<a name="l00018"></a>00018         <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Owner)-&gt;idxSlot_Wave = idxWeapon;
<a name="l00019"></a>00019 
<a name="l00020"></a>00020         RET_UNLESS(pData-&gt;<a class="code" href="class_weapon_type_ext_1_1_ext_data.html#a4d411d085aad9c2a200181a528087b90">Wave_IsLaser</a> || pData-&gt;<a class="code" href="class_weapon_type_ext_1_1_ext_data.html#a17aba878593f8badc064e475aa7f1785">Wave_IsBigLaser</a>);
<a name="l00021"></a>00021 
<a name="l00022"></a>00022         LEA_STACK(CoordStruct *, xyzSrc, 0x44);
<a name="l00023"></a>00023         LEA_STACK(CoordStruct *, xyzTgt, 0x88);
<a name="l00024"></a>00024 
<a name="l00025"></a>00025         WaveClass *Wave;
<a name="l00026"></a>00026         GAME_ALLOC(WaveClass, Wave, xyzSrc, xyzTgt, Owner, pData-&gt;<a class="code" href="class_weapon_type_ext_1_1_ext_data.html#a17aba878593f8badc064e475aa7f1785">Wave_IsBigLaser</a> ? 2 : 1, Target);
<a name="l00027"></a>00027 
<a name="l00028"></a>00028         <a class="code" href="class_weapon_type_ext.html#a43b29f68aeeb9b5c7b0d353960d4a62f">WeaponTypeExt::WaveExt</a>[Wave] = pData;
<a name="l00029"></a>00029         Owner-&gt;Wave = Wave;
<a name="l00030"></a>00030         <span class="keywordflow">return</span> 0x6FF650;
<a name="l00031"></a>00031 }
</pre></div></p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri Oct 15 20:59:45 2010 for Ares by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
