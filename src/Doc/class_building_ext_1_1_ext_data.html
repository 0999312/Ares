<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ares: BuildingExt::ExtData Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="class_building_ext.html">BuildingExt</a>::<a class="el" href="class_building_ext_1_1_ext_data.html">ExtData</a>
  </div>
</div>
<div class="contents">
<h1>BuildingExt::ExtData Class Reference</h1><!-- doxytag: class="BuildingExt::ExtData" --><!-- doxytag: inherits="Extension&lt; TT &gt;" -->
<p><code>#include &lt;Ext/Building/Body.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for BuildingExt::ExtData:</div>
<div class="dynsection">
 <div class="center">
  <img src="class_building_ext_1_1_ext_data.png" usemap="#BuildingExt::ExtData_map" alt=""/>
  <map id="BuildingExt::ExtData_map" name="BuildingExt::ExtData_map">
<area href="class_extension.html" alt="Extension&lt; TT &gt;" shape="rect" coords="0,0,123,24"/>
</map>
 </div>
</div>

<p><a href="class_building_ext_1_1_ext_data-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#afe9c0557cebc23cf41212d86b0403b4f">InfiltratedBy</a> (HouseClass *Enterer)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#ae8b62f255c63793312f46bcc1c2c7134">ExtData</a> (const DWORD <a class="el" href="class_extension.html#a2f0c543d5bceafd46d103be4f87a5abe">Canary</a>, <a class="el" href="class_building_ext.html#a66c50954e22686f620bf9dd86ec856b9">TT</a> *const OwnerObject)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#ac5b77e77f3df5476e22f21b5e7930ee3">~ExtData</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#a9a142e25874321613a711b2f196a5982">Size</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#a3a99ceb814144b0e760b723e81bfc075">InvalidatePointer</a> (void *ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#a11c2bdd38f872dccf64d147cbcffbadf">RubbleYell</a> (bool beingRepaired=false)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function switches the building into its Advanced Rubble state or back to normal.  <a href="#a11c2bdd38f872dccf64d147cbcffbadf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#a9e1fb291c1b79b60802734e41da10db4">KickOutOfRubble</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Bumps all Technos that reside on a building's foundation out of the way.  <a href="#a9e1fb291c1b79b60802734e41da10db4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#a7e7dd93da28363b5205c6cda4a2a938b">canTraverseTo</a> (BuildingClass *targetBuilding)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function checks if occupants of the current building can, on principle, move on to the target building.  <a href="#a7e7dd93da28363b5205c6cda4a2a938b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#a906e57980b9e5d921e3df6575f780dc8">doTraverseTo</a> (BuildingClass *targetBuilding)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function moves as many occupants as possible from the current to the target building.  <a href="#a906e57980b9e5d921e3df6575f780dc8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#a88c90fd40e919715f1d0ccabcd0c8121">sameTrench</a> (BuildingClass *targetBuilding)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function checks if the current and the target building are both of the same trench kind.  <a href="#a88c90fd40e919715f1d0ccabcd0c8121"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#a39cc147927fcbc639e64d3261d415442">isLinkable</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true if this is a structure that can be linked to other structures, like a wall, fence, or trench. This is used to quick-check if the game has to look for linkable buildings in the first place.  <a href="#a39cc147927fcbc639e64d3261d415442"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#a85968e3b639ee4a5b6c62c27fec80f26">canLinkTo</a> (BuildingClass *targetBuilding)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks if the current building can link to the given target building.  <a href="#a85968e3b639ee4a5b6c62c27fec80f26"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#a35389a02d691eda3df45bb34487bd967">evalRaidStatus</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks if the building is empty but still marked as raided, and returns the building to its previous owner, if so.  <a href="#a35389a02d691eda3df45bb34487bd967"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#a0ed3f40c70d8c03aca843297a3587b30">UpdateFirewall</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#a21a5f7c8f4bb43c82dcc2e03b6681291">ImmolateVictims</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#a59a0e98ecfd29e31d7950018e82483e7">ImmolateVictim</a> (ObjectClass *Victim)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#aa52160d197643b1ec47982baea06a2cd">ReverseEngineer</a> (TechnoClass *Victim)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true if Victim wasn't buildable and now should be.  <a href="#aa52160d197643b1ec47982baea06a2cd"></a><br/></td></tr>
<tr><td colspan="2"><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HouseClass *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#afead3304480fed76856d3e8048dc020d">OwnerBeforeRaid</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Contains the house which owned this building prior to it being raided and turned over to the raiding party.  <a href="#afead3304480fed76856d3e8048dc020d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#afa7ba845c44fb28da0ffdf2b7b7c5667">isCurrentlyRaided</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Whether this building is currently occupied by someone not the actual owner of the structure.  <a href="#afa7ba845c44fb28da0ffdf2b7b7c5667"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#a0d8c28c2f33fc5710e8aa2dd8da374e0">ignoreNextEVA</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is used when returning raided buildings, to decide whether to play EVA announcements about building capture.  <a href="#a0d8c28c2f33fc5710e8aa2dd8da374e0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::set&lt; TechnoClass * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_building_ext_1_1_ext_data.html#ad7f420d1c0f2af081419b11913a5a17f">RegisteredJammers</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set of Radar Jammers which have registered themselves to be in range of this building. (Related to issue #305).  <a href="#ad7f420d1c0f2af081419b11913a5a17f"></a><br/></td></tr>
</table>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae8b62f255c63793312f46bcc1c2c7134"></a><!-- doxytag: member="BuildingExt::ExtData::ExtData" ref="ae8b62f255c63793312f46bcc1c2c7134" args="(const DWORD Canary, TT *const OwnerObject)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BuildingExt::ExtData::ExtData </td>
          <td>(</td>
          <td class="paramtype">const DWORD&nbsp;</td>
          <td class="paramname"> <em>Canary</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_building_ext.html#a66c50954e22686f620bf9dd86ec856b9">TT</a> *const &nbsp;</td>
          <td class="paramname"> <em>OwnerObject</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00035"></a>00035                                                                    : <a class="code" href="class_extension.html">Extension&lt;TT&gt;</a>(<a class="code" href="class_extension.html#a2f0c543d5bceafd46d103be4f87a5abe">Canary</a>, OwnerObject),
<a name="l00036"></a>00036                         <a class="code" href="class_building_ext_1_1_ext_data.html#afead3304480fed76856d3e8048dc020d" title="Contains the house which owned this building prior to it being raided and turned...">OwnerBeforeRaid</a>(NULL), <a class="code" href="class_building_ext_1_1_ext_data.html#afa7ba845c44fb28da0ffdf2b7b7c5667" title="Whether this building is currently occupied by someone not the actual owner of the...">isCurrentlyRaided</a>(<span class="keyword">false</span>), <a class="code" href="class_building_ext_1_1_ext_data.html#a0d8c28c2f33fc5710e8aa2dd8da374e0" title="This is used when returning raided buildings, to decide whether to play EVA announcements...">ignoreNextEVA</a>(<span class="keyword">false</span>)
<a name="l00037"></a>00037                         { };
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac5b77e77f3df5476e22f21b5e7930ee3"></a><!-- doxytag: member="BuildingExt::ExtData::~ExtData" ref="ac5b77e77f3df5476e22f21b5e7930ee3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual BuildingExt::ExtData::~ExtData </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00039"></a>00039                                    {
<a name="l00040"></a>00040                 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a85968e3b639ee4a5b6c62c27fec80f26"></a><!-- doxytag: member="BuildingExt::ExtData::canLinkTo" ref="a85968e3b639ee4a5b6c62c27fec80f26" args="(BuildingClass *targetBuilding)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BuildingExt::ExtData::canLinkTo </td>
          <td>(</td>
          <td class="paramtype">BuildingClass *&nbsp;</td>
          <td class="paramname"> <em>targetBuilding</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks if the current building can link to the given target building. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>targetBuilding</em>&nbsp;</td><td>the building to check for compatibility. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the two buildings can be linked. </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_building_ext_1_1_ext_data.html#a39cc147927fcbc639e64d3261d415442" title="Returns true if this is a structure that can be linked to other structures, like...">isLinkable()</a> </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00301"></a>00301                                                                 {
<a name="l00302"></a>00302         BuildingClass* currentBuilding = this-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>;
<a name="l00303"></a>00303 
<a name="l00304"></a>00304         <span class="comment">// Different owners // and owners not allied</span>
<a name="l00305"></a>00305         <span class="keywordflow">if</span>((currentBuilding-&gt;Owner != targetBuilding-&gt;Owner) &amp;&amp; !currentBuilding-&gt;Owner-&gt;IsAlliedWith(targetBuilding-&gt;Owner)) { <span class="comment">//&lt;-- see thread 1424</span>
<a name="l00306"></a>00306                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00307"></a>00307         }
<a name="l00308"></a>00308 
<a name="l00309"></a>00309         <a class="code" href="class_building_type_ext_1_1_ext_data.html">BuildingTypeExt::ExtData</a>* currentTypeExtData = <a class="code" href="class_building_type_ext.html#a9643fa629dd6d2a20eeefa4942d8612a">BuildingTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(currentBuilding-&gt;Type);
<a name="l00310"></a>00310         <a class="code" href="class_building_type_ext_1_1_ext_data.html">BuildingTypeExt::ExtData</a>* targetTypeExtData = <a class="code" href="class_building_type_ext.html#a9643fa629dd6d2a20eeefa4942d8612a">BuildingTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(targetBuilding-&gt;Type);
<a name="l00311"></a>00311 
<a name="l00312"></a>00312         <span class="comment">// Firewalls</span>
<a name="l00313"></a>00313         <span class="keywordflow">if</span>(currentTypeExtData-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#a546647f34224bbd9057c36ea89eb4763">Firewall_Is</a> &amp;&amp; targetTypeExtData-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#a546647f34224bbd9057c36ea89eb4763">Firewall_Is</a>) {
<a name="l00314"></a>00314                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00315"></a>00315         }
<a name="l00316"></a>00316 
<a name="l00317"></a>00317         <span class="comment">// Trenches</span>
<a name="l00318"></a>00318         <span class="keywordflow">if</span>(this-&gt;<a class="code" href="class_building_ext_1_1_ext_data.html#a88c90fd40e919715f1d0ccabcd0c8121" title="This function checks if the current and the target building are both of the same...">sameTrench</a>(targetBuilding)) {
<a name="l00319"></a>00319                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00320"></a>00320         }
<a name="l00321"></a>00321 
<a name="l00322"></a>00322         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00323"></a>00323 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7e7dd93da28363b5205c6cda4a2a938b"></a><!-- doxytag: member="BuildingExt::ExtData::canTraverseTo" ref="a7e7dd93da28363b5205c6cda4a2a938b" args="(BuildingClass *targetBuilding)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BuildingExt::ExtData::canTraverseTo </td>
          <td>(</td>
          <td class="paramtype">BuildingClass *&nbsp;</td>
          <td class="paramname"> <em>targetBuilding</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function checks if occupants of the current building can, on principle, move on to the target building. </p>
<p>Conditions checked are whether there are occupants in the current building, whether the target building is full, whether the current building even is a trench, and whether both buildings are of the same trench kind.</p>
<p>The current system assumes 1x1 sized trench parts; it will probably work in all cases where the 0,0 (top) cells of buildings touch (e.g. a 3x3 building next to a 1x3 building), but not when the 0,0 cells are further apart. This may be changed at a later point in time, if there is demand for it.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>targetBuilding</em>&nbsp;</td><td>a pointer to the target building. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if traversal between both buildings is legal, otherwise false. </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_building_ext_1_1_ext_data.html#a906e57980b9e5d921e3df6575f780dc8" title="This function moves as many occupants as possible from the current to the target...">doTraverseTo()</a></dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Renegade </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>16.12.09+ </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00222"></a>00222                                                                     {
<a name="l00223"></a>00223         BuildingClass* currentBuilding = this-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>;
<a name="l00224"></a>00224         <span class="comment">//BuildingTypeClass* currentBuildingType = game_cast&lt;BuildingTypeClass *&gt;(currentBuilding-&gt;GetTechnoType());</span>
<a name="l00225"></a>00225         BuildingTypeClass* targetBuildingType = targetBuilding-&gt;Type;
<a name="l00226"></a>00226 
<a name="l00227"></a>00227         <span class="keywordflow">if</span>((targetBuilding == currentBuilding)
<a name="l00228"></a>00228                 || (targetBuilding-&gt;Occupants.Count &gt;= targetBuildingType-&gt;MaxNumberOccupants)
<a name="l00229"></a>00229                 || !currentBuilding-&gt;Occupants.Count
<a name="l00230"></a>00230                 || !targetBuildingType-&gt;CanBeOccupied) { <span class="comment">// I&#39;m a little if-clause short and stdout... // beat you to the punchline -- D</span>
<a name="l00231"></a>00231                 <span class="comment">// Can&#39;t traverse if there&#39;s no one to move, or the target is full, we can&#39;t actually occupy the target,</span>
<a name="l00232"></a>00232                 <span class="comment">// or if it&#39;s actually the same building</span>
<a name="l00233"></a>00233                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00234"></a>00234         }
<a name="l00235"></a>00235 
<a name="l00236"></a>00236         <a class="code" href="class_building_type_ext_1_1_ext_data.html">BuildingTypeExt::ExtData</a>* currentBuildingTypeExt = <a class="code" href="class_building_type_ext.html#a9643fa629dd6d2a20eeefa4942d8612a">BuildingTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(currentBuilding-&gt;Type);
<a name="l00237"></a>00237         <a class="code" href="class_building_type_ext_1_1_ext_data.html">BuildingTypeExt::ExtData</a>* targetBuildingTypeExt = <a class="code" href="class_building_type_ext.html#a9643fa629dd6d2a20eeefa4942d8612a">BuildingTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(targetBuilding-&gt;Type);
<a name="l00238"></a>00238 
<a name="l00239"></a>00239         <span class="keywordflow">if</span>(this-&gt;<a class="code" href="class_building_ext_1_1_ext_data.html#a88c90fd40e919715f1d0ccabcd0c8121" title="This function checks if the current and the target building are both of the same...">sameTrench</a>(targetBuilding)) {
<a name="l00240"></a>00240                 <span class="comment">// if we&#39;ve come here, there&#39;s room, there are people to move, and the buildings are trenches and of the same kind</span>
<a name="l00241"></a>00241                 <span class="comment">// the only questioning remaining is whether they are next to each other.</span>
<a name="l00242"></a>00242                 <span class="comment">// if the target building is more than 256 leptons away, it&#39;s not on a straight neighboring cell.</span>
<a name="l00243"></a>00243                 <span class="keywordflow">return</span> targetBuilding-&gt;Location.DistanceFrom(currentBuilding-&gt;Location) &lt;= 256.0;
<a name="l00244"></a>00244 
<a name="l00245"></a>00245         } <span class="keywordflow">else</span> {
<a name="l00246"></a>00246                 <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// not the same trench kind or not a trench</span>
<a name="l00247"></a>00247         }
<a name="l00248"></a>00248 
<a name="l00249"></a>00249 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a906e57980b9e5d921e3df6575f780dc8"></a><!-- doxytag: member="BuildingExt::ExtData::doTraverseTo" ref="a906e57980b9e5d921e3df6575f780dc8" args="(BuildingClass *targetBuilding)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BuildingExt::ExtData::doTraverseTo </td>
          <td>(</td>
          <td class="paramtype">BuildingClass *&nbsp;</td>
          <td class="paramname"> <em>targetBuilding</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function moves as many occupants as possible from the current to the target building. </p>
<p>This function will move occupants from the current building to the target building until either a) the target building is full, or b) the current building is empty.</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>The function assumes the legality of the traversal was checked beforehand with <a class="el" href="class_building_ext_1_1_ext_data.html#a7e7dd93da28363b5205c6cda4a2a938b" title="This function checks if occupants of the current building can, on principle, move...">canTraverseTo()</a>, and will therefore not do any safety checks.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>targetBuilding</em>&nbsp;</td><td>a pointer to the target building. </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_building_ext_1_1_ext_data.html#a7e7dd93da28363b5205c6cda4a2a938b" title="This function checks if occupants of the current building can, on principle, move...">canTraverseTo()</a></dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Renegade </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>16.12.09+ </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00266"></a>00266                                                                    {
<a name="l00267"></a>00267         BuildingClass* currentBuilding = this-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>;
<a name="l00268"></a>00268         BuildingTypeClass* targetBuildingType = targetBuilding-&gt;Type;
<a name="l00269"></a>00269 
<a name="l00270"></a>00270         <span class="comment">// depending on Westwood&#39;s handling, this could explode when Size &gt; 1 units are involved...but don&#39;t tell the users that</span>
<a name="l00271"></a>00271         <span class="keywordflow">while</span>(currentBuilding-&gt;Occupants.Count &amp;&amp; (targetBuilding-&gt;Occupants.Count &lt; targetBuildingType-&gt;MaxNumberOccupants)) {
<a name="l00272"></a>00272                 targetBuilding-&gt;Occupants.AddItem(currentBuilding-&gt;Occupants.GetItem(0));
<a name="l00273"></a>00273                 currentBuilding-&gt;Occupants.RemoveItem(0); <span class="comment">// maybe switch Add/Remove if the game gets pissy about multiple of them walking around</span>
<a name="l00274"></a>00274         }
<a name="l00275"></a>00275 
<a name="l00276"></a>00276         this-&gt;<a class="code" href="class_building_ext_1_1_ext_data.html#a35389a02d691eda3df45bb34487bd967" title="Checks if the building is empty but still marked as raided, and returns the building...">evalRaidStatus</a>(); <span class="comment">// if the traversal emptied the current building, it&#39;ll have to be returned to its owner</span>
<a name="l00277"></a>00277 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a35389a02d691eda3df45bb34487bd967"></a><!-- doxytag: member="BuildingExt::ExtData::evalRaidStatus" ref="a35389a02d691eda3df45bb34487bd967" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BuildingExt::ExtData::evalRaidStatus </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks if the building is empty but still marked as raided, and returns the building to its previous owner, if so. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00279"></a>00279                                         {
<a name="l00280"></a>00280         <span class="comment">// if the building is still marked as raided, but unoccupied, return it to its previous owner</span>
<a name="l00281"></a>00281         <span class="keywordflow">if</span>(this-&gt;<a class="code" href="class_building_ext_1_1_ext_data.html#afa7ba845c44fb28da0ffdf2b7b7c5667" title="Whether this building is currently occupied by someone not the actual owner of the...">isCurrentlyRaided</a> &amp;&amp; !this-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>-&gt;Occupants.Count) {
<a name="l00282"></a>00282                 <span class="comment">// Fix for #838: Only return the building to the previous owner if he hasn&#39;t been defeated</span>
<a name="l00283"></a>00283                 <span class="keywordflow">if</span>(!this-&gt;<a class="code" href="class_building_ext_1_1_ext_data.html#afead3304480fed76856d3e8048dc020d" title="Contains the house which owned this building prior to it being raided and turned...">OwnerBeforeRaid</a>-&gt;Defeated) {
<a name="l00284"></a>00284                         this-&gt;<a class="code" href="class_building_ext_1_1_ext_data.html#a0d8c28c2f33fc5710e8aa2dd8da374e0" title="This is used when returning raided buildings, to decide whether to play EVA announcements...">ignoreNextEVA</a> = <span class="keyword">true</span>; <span class="comment">// #698 - used in BuildingClass_ChangeOwnership_TrenchEVA to override EVA announcement</span>
<a name="l00285"></a>00285                         this-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>-&gt;SetOwningHouse(this-&gt;<a class="code" href="class_building_ext_1_1_ext_data.html#afead3304480fed76856d3e8048dc020d" title="Contains the house which owned this building prior to it being raided and turned...">OwnerBeforeRaid</a>);
<a name="l00286"></a>00286                 }
<a name="l00287"></a>00287                 this-&gt;<a class="code" href="class_building_ext_1_1_ext_data.html#afead3304480fed76856d3e8048dc020d" title="Contains the house which owned this building prior to it being raided and turned...">OwnerBeforeRaid</a> = NULL;
<a name="l00288"></a>00288                 this-&gt;<a class="code" href="class_building_ext_1_1_ext_data.html#afa7ba845c44fb28da0ffdf2b7b7c5667" title="Whether this building is currently occupied by someone not the actual owner of the...">isCurrentlyRaided</a> = <span class="keyword">false</span>;
<a name="l00289"></a>00289         }
<a name="l00290"></a>00290 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a59a0e98ecfd29e31d7950018e82483e7"></a><!-- doxytag: member="BuildingExt::ExtData::ImmolateVictim" ref="a59a0e98ecfd29e31d7950018e82483e7" args="(ObjectClass *Victim)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BuildingExt::ExtData::ImmolateVictim </td>
          <td>(</td>
          <td class="paramtype">ObjectClass *&nbsp;</td>
          <td class="paramname"> <em>Victim</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00720"></a>00720                                                             {
<a name="l00721"></a>00721         BuildingClass *pThis = this-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>;
<a name="l00722"></a>00722         <span class="keywordflow">if</span>(generic_cast&lt;TechnoClass *&gt;(Victim) &amp;&amp; Victim != pThis &amp;&amp; !Victim-&gt;InLimbo &amp;&amp; Victim-&gt;IsAlive &amp;&amp; Victim-&gt;Health) {
<a name="l00723"></a>00723                 CoordStruct XYZ;
<a name="l00724"></a>00724                 Victim-&gt;GetCoords(&amp;XYZ);
<a name="l00725"></a>00725                 <span class="keywordtype">int</span> Damage = Victim-&gt;Health;
<a name="l00726"></a>00726                 Victim-&gt;ReceiveDamage(&amp;Damage, 0, RulesClass::Instance-&gt;C4Warhead<span class="comment">/* todo */</span>, 0, 1, 0, pThis-&gt;Owner);
<a name="l00727"></a>00727 
<a name="l00728"></a>00728                 <span class="keywordflow">if</span>(AnimTypeClass *FSAnim = AnimTypeClass::Find(Victim-&gt;IsInAir() ? <span class="stringliteral">&quot;FSAIR&quot;</span> : <span class="stringliteral">&quot;FSGRND&quot;</span>)) {
<a name="l00729"></a>00729                         AnimClass * placeholder;
<a name="l00730"></a>00730                         GAME_ALLOC(AnimClass, placeholder, FSAnim, &amp;XYZ);
<a name="l00731"></a>00731                 }
<a name="l00732"></a>00732 
<a name="l00733"></a>00733         }
<a name="l00734"></a>00734 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a21a5f7c8f4bb43c82dcc2e03b6681291"></a><!-- doxytag: member="BuildingExt::ExtData::ImmolateVictims" ref="a21a5f7c8f4bb43c82dcc2e03b6681291" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BuildingExt::ExtData::ImmolateVictims </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00713"></a>00713                                          {
<a name="l00714"></a>00714         CellClass *C = this-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>-&gt;GetCell();
<a name="l00715"></a>00715         <span class="keywordflow">for</span>(ObjectClass *O = C-&gt;GetContent(); O; O = O-&gt;NextObject) {
<a name="l00716"></a>00716                 this-&gt;<a class="code" href="class_building_ext_1_1_ext_data.html#a59a0e98ecfd29e31d7950018e82483e7">ImmolateVictim</a>(O);
<a name="l00717"></a>00717         }
<a name="l00718"></a>00718 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afe9c0557cebc23cf41212d86b0403b4f"></a><!-- doxytag: member="BuildingExt::ExtData::InfiltratedBy" ref="afe9c0557cebc23cf41212d86b0403b4f" args="(HouseClass *Enterer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BuildingExt::ExtData::InfiltratedBy </td>
          <td>(</td>
          <td class="paramtype">HouseClass *&nbsp;</td>
          <td class="paramname"> <em>Enterer</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00444"></a>00444                                                           {
<a name="l00445"></a>00445         BuildingClass *EnteredBuilding = this-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>;
<a name="l00446"></a>00446         BuildingTypeClass *EnteredType = EnteredBuilding-&gt;Type;
<a name="l00447"></a>00447         HouseClass *Owner = EnteredBuilding-&gt;Owner;
<a name="l00448"></a>00448         <a class="code" href="class_building_type_ext_1_1_ext_data.html">BuildingTypeExt::ExtData</a>* pTypeExt = <a class="code" href="class_building_type_ext.html#a9643fa629dd6d2a20eeefa4942d8612a">BuildingTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(EnteredBuilding-&gt;Type);
<a name="l00449"></a>00449         <a class="code" href="class_house_ext_1_1_ext_data.html">HouseExt::ExtData</a>* pEntererExt = <a class="code" href="class_house_ext.html#a4a73e500fabd21a7359c5247c31d4c03">HouseExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Enterer);
<a name="l00450"></a>00450 
<a name="l00451"></a>00451         <span class="keywordflow">if</span>(!pTypeExt-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#a9c991715c07b377e40cc8fb139585f4b">InfiltrateCustom</a>) {
<a name="l00452"></a>00452                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00453"></a>00453         }
<a name="l00454"></a>00454 
<a name="l00455"></a>00455         <span class="keywordflow">if</span>(Owner == Enterer) {
<a name="l00456"></a>00456                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00457"></a>00457         }
<a name="l00458"></a>00458 
<a name="l00459"></a>00459         <span class="keywordtype">bool</span> raiseEva = <span class="keyword">false</span>;
<a name="l00460"></a>00460 
<a name="l00461"></a>00461         <span class="keywordflow">if</span>(Enterer-&gt;ControlledByPlayer() || Owner-&gt;ControlledByPlayer()) {
<a name="l00462"></a>00462                 CellStruct xy;
<a name="l00463"></a>00463                 EnteredBuilding-&gt;GetMapCoords(&amp;xy);
<a name="l00464"></a>00464                 <span class="keywordflow">if</span>(RadarEventClass::Create(RADAREVENT_STRUCTUREINFILTRATED, xy)) {
<a name="l00465"></a>00465                         raiseEva = <span class="keyword">true</span>;
<a name="l00466"></a>00466                 }
<a name="l00467"></a>00467         }
<a name="l00468"></a>00468 
<a name="l00469"></a>00469         <span class="keywordtype">bool</span> evaForOwner = Owner-&gt;ControlledByPlayer() &amp;&amp; raiseEva;
<a name="l00470"></a>00470         <span class="keywordtype">bool</span> evaForEnterer = Enterer-&gt;ControlledByPlayer() &amp;&amp; raiseEva;
<a name="l00471"></a>00471         <span class="keywordtype">bool</span> effectApplied = <span class="keyword">false</span>;
<a name="l00472"></a>00472 
<a name="l00473"></a>00473         <span class="keywordflow">if</span>(pTypeExt-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#a0ab907105501701eed526e983b282f75">ResetRadar</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
<a name="l00474"></a>00474                 Owner-&gt;ReshroudMap();
<a name="l00475"></a>00475                 <span class="keywordflow">if</span>(!Owner-&gt;SpySatActive &amp;&amp; evaForOwner) {
<a name="l00476"></a>00476                         VoxClass::Play(<span class="stringliteral">&quot;EVA_RadarSabotaged&quot;</span>);
<a name="l00477"></a>00477                 }
<a name="l00478"></a>00478                 <span class="keywordflow">if</span>(!Enterer-&gt;SpySatActive &amp;&amp; evaForEnterer) {
<a name="l00479"></a>00479                         VoxClass::Play(<span class="stringliteral">&quot;EVA_BuildingInfRadarSabotaged&quot;</span>);
<a name="l00480"></a>00480                 }
<a name="l00481"></a>00481                 effectApplied = <span class="keyword">true</span>;
<a name="l00482"></a>00482         }
<a name="l00483"></a>00483 
<a name="l00484"></a>00484 
<a name="l00485"></a>00485         <span class="keywordflow">if</span>(pTypeExt-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#a73061b5f25f3fcf9be7f3b783f9b5138">PowerOutageDuration</a> &gt; 0) {
<a name="l00486"></a>00486                 Owner-&gt;CreatePowerOutage(pTypeExt-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#a73061b5f25f3fcf9be7f3b783f9b5138">PowerOutageDuration</a>);
<a name="l00487"></a>00487                 <span class="keywordflow">if</span>(evaForOwner) {
<a name="l00488"></a>00488                         VoxClass::Play(<span class="stringliteral">&quot;EVA_PowerSabotaged&quot;</span>);
<a name="l00489"></a>00489                 }
<a name="l00490"></a>00490                 <span class="keywordflow">if</span>(evaForEnterer) {
<a name="l00491"></a>00491                         VoxClass::Play(<span class="stringliteral">&quot;EVA_BuildingInfiltrated&quot;</span>);
<a name="l00492"></a>00492                         VoxClass::Play(<span class="stringliteral">&quot;EVA_EnemyBasePoweredDown&quot;</span>);
<a name="l00493"></a>00493                 }
<a name="l00494"></a>00494                 effectApplied = <span class="keyword">true</span>;
<a name="l00495"></a>00495         }
<a name="l00496"></a>00496 
<a name="l00497"></a>00497 
<a name="l00498"></a>00498         <span class="keywordflow">if</span>(pTypeExt-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#a5a36f005a5868862a893782ce2677ac8">StolenTechIndex</a> &gt; -1) {
<a name="l00499"></a>00499                 pEntererExt-&gt;<a class="code" href="class_house_ext_1_1_ext_data.html#a6925284d3818ae639a29a7ac1eac9df1">StolenTech</a>.set(pTypeExt-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#a5a36f005a5868862a893782ce2677ac8">StolenTechIndex</a>);
<a name="l00500"></a>00500 
<a name="l00501"></a>00501                 Enterer-&gt;ShouldRecheckTechTree = <span class="keyword">true</span>;
<a name="l00502"></a>00502                 <span class="keywordflow">if</span>(evaForOwner) {
<a name="l00503"></a>00503                         VoxClass::Play(<span class="stringliteral">&quot;EVA_TechnologyStolen&quot;</span>);
<a name="l00504"></a>00504                 }
<a name="l00505"></a>00505                 <span class="keywordflow">if</span>(evaForEnterer) {
<a name="l00506"></a>00506                         VoxClass::Play(<span class="stringliteral">&quot;EVA_BuildingInfiltrated&quot;</span>);
<a name="l00507"></a>00507                         VoxClass::Play(<span class="stringliteral">&quot;EVA_NewTechnologyAcquired&quot;</span>);
<a name="l00508"></a>00508                 }
<a name="l00509"></a>00509                 effectApplied = <span class="keyword">true</span>;
<a name="l00510"></a>00510         }
<a name="l00511"></a>00511 
<a name="l00512"></a>00512 
<a name="l00513"></a>00513         <span class="keywordflow">if</span>(pTypeExt-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#aafe33070a001dfd05280eec5cde4a0f4">UnReverseEngineer</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
<a name="l00514"></a>00514                 <span class="keywordtype">int</span> idx = HouseClass::Array-&gt;FindItemIndex(&amp;Owner);
<a name="l00515"></a>00515 
<a name="l00516"></a>00516                 Debug::Log(<span class="stringliteral">&quot;Undoing all Reverse Engineering achieved by house %ls (#%d)\n&quot;</span>, Owner-&gt;UIName, idx);
<a name="l00517"></a>00517 
<a name="l00518"></a>00518                 <span class="keywordflow">if</span>(idx != -1) {
<a name="l00519"></a>00519                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; TechnoTypeClass::Array-&gt;Count; ++i) {
<a name="l00520"></a>00520                                 TechnoTypeClass * Type = TechnoTypeClass::Array-&gt;GetItem(i);
<a name="l00521"></a>00521                                 <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> * TypeData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Type);
<a name="l00522"></a>00522                                 <span class="keywordflow">if</span>(TypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#aa04bc25ff69390fa0a1b3e1ea3ac1a90">ReversedByHouses</a>.ValidIndex(idx)) {
<a name="l00523"></a>00523                                         Debug::Log(<span class="stringliteral">&quot;Zeroing out RevEng of %s\n&quot;</span>, Type-&gt;ID);
<a name="l00524"></a>00524                                         TypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#aa04bc25ff69390fa0a1b3e1ea3ac1a90">ReversedByHouses</a>[idx] = <span class="keyword">false</span>;
<a name="l00525"></a>00525                                 }
<a name="l00526"></a>00526                         }
<a name="l00527"></a>00527                         Owner-&gt;ShouldRecheckTechTree = <span class="keyword">true</span>;
<a name="l00528"></a>00528                 }
<a name="l00529"></a>00529 
<a name="l00530"></a>00530                 <span class="keywordflow">if</span>(evaForOwner) {
<a name="l00531"></a>00531                         VoxClass::Play(<span class="stringliteral">&quot;EVA_BuildingInfiltrated&quot;</span>);
<a name="l00532"></a>00532                 }
<a name="l00533"></a>00533                 <span class="keywordflow">if</span>(evaForEnterer) {
<a name="l00534"></a>00534                         VoxClass::Play(<span class="stringliteral">&quot;EVA_BuildingInfiltrated&quot;</span>);
<a name="l00535"></a>00535                 }
<a name="l00536"></a>00536                 effectApplied = <span class="keyword">true</span>;
<a name="l00537"></a>00537         }
<a name="l00538"></a>00538 
<a name="l00539"></a>00539 
<a name="l00540"></a>00540         <span class="keywordflow">if</span>(pTypeExt-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#a5c7f14dd15fbbbca59fbd7028c20ef07">ResetSW</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
<a name="l00541"></a>00541                 <span class="keywordtype">bool</span> somethingReset = <span class="keyword">false</span>;
<a name="l00542"></a>00542                 <span class="keywordtype">int</span> swIdx = EnteredType-&gt;SuperWeapon;
<a name="l00543"></a>00543                 <span class="keywordflow">if</span>(swIdx != -1) {
<a name="l00544"></a>00544                         Owner-&gt;Supers.Items[swIdx]-&gt;Reset();
<a name="l00545"></a>00545                         somethingReset = <span class="keyword">true</span>;
<a name="l00546"></a>00546                 }
<a name="l00547"></a>00547                 swIdx = EnteredType-&gt;SuperWeapon2;
<a name="l00548"></a>00548                 <span class="keywordflow">if</span>(swIdx != -1) {
<a name="l00549"></a>00549                         Owner-&gt;Supers.Items[swIdx]-&gt;Reset();
<a name="l00550"></a>00550                         somethingReset = <span class="keyword">true</span>;
<a name="l00551"></a>00551                 }
<a name="l00552"></a>00552                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; EnteredType-&gt;Upgrades; ++i) {
<a name="l00553"></a>00553                         <span class="keywordflow">if</span>(BuildingTypeClass *Upgrade = EnteredBuilding-&gt;Upgrades[i]) {
<a name="l00554"></a>00554                                 swIdx = Upgrade-&gt;SuperWeapon;
<a name="l00555"></a>00555                                 <span class="keywordflow">if</span>(swIdx != -1) {
<a name="l00556"></a>00556                                         Owner-&gt;Supers.Items[swIdx]-&gt;Reset();
<a name="l00557"></a>00557                                         somethingReset = <span class="keyword">true</span>;
<a name="l00558"></a>00558                                 }
<a name="l00559"></a>00559                                 swIdx = Upgrade-&gt;SuperWeapon2;
<a name="l00560"></a>00560                                 <span class="keywordflow">if</span>(swIdx != -1) {
<a name="l00561"></a>00561                                         Owner-&gt;Supers.Items[swIdx]-&gt;Reset();
<a name="l00562"></a>00562                                         somethingReset = <span class="keyword">true</span>;
<a name="l00563"></a>00563                                 }
<a name="l00564"></a>00564                         }
<a name="l00565"></a>00565                 }
<a name="l00566"></a>00566 
<a name="l00567"></a>00567                 <span class="keywordflow">if</span>(somethingReset) {
<a name="l00568"></a>00568                         <span class="keywordflow">if</span>(evaForOwner || evaForEnterer) {
<a name="l00569"></a>00569                                 VoxClass::Play(<span class="stringliteral">&quot;EVA_BuildingInfiltrated&quot;</span>);
<a name="l00570"></a>00570                         }
<a name="l00571"></a>00571                         effectApplied = <span class="keyword">true</span>;
<a name="l00572"></a>00572                 }
<a name="l00573"></a>00573         }
<a name="l00574"></a>00574 
<a name="l00575"></a>00575 
<a name="l00576"></a>00576         <span class="keywordtype">int</span> bounty = 0;
<a name="l00577"></a>00577         <span class="keywordtype">int</span> available = Owner-&gt;Available_Money();
<a name="l00578"></a>00578         <span class="keywordflow">if</span>(pTypeExt-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#afdf8c51977e5d76a168fdbb6185e12d2">StolenMoneyAmount</a> &gt; 0) {
<a name="l00579"></a>00579                 bounty = pTypeExt-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#afdf8c51977e5d76a168fdbb6185e12d2">StolenMoneyAmount</a>;
<a name="l00580"></a>00580         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pTypeExt-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#ac4b24dc0ce25757fb1ba09a3ebc97e0f">StolenMoneyPercentage</a> &gt; 0) {
<a name="l00581"></a>00581                 bounty = int(available * pTypeExt-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#ac4b24dc0ce25757fb1ba09a3ebc97e0f">StolenMoneyPercentage</a>);
<a name="l00582"></a>00582         }
<a name="l00583"></a>00583         <span class="keywordflow">if</span>(bounty &gt; 0) {
<a name="l00584"></a>00584                 bounty = std::min(bounty, available);
<a name="l00585"></a>00585                 Owner-&gt;TakeMoney(bounty);
<a name="l00586"></a>00586                 Enterer-&gt;GiveMoney(bounty);
<a name="l00587"></a>00587                 <span class="keywordflow">if</span>(evaForOwner) {
<a name="l00588"></a>00588                         VoxClass::Play(<span class="stringliteral">&quot;EVA_CashStolen&quot;</span>);
<a name="l00589"></a>00589                 }
<a name="l00590"></a>00590                 <span class="keywordflow">if</span>(evaForEnterer) {
<a name="l00591"></a>00591                         VoxClass::Play(<span class="stringliteral">&quot;EVA_BuildingInfCashStolen&quot;</span>);
<a name="l00592"></a>00592                 }
<a name="l00593"></a>00593                 effectApplied = <span class="keyword">true</span>;
<a name="l00594"></a>00594         }
<a name="l00595"></a>00595 
<a name="l00596"></a>00596 
<a name="l00597"></a>00597         <span class="keywordflow">if</span>(pTypeExt-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#ac625dca325224abc0e829b9dfdd35322">GainVeterancy</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
<a name="l00598"></a>00598                 <span class="keywordtype">bool</span> promotionStolen = <span class="keyword">true</span>;
<a name="l00599"></a>00599 
<a name="l00600"></a>00600                 <span class="keywordflow">switch</span>(EnteredType-&gt;Factory) {
<a name="l00601"></a>00601                         <span class="keywordflow">case</span> UnitTypeClass::AbsID:
<a name="l00602"></a>00602                                 Enterer-&gt;WarFactoryInfiltrated = <span class="keyword">true</span>;
<a name="l00603"></a>00603                                 <span class="keywordflow">break</span>;
<a name="l00604"></a>00604                         <span class="keywordflow">case</span> InfantryTypeClass::AbsID:
<a name="l00605"></a>00605                                 Enterer-&gt;BarracksInfiltrated = <span class="keyword">true</span>;
<a name="l00606"></a>00606                                 <span class="keywordflow">break</span>;
<a name="l00607"></a>00607                                 <span class="comment">// TODO: aircraft/building</span>
<a name="l00608"></a>00608                         <span class="keywordflow">default</span>:
<a name="l00609"></a>00609                                 promotionStolen = <span class="keyword">false</span>;
<a name="l00610"></a>00610                 }
<a name="l00611"></a>00611 
<a name="l00612"></a>00612                 <span class="keywordflow">if</span>(promotionStolen) {
<a name="l00613"></a>00613                         Enterer-&gt;ShouldRecheckTechTree = <span class="keyword">true</span>;
<a name="l00614"></a>00614                         <span class="keywordflow">if</span>(Enterer-&gt;ControlledByPlayer()) {
<a name="l00615"></a>00615                                 MouseClass::Instance-&gt;SidebarNeedsRepaint();
<a name="l00616"></a>00616                         }
<a name="l00617"></a>00617                         <span class="keywordflow">if</span>(evaForOwner) {
<a name="l00618"></a>00618                                 VoxClass::Play(<span class="stringliteral">&quot;EVA_TechnologyStolen&quot;</span>);
<a name="l00619"></a>00619                         }
<a name="l00620"></a>00620                         <span class="keywordflow">if</span>(evaForEnterer) {
<a name="l00621"></a>00621                                 VoxClass::Play(<span class="stringliteral">&quot;EVA_BuildingInfiltrated&quot;</span>);
<a name="l00622"></a>00622                                 VoxClass::Play(<span class="stringliteral">&quot;EVA_NewTechnologyAcquired&quot;</span>);
<a name="l00623"></a>00623                         }
<a name="l00624"></a>00624                         effectApplied = <span class="keyword">true</span>;
<a name="l00625"></a>00625                 }
<a name="l00626"></a>00626         }
<a name="l00627"></a>00627 
<a name="l00628"></a>00628 
<a name="l00629"></a>00629         <span class="comment">/*      RA1-Style Spying, as requested in issue #633</span>
<a name="l00630"></a>00630 <span class="comment">                This sets the respective bit to inform the game that a particular house has spied this building.</span>
<a name="l00631"></a>00631 <span class="comment">                Knowing that, the game will reveal the current production in this building to the players who have spied it.</span>
<a name="l00632"></a>00632 <span class="comment">                In practice, this means: If a player who has spied a factory clicks on that factory,</span>
<a name="l00633"></a>00633 <span class="comment">                he will see the cameo of whatever is being built in the factory.</span>
<a name="l00634"></a>00634 <span class="comment"></span>
<a name="l00635"></a>00635 <span class="comment">                Addition 04.03.10: People complained about it not being optional. Now it is.</span>
<a name="l00636"></a>00636 <span class="comment">        */</span>
<a name="l00637"></a>00637         <span class="keywordflow">if</span>(pTypeExt-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#a1b663708a63c3570263c7da81673fc90">RevealProduction</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
<a name="l00638"></a>00638                 EnteredBuilding-&gt;DisplayProductionTo.Add(Enterer);
<a name="l00639"></a>00639                 <span class="keywordflow">if</span>(evaForOwner || evaForEnterer) {
<a name="l00640"></a>00640                         VoxClass::Play(<span class="stringliteral">&quot;EVA_BuildingInfiltrated&quot;</span>);
<a name="l00641"></a>00641                 }
<a name="l00642"></a>00642                 effectApplied = <span class="keyword">true</span>;
<a name="l00643"></a>00643         }
<a name="l00644"></a>00644 
<a name="l00645"></a>00645         <span class="keywordflow">if</span>(pTypeExt-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#aa4a1ce7bf0b8fdebf2819aa189ccf846">RevealRadar</a>.<a class="code" href="class_valueable.html#a2e7156efef9fa4f180a95b7f80cf8129">Get</a>()) {
<a name="l00646"></a>00646                 EnteredBuilding-&gt;DisplayProductionTo.Add(Enterer);
<a name="l00647"></a>00647                 <a class="code" href="class_building_ext.html#a7cc1e762dfcded375fd8d8f53f23e700">BuildingExt::UpdateDisplayTo</a>(EnteredBuilding);
<a name="l00648"></a>00648                 <span class="keywordflow">if</span>(evaForOwner || evaForEnterer) {
<a name="l00649"></a>00649                         VoxClass::Play(<span class="stringliteral">&quot;EVA_BuildingInfiltrated&quot;</span>);
<a name="l00650"></a>00650                 }
<a name="l00651"></a>00651                 MapClass::Instance-&gt;sub_657CE0();
<a name="l00652"></a>00652                 MapClass::Instance-&gt;RedrawSidebar(2);
<a name="l00653"></a>00653                 effectApplied = <span class="keyword">true</span>;
<a name="l00654"></a>00654         }
<a name="l00655"></a>00655 
<a name="l00656"></a>00656         <span class="keywordflow">if</span>(effectApplied) {
<a name="l00657"></a>00657                 EnteredBuilding-&gt;SetLayer(Layer::Ground);
<a name="l00658"></a>00658         }
<a name="l00659"></a>00659         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00660"></a>00660 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3a99ceb814144b0e760b723e81bfc075"></a><!-- doxytag: member="BuildingExt::ExtData::InvalidatePointer" ref="a3a99ceb814144b0e760b723e81bfc075" args="(void *ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BuildingExt::ExtData::InvalidatePointer </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>ptr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <a class="el" href="class_extension.html#a9e6b2ac570eddadb2ca3c01668da88b8">Extension&lt; TT &gt;</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00044"></a>00044                                                           {
<a name="l00045"></a>00045                         AnnounceInvalidPointer(<a class="code" href="class_building_ext_1_1_ext_data.html#afead3304480fed76856d3e8048dc020d" title="Contains the house which owned this building prior to it being raided and turned...">OwnerBeforeRaid</a>, ptr);
<a name="l00046"></a>00046                 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a39cc147927fcbc639e64d3261d415442"></a><!-- doxytag: member="BuildingExt::ExtData::isLinkable" ref="a39cc147927fcbc639e64d3261d415442" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BuildingExt::ExtData::isLinkable </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if this is a structure that can be linked to other structures, like a wall, fence, or trench. This is used to quick-check if the game has to look for linkable buildings in the first place. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_building_ext_1_1_ext_data.html#a85968e3b639ee4a5b6c62c27fec80f26" title="Checks if the current building can link to the given target building.">canLinkTo()</a> </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00295"></a>00295                                     {
<a name="l00296"></a>00296         <a class="code" href="class_building_type_ext_1_1_ext_data.html">BuildingTypeExt::ExtData</a>* typeExtData = <a class="code" href="class_building_type_ext.html#a9643fa629dd6d2a20eeefa4942d8612a">BuildingTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(this-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>-&gt;Type);
<a name="l00297"></a>00297         <span class="keywordflow">return</span> typeExtData-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#ad1b081e29f662a7f14228317bd86ae5a">IsLinkable</a>();
<a name="l00298"></a>00298 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9e1fb291c1b79b60802734e41da10db4"></a><!-- doxytag: member="BuildingExt::ExtData::KickOutOfRubble" ref="a9e1fb291c1b79b60802734e41da10db4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BuildingExt::ExtData::KickOutOfRubble </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Bumps all Technos that reside on a building's foundation out of the way. </p>
<p>All units on the building's foundation are kicked out.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>AlexB </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010-06-27 </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00128"></a>00128                                          {
<a name="l00129"></a>00129         BuildingClass* pBld = this-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>;
<a name="l00130"></a>00130 
<a name="l00131"></a>00131         <span class="keywordflow">if</span>(<a class="code" href="class_building_type_ext_1_1_ext_data.html">BuildingTypeExt::ExtData</a> *pData = <a class="code" href="class_building_type_ext.html#a9643fa629dd6d2a20eeefa4942d8612a">BuildingTypeExt::ExtMap</a>.Find(pBld-&gt;Type)) {
<a name="l00132"></a>00132                 <span class="comment">// get the number of cells and a pointer to the cell data</span>
<a name="l00133"></a>00133                 <span class="keywordtype">int</span> length = 0, height = 0, width = 0;
<a name="l00134"></a>00134                 CellStruct *data = NULL;
<a name="l00135"></a>00135                 <span class="keywordflow">if</span>(pData-&gt;IsCustom) {
<a name="l00136"></a>00136                         width = pData-&gt;CustomWidth;
<a name="l00137"></a>00137                         height = pData-&gt;CustomHeight;
<a name="l00138"></a>00138                         data = pData-&gt;CustomData;
<a name="l00139"></a>00139                 } <span class="keywordflow">else</span> {
<a name="l00140"></a>00140                         <span class="comment">// these are length constants derived from the fnd_* constants</span>
<a name="l00141"></a>00141                         <span class="keywordtype">int</span> fnd_widths[] = {1, 2, 1, 2, 2, 3, 3, 3, 4, 3, 1, 3, 4, 1, 1, 2, 2, 5, 4, 3, 6, 0};
<a name="l00142"></a>00142                         <span class="keywordtype">int</span> fnd_heights[] = {1, 1, 2, 2, 3, 2, 3, 5, 2, 3, 3, 1, 3, 4, 5, 6, 5, 3, 4, 4, 4, 0};
<a name="l00143"></a>00143                         width = fnd_widths[pBld-&gt;Type-&gt;Foundation];
<a name="l00144"></a>00144                         height = fnd_heights[pBld-&gt;Type-&gt;Foundation];
<a name="l00145"></a>00145                         data = pBld-&gt;Type-&gt;FoundationData;
<a name="l00146"></a>00146                 }
<a name="l00147"></a>00147                 length = height * width;
<a name="l00148"></a>00148 
<a name="l00149"></a>00149                 <span class="comment">// iterate over all cells and remove all infantry</span>
<a name="l00150"></a>00150                 DynamicVectorClass&lt;TechnoClass*&gt; *list = <span class="keyword">new</span> DynamicVectorClass&lt;TechnoClass*&gt;();
<a name="l00151"></a>00151                 DynamicVectorClass&lt;bool&gt; *sel = <span class="keyword">new</span> DynamicVectorClass&lt;bool&gt;();
<a name="l00152"></a>00152                 CellStruct location = MapClass::Instance-&gt;GetCellAt(&amp;pBld-&gt;Location)-&gt;MapCoords;
<a name="l00153"></a>00153                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;length; ++i) {
<a name="l00154"></a>00154                         CellStruct pos = data[i];
<a name="l00155"></a>00155                         <span class="keywordflow">if</span>((pos.X != 0x7FFF) &amp;&amp; (pos.Y != 0x7FFF)) {
<a name="l00156"></a>00156                                 pos += location;
<a name="l00157"></a>00157 
<a name="l00158"></a>00158                                 <span class="comment">// remove every techno that resides on this cell</span>
<a name="l00159"></a>00159                                 CellClass* cell = MapClass::Instance-&gt;GetCellAt(&amp;pos);
<a name="l00160"></a>00160                                 <span class="keywordflow">for</span>(ObjectClass* pObj = cell-&gt;GetContent(); pObj; pObj = pObj-&gt;NextObject) {
<a name="l00161"></a>00161                                         <span class="keywordflow">if</span>(TechnoClass* pTech = generic_cast&lt;FootClass*&gt;(pObj)) {
<a name="l00162"></a>00162                                                 <span class="keywordtype">bool</span> bSel = pTech-&gt;IsSelected;
<a name="l00163"></a>00163                                                 <span class="keywordflow">if</span>(pTech-&gt;Remove()) {
<a name="l00164"></a>00164                                                         list-&gt;AddItem(pTech);
<a name="l00165"></a>00165                                                         sel-&gt;AddItem(bSel);
<a name="l00166"></a>00166                                                 }
<a name="l00167"></a>00167                                         }
<a name="l00168"></a>00168                                 }
<a name="l00169"></a>00169                         } <span class="keywordflow">else</span> {
<a name="l00170"></a>00170                                 <span class="comment">// invalid cell.</span>
<a name="l00171"></a>00171                                 <span class="keywordflow">break</span>;
<a name="l00172"></a>00172                         }
<a name="l00173"></a>00173                 }
<a name="l00174"></a>00174 
<a name="l00175"></a>00175                 <span class="comment">// this part kicks out all units we found in the rubble</span>
<a name="l00176"></a>00176                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;list-&gt;Count; ++i) {
<a name="l00177"></a>00177                         TechnoClass* pTech = list-&gt;GetItem(i);
<a name="l00178"></a>00178                         pBld-&gt;KickOutUnit(pTech, &amp;location);
<a name="l00179"></a>00179                         <span class="keywordflow">if</span>(sel-&gt;GetItem(i)) {
<a name="l00180"></a>00180                                 pTech-&gt;Select();
<a name="l00181"></a>00181                         }
<a name="l00182"></a>00182                 }
<a name="l00183"></a>00183 
<a name="l00184"></a>00184                 <span class="keyword">delete</span> list;
<a name="l00185"></a>00185                 <span class="keyword">delete</span> sel;
<a name="l00186"></a>00186         }
<a name="l00187"></a>00187 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa52160d197643b1ec47982baea06a2cd"></a><!-- doxytag: member="BuildingExt::ExtData::ReverseEngineer" ref="aa52160d197643b1ec47982baea06a2cd" args="(TechnoClass *Victim)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BuildingExt::ExtData::ReverseEngineer </td>
          <td>(</td>
          <td class="paramtype">TechnoClass *&nbsp;</td>
          <td class="paramname"> <em>Victim</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if Victim wasn't buildable and now should be. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00758"></a>00758                                                             {
<a name="l00759"></a>00759         <a class="code" href="class_building_type_ext_1_1_ext_data.html">BuildingTypeExt::ExtData</a> *pReverseData = <a class="code" href="class_building_type_ext.html#a9643fa629dd6d2a20eeefa4942d8612a">BuildingTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(this-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>-&gt;Type);
<a name="l00760"></a>00760         <span class="keywordflow">if</span>(!pReverseData-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#abd1c514360e334678e3e62a0ae50c297">ReverseEngineersVictims</a>) {
<a name="l00761"></a>00761                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00762"></a>00762         }
<a name="l00763"></a>00763 
<a name="l00764"></a>00764         TechnoTypeClass * VictimType = Victim-&gt;GetTechnoType();
<a name="l00765"></a>00765         <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pVictimData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(VictimType);
<a name="l00766"></a>00766 
<a name="l00767"></a>00767         <span class="keywordflow">if</span>(!pVictimData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#aa9157bd8e827f81b9efc6d73e3ab9d73">CanBeReversed</a>) {
<a name="l00768"></a>00768                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00769"></a>00769         }
<a name="l00770"></a>00770 
<a name="l00771"></a>00771         HouseClass *Owner = this-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>-&gt;Owner;
<a name="l00772"></a>00772 
<a name="l00773"></a>00773         <span class="keywordtype">int</span> idx = HouseClass::Array-&gt;FindItemIndex(&amp;Owner);
<a name="l00774"></a>00774 
<a name="l00775"></a>00775         <span class="keywordflow">if</span>(pVictimData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#aa04bc25ff69390fa0a1b3e1ea3ac1a90">ReversedByHouses</a>.ValidIndex(idx)) {
<a name="l00776"></a>00776                 <span class="keywordflow">if</span>(!pVictimData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#aa04bc25ff69390fa0a1b3e1ea3ac1a90">ReversedByHouses</a>[idx]) {
<a name="l00777"></a>00777 
<a name="l00778"></a>00778                         <span class="keywordtype">bool</span> WasBuildable = <a class="code" href="class_house_ext.html#a1398e2ed89a5f517c53f86fdb5278682">HouseExt::PrereqValidate</a>(Owner, VictimType, <span class="keyword">false</span>, <span class="keyword">true</span>) == 1;
<a name="l00779"></a>00779                         pVictimData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#aa04bc25ff69390fa0a1b3e1ea3ac1a90">ReversedByHouses</a>[idx] = <span class="keyword">true</span>;
<a name="l00780"></a>00780                         <span class="keywordflow">if</span>(!WasBuildable) {
<a name="l00781"></a>00781                                 <span class="keywordtype">bool</span> IsBuildable = <a class="code" href="class_house_ext.html#a7c0ef179388075d71345f21fbc1d1808">HouseExt::RequirementsMet</a>(Owner, VictimType) != <a class="code" href="class_house_ext.html#aee273053817bfab24d616b7967d918e2a13fdf9cd7fb5b0681adac4a95d9cb15a">HouseExt::Forbidden</a>;
<a name="l00782"></a>00782                                 <span class="keywordflow">if</span>(IsBuildable) {
<a name="l00783"></a>00783                                         Owner-&gt;ShouldRecheckTechTree = <span class="keyword">true</span>;
<a name="l00784"></a>00784                                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00785"></a>00785                                 }
<a name="l00786"></a>00786                         }
<a name="l00787"></a>00787                 }
<a name="l00788"></a>00788         }
<a name="l00789"></a>00789         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00790"></a>00790 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a11c2bdd38f872dccf64d147cbcffbadf"></a><!-- doxytag: member="BuildingExt::ExtData::RubbleYell" ref="a11c2bdd38f872dccf64d147cbcffbadf" args="(bool beingRepaired=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BuildingExt::ExtData::RubbleYell </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>beingRepaired</em> = <code>false</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function switches the building into its Advanced Rubble state or back to normal. </p>
<p>If no respective target-state object exists in the <a class="el" href="class_building_ext_1_1_ext_data.html">ExtData</a> so far, the function will create it. It'll check beforehand whether the necessary Rubble.Intact or Rubble.Destroyed are actually set on the type. If the necessary one is not set, it'll log a debug message and abort.</p>
<p>Rubble is set to full health on placing, since, no matter what we do in the backend, to the player, each pile of rubble is a new one. The reconstructed building, on the other hand, is set to 1% of it's health, since it was just no reconstructed, and not freshly built or repaired yet.</p>
<p>Lastly, the function will set the current building as the alternate state on the other state, to ensure that, if the other state gets triggered back, it is connected to this state. (e.g. when a building is turned into rubble, the normal state will set itself as the normal state of the rubble, so when the rubble is reconstructed, it switches back to the correct normal state.)</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>beingRepaired</em>&nbsp;</td><td>if set to true, the function will turn the building back into its normal state. If false or unset, the building will be turned into rubble.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the new state could be deployed, false otherwise.</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Renegade </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>16.12.09+ </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00077"></a>00077                                                       {
<a name="l00078"></a>00078         BuildingClass* currentBuilding = this-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>;
<a name="l00079"></a>00079         <a class="code" href="class_building_type_ext_1_1_ext_data.html">BuildingTypeExt::ExtData</a>* pTypeData = <a class="code" href="class_building_type_ext.html#a9643fa629dd6d2a20eeefa4942d8612a">BuildingTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(currentBuilding-&gt;Type);
<a name="l00080"></a>00080         BuildingClass* newState = NULL;
<a name="l00081"></a>00081 
<a name="l00082"></a>00082         currentBuilding-&gt;Remove(); <span class="comment">// only takes it off the map</span>
<a name="l00083"></a>00083         currentBuilding-&gt;DestroyNthAnim(BuildingAnimSlot::All);
<a name="l00084"></a>00084 
<a name="l00085"></a>00085         <span class="keywordflow">if</span>(beingRepaired) {
<a name="l00086"></a>00086                 <span class="keywordflow">if</span>(!pTypeData-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#a195211051f84e98705aefd9d031ce20a" title="What BuildingType to turn into when reconstructed. (This is the normal building,...">RubbleIntact</a>) {
<a name="l00087"></a>00087                         Debug::Log(<span class="stringliteral">&quot;Warning! Advanced Rubble was supposed to be reconstructed but Ares could not obtain its normal state. \</span>
<a name="l00088"></a>00088 <span class="stringliteral">                        Check if [%s]Rubble.Intact is set (correctly).\n&quot;</span>, currentBuilding-&gt;Type-&gt;ID);
<a name="l00089"></a>00089                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00090"></a>00090                 }
<a name="l00091"></a>00091 
<a name="l00092"></a>00092                 newState = specific_cast&lt;BuildingClass *&gt;(pTypeData-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#a195211051f84e98705aefd9d031ce20a" title="What BuildingType to turn into when reconstructed. (This is the normal building,...">RubbleIntact</a>-&gt;CreateObject(currentBuilding-&gt;Owner));
<a name="l00093"></a>00093                 newState-&gt;Health = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(std::max((newState-&gt;Type-&gt;Strength / 100), 1)); <span class="comment">// see description above</span>
<a name="l00094"></a>00094                 newState-&gt;IsAlive = <span class="keyword">true</span>; <span class="comment">// assuming this is in the sense of &quot;is not destroyed&quot;</span>
<a name="l00095"></a>00095                 <span class="comment">// Location should not be changed by removal</span>
<a name="l00096"></a>00096                 <span class="keywordflow">if</span>(!newState-&gt;Put(&amp;currentBuilding-&gt;Location, currentBuilding-&gt;Facing)) {
<a name="l00097"></a>00097                         Debug::Log(<span class="stringliteral">&quot;Advanced Rubble: Failed to place normal state on map!\n&quot;</span>);
<a name="l00098"></a>00098                         GAME_DEALLOC(newState);
<a name="l00099"></a>00099                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00100"></a>00100                 }
<a name="l00101"></a>00101                 <span class="comment">// currentBuilding-&gt;UnInit(); DON&#39;T DO THIS</span>
<a name="l00102"></a>00102 
<a name="l00103"></a>00103         } <span class="keywordflow">else</span> { <span class="comment">// if we&#39;re not here to repair that thing, obviously, we&#39;re gonna crush it</span>
<a name="l00104"></a>00104                 <span class="keywordflow">if</span>(!pTypeData-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#a132ac1f6c233fb50770e19cef876d725" title="What BuildingType to turn into when destroyed. (This is the rubble, set on normal...">RubbleDestroyed</a>) {
<a name="l00105"></a>00105                         Debug::Log(<span class="stringliteral">&quot;Warning! Building was supposed to be turned into Advanced Rubble but Ares could not obtain its rubble state. \</span>
<a name="l00106"></a>00106 <span class="stringliteral">                        Check if [%s]Rubble.Destroyed is set (correctly).\n&quot;</span>, currentBuilding-&gt;Type-&gt;ID);
<a name="l00107"></a>00107                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00108"></a>00108                 }
<a name="l00109"></a>00109 
<a name="l00110"></a>00110                 newState = specific_cast&lt;BuildingClass *&gt;(pTypeData-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#a132ac1f6c233fb50770e19cef876d725" title="What BuildingType to turn into when destroyed. (This is the rubble, set on normal...">RubbleDestroyed</a>-&gt;CreateObject(currentBuilding-&gt;Owner));
<a name="l00111"></a>00111                 <span class="comment">// Location should not be changed by removal</span>
<a name="l00112"></a>00112                 <span class="keywordflow">if</span>(!newState-&gt;Put(&amp;currentBuilding-&gt;Location, currentBuilding-&gt;Facing)) {
<a name="l00113"></a>00113                         Debug::Log(<span class="stringliteral">&quot;Advanced Rubble: Failed to place rubble state on map!\n&quot;</span>);
<a name="l00114"></a>00114                         GAME_DEALLOC(newState);
<a name="l00115"></a>00115                 }
<a name="l00116"></a>00116         }
<a name="l00117"></a>00117 
<a name="l00118"></a>00118         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00119"></a>00119 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a88c90fd40e919715f1d0ccabcd0c8121"></a><!-- doxytag: member="BuildingExt::ExtData::sameTrench" ref="a88c90fd40e919715f1d0ccabcd0c8121" args="(BuildingClass *targetBuilding)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BuildingExt::ExtData::sameTrench </td>
          <td>(</td>
          <td class="paramtype">BuildingClass *&nbsp;</td>
          <td class="paramname"> <em>targetBuilding</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function checks if the current and the target building are both of the same trench kind. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>targetBuilding</em>&nbsp;</td><td>a pointer to the target building. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if both buildings are trenches and are of the same trench kind, otherwise false.</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Renegade </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>25.12.09+ </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00198"></a>00198                                                                  {
<a name="l00199"></a>00199         <a class="code" href="class_building_type_ext_1_1_ext_data.html">BuildingTypeExt::ExtData</a>* currentTypeExtData = <a class="code" href="class_building_type_ext.html#a9643fa629dd6d2a20eeefa4942d8612a">BuildingTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(this-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>-&gt;Type);
<a name="l00200"></a>00200         <a class="code" href="class_building_type_ext_1_1_ext_data.html">BuildingTypeExt::ExtData</a>* targetTypeExtData = <a class="code" href="class_building_type_ext.html#a9643fa629dd6d2a20eeefa4942d8612a">BuildingTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(targetBuilding-&gt;Type);
<a name="l00201"></a>00201 
<a name="l00202"></a>00202         <span class="keywordflow">return</span> ((currentTypeExtData-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#aa02e71a646a25fdfdab06cd89a303a1c" title="Enables moving between segments - saves ID of a kind of trench.">IsTrench</a> &gt; -1) &amp;&amp; (currentTypeExtData-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#aa02e71a646a25fdfdab06cd89a303a1c" title="Enables moving between segments - saves ID of a kind of trench.">IsTrench</a> == targetTypeExtData-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#aa02e71a646a25fdfdab06cd89a303a1c" title="Enables moving between segments - saves ID of a kind of trench.">IsTrench</a>));
<a name="l00203"></a>00203 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9a142e25874321613a711b2f196a5982"></a><!-- doxytag: member="BuildingExt::ExtData::Size" ref="a9a142e25874321613a711b2f196a5982" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual size_t BuildingExt::ExtData::Size </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <a class="el" href="class_extension.html#a44ddedd12613b24b7b03d21982782047">Extension&lt; TT &gt;</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00042"></a>00042 { <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(*this); };
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0ed3f40c70d8c03aca843297a3587b30"></a><!-- doxytag: member="BuildingExt::ExtData::UpdateFirewall" ref="a0ed3f40c70d8c03aca843297a3587b30" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BuildingExt::ExtData::UpdateFirewall </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00662"></a>00662                                         {
<a name="l00663"></a>00663         BuildingClass *B = this-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>;
<a name="l00664"></a>00664         BuildingTypeClass *BT = B-&gt;Type;
<a name="l00665"></a>00665         HouseClass *H = B-&gt;Owner;
<a name="l00666"></a>00666         <a class="code" href="class_building_type_ext_1_1_ext_data.html">BuildingTypeExt::ExtData</a>* pTypeData = <a class="code" href="class_building_type_ext.html#a9643fa629dd6d2a20eeefa4942d8612a">BuildingTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(BT);
<a name="l00667"></a>00667 
<a name="l00668"></a>00668         <span class="keywordflow">if</span>(!pTypeData-&gt;<a class="code" href="class_building_type_ext_1_1_ext_data.html#a546647f34224bbd9057c36ea89eb4763">Firewall_Is</a>) {
<a name="l00669"></a>00669                 <span class="keywordflow">return</span>;
<a name="l00670"></a>00670         }
<a name="l00671"></a>00671 
<a name="l00672"></a>00672         <a class="code" href="class_house_ext_1_1_ext_data.html">HouseExt::ExtData</a> *pHouseData = <a class="code" href="class_house_ext.html#a4a73e500fabd21a7359c5247c31d4c03">HouseExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(H);
<a name="l00673"></a>00673         <span class="keywordtype">bool</span> FS = pHouseData-&gt;<a class="code" href="class_house_ext_1_1_ext_data.html#aeecf8c826fb89045759820e0aa6d4f55">FirewallActive</a>;
<a name="l00674"></a>00674 
<a name="l00675"></a>00675         DWORD FWFrame = <a class="code" href="class_building_ext.html#a223949406041a5bcab3aeca6730375b2">BuildingExt::GetFirewallFlags</a>(B);
<a name="l00676"></a>00676         <span class="keywordflow">if</span>(FS) {
<a name="l00677"></a>00677                 FWFrame += 32;
<a name="l00678"></a>00678         }
<a name="l00679"></a>00679 
<a name="l00680"></a>00680         <span class="keywordflow">if</span>(B-&gt;FirestormWallFrame != FWFrame) {
<a name="l00681"></a>00681                 <span class="keywordflow">if</span>(!pHouseData-&gt;<a class="code" href="class_house_ext_1_1_ext_data.html#ab13d960ad703172d035cc9d22f36a1f8">FirewallRecalc</a>) {
<a name="l00682"></a>00682                         pHouseData-&gt;<a class="code" href="class_house_ext_1_1_ext_data.html#ab13d960ad703172d035cc9d22f36a1f8">FirewallRecalc</a> = 1;
<a name="l00683"></a>00683                 }
<a name="l00684"></a>00684                 B-&gt;FirestormWallFrame = FWFrame;
<a name="l00685"></a>00685                 B-&gt;GetCell()-&gt;Setup(0xFFFFFFFF);
<a name="l00686"></a>00686                 B-&gt;SetLayer(Layer::Ground); <span class="comment">// HACK - repaints properly</span>
<a name="l00687"></a>00687         }
<a name="l00688"></a>00688 
<a name="l00689"></a>00689         <span class="keywordflow">if</span>(!FS) {
<a name="l00690"></a>00690                 <span class="keywordflow">return</span>;
<a name="l00691"></a>00691         }
<a name="l00692"></a>00692 
<a name="l00693"></a>00693         <span class="keywordflow">if</span>(!(Unsorted::CurrentFrame % 7) &amp;&amp; ScenarioClass::Instance-&gt;Random.RandomRanged(0, 15) == 1) {
<a name="l00694"></a>00694                 <span class="keywordtype">int</span> corners = (FWFrame &amp; 0xF); <span class="comment">// 1111b</span>
<a name="l00695"></a>00695                 <span class="keywordflow">if</span>(AnimClass *IdleAnim = B-&gt;FirestormAnim) {
<a name="l00696"></a>00696                         GAME_DEALLOC(IdleAnim);
<a name="l00697"></a>00697                         B-&gt;FirestormAnim = 0;
<a name="l00698"></a>00698                 }
<a name="l00699"></a>00699                 <span class="keywordflow">if</span>(corners != 5 &amp;&amp; corners != 10) {  <span class="comment">// (0101b || 1010b) == part of a straight line</span>
<a name="l00700"></a>00700                         CoordStruct XYZ;
<a name="l00701"></a>00701                         B-&gt;GetCoords(&amp;XYZ);
<a name="l00702"></a>00702                         XYZ.X -= 768;
<a name="l00703"></a>00703                         XYZ.Y -= 768;
<a name="l00704"></a>00704                         <span class="keywordflow">if</span>(AnimTypeClass *FSA = AnimTypeClass::Find(<span class="stringliteral">&quot;FSIDLE&quot;</span>)) {
<a name="l00705"></a>00705                                 GAME_ALLOC(AnimClass, B-&gt;FirestormAnim, FSA, &amp;XYZ);
<a name="l00706"></a>00706                         }
<a name="l00707"></a>00707                 }
<a name="l00708"></a>00708         }
<a name="l00709"></a>00709 
<a name="l00710"></a>00710         this-&gt;<a class="code" href="class_building_ext_1_1_ext_data.html#a21a5f7c8f4bb43c82dcc2e03b6681291">ImmolateVictims</a>();
<a name="l00711"></a>00711 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a0d8c28c2f33fc5710e8aa2dd8da374e0"></a><!-- doxytag: member="BuildingExt::ExtData::ignoreNextEVA" ref="a0d8c28c2f33fc5710e8aa2dd8da374e0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_building_ext_1_1_ext_data.html#a0d8c28c2f33fc5710e8aa2dd8da374e0">BuildingExt::ExtData::ignoreNextEVA</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This is used when returning raided buildings, to decide whether to play EVA announcements about building capture. </p>

</div>
</div>
<a class="anchor" id="afa7ba845c44fb28da0ffdf2b7b7c5667"></a><!-- doxytag: member="BuildingExt::ExtData::isCurrentlyRaided" ref="afa7ba845c44fb28da0ffdf2b7b7c5667" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_building_ext_1_1_ext_data.html#afa7ba845c44fb28da0ffdf2b7b7c5667">BuildingExt::ExtData::isCurrentlyRaided</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Whether this building is currently occupied by someone not the actual owner of the structure. </p>

</div>
</div>
<a class="anchor" id="afead3304480fed76856d3e8048dc020d"></a><!-- doxytag: member="BuildingExt::ExtData::OwnerBeforeRaid" ref="afead3304480fed76856d3e8048dc020d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HouseClass* <a class="el" href="class_building_ext_1_1_ext_data.html#afead3304480fed76856d3e8048dc020d">BuildingExt::ExtData::OwnerBeforeRaid</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Contains the house which owned this building prior to it being raided and turned over to the raiding party. </p>

</div>
</div>
<a class="anchor" id="ad7f420d1c0f2af081419b11913a5a17f"></a><!-- doxytag: member="BuildingExt::ExtData::RegisteredJammers" ref="ad7f420d1c0f2af081419b11913a5a17f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;TechnoClass *&gt; <a class="el" href="class_building_ext_1_1_ext_data.html#ad7f420d1c0f2af081419b11913a5a17f">BuildingExt::ExtData::RegisteredJammers</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set of Radar Jammers which have registered themselves to be in range of this building. (Related to issue #305). </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Ext/Building/<a class="el" href="_building_2_body_8h.html">Body.h</a></li>
<li>Ext/Building/<a class="el" href="_building_2_body_8cpp.html">Body.cpp</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Tue Dec 14 21:10:40 2010 for Ares by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
