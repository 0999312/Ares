<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ares: Ext/Techno/Hooks.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_4f38a043d9972e86e8aa3f2d4f00b04c.html">Ext</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_e86fc2c1857956d0e689de71fa3de8f4.html">Techno</a>
  </div>
</div>
<div class="contents">
<h1>Hooks.cpp File Reference</h1><code>#include &quot;<a class="el" href="_weapon_type_2_body_8h.html">Body.h</a>&quot;</code><br/>
<code>#include &quot;../TechnoType/Body.h&quot;</code><br/>
<code>#include &quot;../Building/Body.h&quot;</code><br/>
<code>#include &quot;../BuildingType/Body.h&quot;</code><br/>
<code>#include &quot;../../Misc/Debug.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="_techno_2_hooks_8cpp.html">../../Misc/JammerClass.h</a>&quot;</code><br/>
<code>#include &lt;vector&gt;</code><br/>
<code>#include &lt;TechnoClass.h&gt;</code><br/>
<code>#include &lt;BuildingClass.h&gt;</code><br/>
<code>#include &quot;../Ext/Techno/Body.h&quot;</code><br/>
<code>#include &lt;SpecificStructures.h&gt;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#aa48e9ef641fcbcbe9cc051f5ca3d07f7">DEFINE_HOOK</a> (7381AE, UnitClass_ReceiveDamage, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a70a006bd12a9751219642fe7aa112f0d">DEFINE_HOOK</a> (41668B, AircraftClass_ReceiveDamage, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a3bf7463228e453cd6dfd9eed3f2144ff">DEFINE_HOOK</a> (6F9E50, TechnoClass_Update, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#aa0db1f91ecacb2c2aeb12e1df209f903">DEFINE_HOOK</a> (6F9E76, TechnoClass_Update_CheckOperators, 6)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">TechnoClass::Update is called every frame; returning 0 tells it to execute the original function's code as well.  <a href="#aa0db1f91ecacb2c2aeb12e1df209f903"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a259774c2bd85df6f7e14a49b18d44434">DEFINE_HOOK</a> (415CA6, AircraftClass_Paradrop, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#aef5a5b0690d127c18100c282b8d23b37">DEFINE_HOOK</a> (6F407D, TechnoClass_Init_1, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#acc0737ed0307ee5550a05c5617e50b84">DEFINE_HOOK</a> (6F4103, TechnoClass_Init_2, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#ae0f1defc31626b66e4bc7b0f09bfe4dc">DEFINE_HOOK</a> (71A860, TemporalClass_UpdateA, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#aabf5552f50b8928c1f1798f97aee21cf">DEFINE_HOOK</a> (71AB30, TemporalClass_GetHelperDamage, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a690915a1cdca7277ad678c826d14948d">DEFINE_HOOK</a> (62A020, ParasiteClass_Update, A)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#ab8e83759985dcf0df54e8a2629684cbe">DEFINE_HOOK</a> (62A7B1, Parasite_ExitUnit, 9)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a9bb2ad6ab82eb357e8bcf1886bc96ed6">DEFINE_HOOK</a> (629804, ParasiteClass_UpdateSquiddy, 9)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a15954c73670d3ad0e2f80209d852310c">DEFINE_HOOK</a> (6F3330, TechnoClass_SelectWeapon, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a0ff690907f5a3608a85cd956e6c48752">DEFINE_HOOK</a> (51F76D, InfantryClass_Unload, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#af17380fb9c25530b62b125542e6dcdc4">DEFINE_HOOK</a> (51CE9A, InfantryClass_Idle, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#ab142f7b86b89d00859a19cd60b4818b2">DEFINE_HOOK</a> (747BBD, UnitTypeClass_LoadFromINI, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a33d52d40d6d585376ca84626f186a0ae">DEFINE_HOOK</a> (5215F9, InfantryClass_UpdateDeploy, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a7706437ae83f93b9655a4d741ef73b1f">EXPORT_FUNC</a> (InfantryClass_UpdateDeploy2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#aef49e7beec4db73c32f8c8b207908081">DEFINE_HOOK</a> (7101CF, FootClass_ImbueLocomotor, 7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a1120d23c1795a6a77541bac64c7a5442">DEFINE_HOOK</a> (4DAA68, FootClass_Update_MoveSound, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a3f616db9ba43c9d24272478e82c68ab1">DEFINE_HOOK</a> (701C97, TechnoClass_ReceiveDamage_AffectsEnemies, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a9d58e75c9617437a2bf97614f6c8ee10">DEFINE_HOOK</a> (7090D0, TechnoClass_SelectFiringVoice_IFVRepair, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a7e402fdb2626143d8ba6003f1463e143">DEFINE_HOOK</a> (70E2D2, TechnoClass_IronCurtain_Modify, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a6e9c32cac2382e5c8dee05cc0ecb9d8d">DEFINE_HOOK</a> (5198AD, InfantryClass_UpdatePosition_EnteredGrinder, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a66ab67c76a281758451b4b39e9ed4745">DEFINE_HOOK</a> (73A1BC, UnitClass_UpdatePosition_EnteredGrinder, 7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_techno_2_hooks_8cpp.html#a4bec982ed342dab7105406e1f798e243">DEFINE_HOOK</a> (6F6AC9, TechnoClass_Remove, 6)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a4bec982ed342dab7105406e1f798e243"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a4bec982ed342dab7105406e1f798e243" args="(6F6AC9, TechnoClass_Remove, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6F6AC9&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_Remove&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00621"></a>00621                                            {
<a name="l00622"></a>00622         GET(TechnoClass *, pThis, ESI);
<a name="l00623"></a>00623         <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a>* <a class="code" href="class_techno_ext.html">TechnoExt</a> = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pThis);
<a name="l00624"></a>00624 
<a name="l00625"></a>00625         <span class="comment">// if the removed object is a radar jammer, unjam all jammed radars</span>
<a name="l00626"></a>00626         <span class="keywordflow">if</span>(TechnoExt-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a>) {
<a name="l00627"></a>00627                 TechnoExt-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a>-&gt;<a class="code" href="class_jammer_class.html#a0f19799beebd05e67631d3bc6b8af84e" title="Unregisters this Jammer on all structures.">UnjamAll</a>();
<a name="l00628"></a>00628                 <span class="keyword">delete</span> TechnoExt-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a>;
<a name="l00629"></a>00629                 TechnoExt-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a> = NULL;
<a name="l00630"></a>00630         }
<a name="l00631"></a>00631 
<a name="l00632"></a>00632         <span class="keywordflow">return</span> 0;
<a name="l00633"></a>00633 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a66ab67c76a281758451b4b39e9ed4745"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a66ab67c76a281758451b4b39e9ed4745" args="(73A1BC, UnitClass_UpdatePosition_EnteredGrinder, 7)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">73A1BC&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UnitClass_UpdatePosition_EnteredGrinder&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">7&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00605"></a>00605 {
<a name="l00606"></a>00606         GET(UnitClass *, Vehicle, EBP);
<a name="l00607"></a>00607         GET(BuildingClass *, Grinder, EBX);
<a name="l00608"></a>00608 
<a name="l00609"></a>00609         <a class="code" href="class_building_ext_1_1_ext_data.html">BuildingExt::ExtData</a> *pData = <a class="code" href="class_building_ext.html#abae25aca766faa296092dea1dc69cff7">BuildingExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Grinder);
<a name="l00610"></a>00610 
<a name="l00611"></a>00611         <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_building_ext_1_1_ext_data.html#aa52160d197643b1ec47982baea06a2cd" title="Returns true if Victim wasn&amp;#39;t buildable and now should be.">ReverseEngineer</a>(Vehicle)) {
<a name="l00612"></a>00612                 <span class="keywordflow">if</span>(Vehicle-&gt;Owner-&gt;ControlledByPlayer()) {
<a name="l00613"></a>00613                         VoxClass::Play(<span class="stringliteral">&quot;EVA_ReverseEngineeredVehicle&quot;</span>);
<a name="l00614"></a>00614                         VoxClass::Play(<span class="stringliteral">&quot;EVA_NewTechnologyAcquired&quot;</span>);
<a name="l00615"></a>00615                 }
<a name="l00616"></a>00616         }
<a name="l00617"></a>00617 
<a name="l00618"></a>00618         <span class="keywordflow">return</span> 0;
<a name="l00619"></a>00619 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6e9c32cac2382e5c8dee05cc0ecb9d8d"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a6e9c32cac2382e5c8dee05cc0ecb9d8d" args="(5198AD, InfantryClass_UpdatePosition_EnteredGrinder, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">5198AD&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InfantryClass_UpdatePosition_EnteredGrinder&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00588"></a>00588 {
<a name="l00589"></a>00589         GET(InfantryClass *, Infantry, ESI);
<a name="l00590"></a>00590         GET(BuildingClass *, Grinder, EBX);
<a name="l00591"></a>00591 
<a name="l00592"></a>00592         <a class="code" href="class_building_ext_1_1_ext_data.html">BuildingExt::ExtData</a> *pData = <a class="code" href="class_building_ext.html#abae25aca766faa296092dea1dc69cff7">BuildingExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Grinder);
<a name="l00593"></a>00593 
<a name="l00594"></a>00594         <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_building_ext_1_1_ext_data.html#aa52160d197643b1ec47982baea06a2cd" title="Returns true if Victim wasn&amp;#39;t buildable and now should be.">ReverseEngineer</a>(Infantry)) {
<a name="l00595"></a>00595                 <span class="keywordflow">if</span>(Infantry-&gt;Owner-&gt;ControlledByPlayer()) {
<a name="l00596"></a>00596                         VoxClass::Play(<span class="stringliteral">&quot;EVA_ReverseEngineeredInfantry&quot;</span>);
<a name="l00597"></a>00597                         VoxClass::Play(<span class="stringliteral">&quot;EVA_NewTechnologyAcquired&quot;</span>);
<a name="l00598"></a>00598                 }
<a name="l00599"></a>00599         }
<a name="l00600"></a>00600 
<a name="l00601"></a>00601         <span class="keywordflow">return</span> 0;
<a name="l00602"></a>00602 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7e402fdb2626143d8ba6003f1463e143"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a7e402fdb2626143d8ba6003f1463e143" args="(70E2D2, TechnoClass_IronCurtain_Modify, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">70E2D2&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_IronCurtain_Modify&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00566"></a>00566                                                        {
<a name="l00567"></a>00567         GET(TechnoClass*, pThis, ECX);
<a name="l00568"></a>00568         GET(<span class="keywordtype">int</span>, duration, EDX);
<a name="l00569"></a>00569         GET_STACK(<span class="keywordtype">bool</span>, force, 0x1C);
<a name="l00570"></a>00570 
<a name="l00571"></a>00571         <span class="comment">// if it&#39;s no force shield then it&#39;s the iron curtain.</span>
<a name="l00572"></a>00572         <span class="keywordflow">if</span>(!force) {
<a name="l00573"></a>00573                 <span class="keywordflow">if</span>(<a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.Find(pThis-&gt;GetTechnoType())) {
<a name="l00574"></a>00574                         duration = (int)(duration * pData-&gt;IC_Modifier);
<a name="l00575"></a>00575                 }
<a name="l00576"></a>00576 
<a name="l00577"></a>00577                 pThis-&gt;IronCurtainTimer.TimeLeft = duration;
<a name="l00578"></a>00578                 pThis-&gt;IronTintStage = 0;
<a name="l00579"></a>00579 
<a name="l00580"></a>00580                 <span class="keywordflow">return</span> 0x70E2DB;
<a name="l00581"></a>00581         }
<a name="l00582"></a>00582 
<a name="l00583"></a>00583         <span class="keywordflow">return</span> 0;
<a name="l00584"></a>00584 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9d58e75c9617437a2bf97614f6c8ee10"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a9d58e75c9617437a2bf97614f6c8ee10" args="(7090D0, TechnoClass_SelectFiringVoice_IFVRepair, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">7090D0&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_SelectFiringVoice_IFVRepair&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00548"></a>00548 {
<a name="l00549"></a>00549         GET(TechnoClass *, Firer, ESI);
<a name="l00550"></a>00550         TechnoTypeClass * FirerType = Firer-&gt;GetTechnoType();
<a name="l00551"></a>00551         <span class="keyword">auto</span> pData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(FirerType);
<a name="l00552"></a>00552 
<a name="l00553"></a>00553         <span class="keywordtype">int</span> idxVoice = pData-&gt;VoiceRepair;
<a name="l00554"></a>00554         <span class="keywordflow">if</span>(idxVoice == -1) {
<a name="l00555"></a>00555                 <span class="keywordflow">if</span>(_strcmpi(FirerType-&gt;ID, <span class="stringliteral">&quot;FV&quot;</span>)) {
<a name="l00556"></a>00556                         <span class="comment">// the game does this</span>
<a name="l00557"></a>00557                         <span class="keywordflow">return</span> 0x7090ED;
<a name="l00558"></a>00558                 }
<a name="l00559"></a>00559                 idxVoice = RulesClass::Instance-&gt;VoiceIFVRepair;
<a name="l00560"></a>00560         }
<a name="l00561"></a>00561         R-&gt;EDI&lt;<span class="keywordtype">int</span>&gt;(idxVoice);
<a name="l00562"></a>00562         <span class="keywordflow">return</span> 0x70914A;
<a name="l00563"></a>00563 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3f616db9ba43c9d24272478e82c68ab1"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a3f616db9ba43c9d24272478e82c68ab1" args="(701C97, TechnoClass_ReceiveDamage_AffectsEnemies, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">701C97&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_ReceiveDamage_AffectsEnemies&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00514"></a>00514 {
<a name="l00515"></a>00515         GET(WarheadTypeClass *, pThis, EBP);
<a name="l00516"></a>00516         GET(TechnoClass *, Victim, ESI);
<a name="l00517"></a>00517         LEA_STACK(args_ReceiveDamage *, Arguments, 0xC8);
<a name="l00518"></a>00518         <span class="keywordtype">bool</span> CanAffect = <span class="keyword">true</span>;
<a name="l00519"></a>00519 
<a name="l00520"></a>00520         <a class="code" href="class_warhead_type_ext_1_1_ext_data.html">WarheadTypeExt::ExtData</a> *WHTypeExt = <a class="code" href="class_warhead_type_ext.html#ab2eb86c684fe6f15f9f95a9aa171e7dd">WarheadTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pThis);
<a name="l00521"></a>00521 
<a name="l00522"></a>00522         <span class="keywordflow">if</span>(Arguments-&gt;Attacker) {
<a name="l00523"></a>00523                 CanAffect = WHTypeExt-&gt;<a class="code" href="class_warhead_type_ext_1_1_ext_data.html#ae92e57b909fd7b771ad4f756220e41cc">AffectsEnemies</a> || Victim-&gt;Owner-&gt;IsAlliedWith(Arguments-&gt;Attacker-&gt;Owner);
<a name="l00524"></a>00524 
<a name="l00525"></a>00525                 <span class="keywordflow">if</span>(Arguments-&gt;Attacker-&gt;Owner != Arguments-&gt;SourceHouse) {
<a name="l00526"></a>00526                         Debug::Log(<span class="stringliteral">&quot;Info: During AffectsEnemies parsing, Attacker&#39;s Owner was %p [%s], but SourceHouse was %p [%s].&quot;</span>,
<a name="l00527"></a>00527                                 Arguments-&gt;Attacker-&gt;Owner,
<a name="l00528"></a>00528                                 (Arguments-&gt;Attacker-&gt;Owner ? Arguments-&gt;Attacker-&gt;Owner-&gt;Type-&gt;ID : <span class="stringliteral">&quot;null&quot;</span>),
<a name="l00529"></a>00529                                 Arguments-&gt;SourceHouse,
<a name="l00530"></a>00530                                 (Arguments-&gt;SourceHouse ? Arguments-&gt;SourceHouse-&gt;Type-&gt;ID : <span class="stringliteral">&quot;null&quot;</span>)
<a name="l00531"></a>00531                                 );
<a name="l00532"></a>00532                         <a class="code" href="class_debug.html#acd0bbec3e1aae30d7b425ddacddb3eb4">Debug::DumpStack</a>(R, 0xE0, 0xC0);
<a name="l00533"></a>00533                 }
<a name="l00534"></a>00534 
<a name="l00535"></a>00535         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(Arguments-&gt;SourceHouse) {
<a name="l00536"></a>00536                 <span class="comment">// fallback, in case future ways of damage dealing don&#39;t include an attacker, e.g. stuff like GenericWarhead</span>
<a name="l00537"></a>00537                 CanAffect = WHTypeExt-&gt;<a class="code" href="class_warhead_type_ext_1_1_ext_data.html#ae92e57b909fd7b771ad4f756220e41cc">AffectsEnemies</a> || Victim-&gt;Owner-&gt;IsAlliedWith(Arguments-&gt;SourceHouse);
<a name="l00538"></a>00538 
<a name="l00539"></a>00539         } <span class="keywordflow">else</span> {
<a name="l00540"></a>00540                 <span class="comment">//Debug::Log(&quot;Warning: Neither Attacker nor SourceHouse were set during AffectsEnemies parsing!&quot;);</span>
<a name="l00541"></a>00541                 <span class="comment">// this is often the case for ownerless damage i.e. crates/fire particles, no point in logging it</span>
<a name="l00542"></a>00542         }
<a name="l00543"></a>00543 
<a name="l00544"></a>00544         <span class="keywordflow">return</span> CanAffect ? 0 : 0x701CC2;
<a name="l00545"></a>00545 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1120d23c1795a6a77541bac64c7a5442"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a1120d23c1795a6a77541bac64c7a5442" args="(4DAA68, FootClass_Update_MoveSound, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">4DAA68&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FootClass_Update_MoveSound&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00500"></a>00500 {
<a name="l00501"></a>00501         GET(FootClass *, F, ESI);
<a name="l00502"></a>00502         <span class="keywordflow">if</span>(F-&gt;unknown_bool_53C) {
<a name="l00503"></a>00503                 <span class="keywordflow">return</span> 0x4DAAEE;
<a name="l00504"></a>00504         }
<a name="l00505"></a>00505         <span class="keywordflow">if</span>(F-&gt;LocomotorSource) {
<a name="l00506"></a>00506                 F-&gt;Audio7.ShutUp();
<a name="l00507"></a>00507                 <span class="keywordflow">return</span> 0x4DAAEE;
<a name="l00508"></a>00508         }
<a name="l00509"></a>00509         <span class="keywordflow">return</span> 0x4DAA70;
<a name="l00510"></a>00510 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aef49e7beec4db73c32f8c8b207908081"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="aef49e7beec4db73c32f8c8b207908081" args="(7101CF, FootClass_ImbueLocomotor, 7)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">7101CF&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FootClass_ImbueLocomotor&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">7&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00493"></a>00493 {
<a name="l00494"></a>00494         GET(FootClass *, F, ESI);
<a name="l00495"></a>00495         F-&gt;Audio7.ShutUp();
<a name="l00496"></a>00496         <span class="keywordflow">return</span> 0;
<a name="l00497"></a>00497 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a33d52d40d6d585376ca84626f186a0ae"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a33d52d40d6d585376ca84626f186a0ae" args="(5215F9, InfantryClass_UpdateDeploy, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">5215F9&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InfantryClass_UpdateDeploy&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00472"></a>00472 {
<a name="l00473"></a>00473         GET(TechnoClass *, I, ESI);
<a name="l00474"></a>00474         <span class="keywordflow">return</span> <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(I-&gt;GetTechnoType())-&gt;Is_Deso ? 0x5216B6 : 0x52160D;
<a name="l00475"></a>00475 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab142f7b86b89d00859a19cd60b4818b2"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="ab142f7b86b89d00859a19cd60b4818b2" args="(747BBD, UnitTypeClass_LoadFromINI, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">747BBD&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UnitTypeClass_LoadFromINI&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00461"></a>00461 {
<a name="l00462"></a>00462         GET(UnitTypeClass *, U, ESI);
<a name="l00463"></a>00463 
<a name="l00464"></a>00464         U-&gt;AltImage = R-&gt;EAX&lt;SHPStruct *&gt;(); <span class="comment">// jumping over, so replicated</span>
<a name="l00465"></a>00465         <span class="keywordflow">return</span> U-&gt;Gunner
<a name="l00466"></a>00466                 ? 0x747BD7
<a name="l00467"></a>00467                 : 0x747E90;
<a name="l00468"></a>00468 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af17380fb9c25530b62b125542e6dcdc4"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="af17380fb9c25530b62b125542e6dcdc4" args="(51CE9A, InfantryClass_Idle, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">51CE9A&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InfantryClass_Idle&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00445"></a>00445 {
<a name="l00446"></a>00446         GET(InfantryClass *, I, ESI);
<a name="l00447"></a>00447         <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(I-&gt;GetTechnoType());
<a name="l00448"></a>00448 
<a name="l00449"></a>00449         <span class="comment">// don&#39;t play idle when paralyzed</span>
<a name="l00450"></a>00450         <span class="keywordflow">if</span>(I-&gt;IsUnderEMP()) {
<a name="l00451"></a>00451                 R-&gt;BL(<span class="keyword">false</span>);
<a name="l00452"></a>00452                 <span class="keywordflow">return</span> 0x51CECD;
<a name="l00453"></a>00453         }
<a name="l00454"></a>00454 
<a name="l00455"></a>00455         R-&gt;EDI(R-&gt;EAX()); <span class="comment">// argh</span>
<a name="l00456"></a>00456         R-&gt;BL(pData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a30f8bc4af232e93bde8bdb3defa88123">Is_Cow</a>); <span class="comment">// aaaargh! again!</span>
<a name="l00457"></a>00457         <span class="keywordflow">return</span> pData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a30f8bc4af232e93bde8bdb3defa88123">Is_Cow</a> ? 0x51CEAE : 0x51CECD;
<a name="l00458"></a>00458 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0ff690907f5a3608a85cd956e6c48752"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a0ff690907f5a3608a85cd956e6c48752" args="(51F76D, InfantryClass_Unload, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">51F76D&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InfantryClass_Unload&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00438"></a>00438 {
<a name="l00439"></a>00439         GET(TechnoClass *, I, ESI);
<a name="l00440"></a>00440         <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(I-&gt;GetTechnoType());
<a name="l00441"></a>00441         <span class="keywordflow">return</span> pData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a326087b571b4e91e6c0056bb039c43d5">Is_Deso</a> ? 0x51F77D : 0x51F792;
<a name="l00442"></a>00442 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a15954c73670d3ad0e2f80209d852310c"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a15954c73670d3ad0e2f80209d852310c" args="(6F3330, TechnoClass_SelectWeapon, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6F3330&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_SelectWeapon&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00266"></a>00266 {
<a name="l00267"></a>00267         GET(TechnoClass *, pThis, ECX);
<a name="l00268"></a>00268         GET_STACK(TechnoClass *, pTarg, 0x4);
<a name="l00269"></a>00269 
<a name="l00270"></a>00270 <span class="comment">//      DWORD Selected = TechnoClassExt::SelectWeaponAgainst(pThis, pTarg);</span>
<a name="l00271"></a>00271 <span class="comment">//      R-&gt;EAX(Selected);</span>
<a name="l00272"></a>00272 <span class="comment">//      return 0x6F3813;</span>
<a name="l00273"></a>00273         <span class="keywordflow">return</span> 0;
<a name="l00274"></a>00274 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9bb2ad6ab82eb357e8bcf1886bc96ed6"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a9bb2ad6ab82eb357e8bcf1886bc96ed6" args="(629804, ParasiteClass_UpdateSquiddy, 9)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">629804&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ParasiteClass_UpdateSquiddy&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">9&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00256"></a>00256 {
<a name="l00257"></a>00257         GET(TechnoClass *, T, ECX);
<a name="l00258"></a>00258         <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(T);
<a name="l00259"></a>00259         WeaponStruct *W = T-&gt;GetWeapon(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a39f2d7a58f3eceb3629b3a3718a957a8">idxSlot_Parasite</a>);
<a name="l00260"></a>00260         R-&gt;EAX&lt;WeaponStruct *&gt;(W);
<a name="l00261"></a>00261         <span class="keywordflow">return</span> 0x62980D;
<a name="l00262"></a>00262 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab8e83759985dcf0df54e8a2629684cbe"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="ab8e83759985dcf0df54e8a2629684cbe" args="(62A7B1, Parasite_ExitUnit, 9)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">62A7B1&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Parasite_ExitUnit&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">9&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00247"></a>00247 {
<a name="l00248"></a>00248         GET(TechnoClass *, T, ECX);
<a name="l00249"></a>00249         <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(T);
<a name="l00250"></a>00250         WeaponStruct *W = T-&gt;GetWeapon(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a39f2d7a58f3eceb3629b3a3718a957a8">idxSlot_Parasite</a>);
<a name="l00251"></a>00251         R-&gt;EAX&lt;WeaponStruct *&gt;(W);
<a name="l00252"></a>00252         <span class="keywordflow">return</span> 0x62A7BA;
<a name="l00253"></a>00253 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a690915a1cdca7277ad678c826d14948d"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a690915a1cdca7277ad678c826d14948d" args="(62A020, ParasiteClass_Update, A)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">62A020&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ParasiteClass_Update&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">A&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00238"></a>00238 {
<a name="l00239"></a>00239         GET(TechnoClass *, T, ECX);
<a name="l00240"></a>00240         <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(T);
<a name="l00241"></a>00241         WeaponStruct *W = T-&gt;GetWeapon(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a39f2d7a58f3eceb3629b3a3718a957a8">idxSlot_Parasite</a>);
<a name="l00242"></a>00242         R-&gt;EAX&lt;WeaponStruct *&gt;(W);
<a name="l00243"></a>00243         <span class="keywordflow">return</span> 0x62A02A;
<a name="l00244"></a>00244 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aabf5552f50b8928c1f1798f97aee21cf"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="aabf5552f50b8928c1f1798f97aee21cf" args="(71AB30, TemporalClass_GetHelperDamage, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">71AB30&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TemporalClass_GetHelperDamage&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00227"></a>00227 {
<a name="l00228"></a>00228         GET(TemporalClass *, Temp, ESI);
<a name="l00229"></a>00229         TechnoClass *T = Temp-&gt;Owner;
<a name="l00230"></a>00230         <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(T);
<a name="l00231"></a>00231         WeaponStruct *W = T-&gt;GetWeapon(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a298085b541cdbde1029ecb9e77e759d5">idxSlot_Warp</a>);
<a name="l00232"></a>00232         R-&gt;EAX&lt;WeaponStruct *&gt;(W);
<a name="l00233"></a>00233         <span class="keywordflow">return</span> 0x71AB47;
<a name="l00234"></a>00234 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae0f1defc31626b66e4bc7b0f09bfe4dc"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="ae0f1defc31626b66e4bc7b0f09bfe4dc" args="(71A860, TemporalClass_UpdateA, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">71A860&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TemporalClass_UpdateA&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00216"></a>00216 {
<a name="l00217"></a>00217         GET(TemporalClass *, Temp, ESI);
<a name="l00218"></a>00218         TechnoClass *T = Temp-&gt;Owner;
<a name="l00219"></a>00219         <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(T);
<a name="l00220"></a>00220         WeaponStruct *W = T-&gt;GetWeapon(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a298085b541cdbde1029ecb9e77e759d5">idxSlot_Warp</a>);
<a name="l00221"></a>00221         R-&gt;EAX&lt;WeaponStruct *&gt;(W);
<a name="l00222"></a>00222         <span class="keywordflow">return</span> 0x71A876;
<a name="l00223"></a>00223 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acc0737ed0307ee5550a05c5617e50b84"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="acc0737ed0307ee5550a05c5617e50b84" args="(6F4103, TechnoClass_Init_2, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6F4103&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_Init_2&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00210"></a>00210 {
<a name="l00211"></a>00211         <span class="keywordflow">return</span> 0x6F41C0;
<a name="l00212"></a>00212 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aef5a5b0690d127c18100c282b8d23b37"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="aef5a5b0690d127c18100c282b8d23b37" args="(6F407D, TechnoClass_Init_1, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6F407D&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_Init_1&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00144"></a>00144 {
<a name="l00145"></a>00145         GET(TechnoClass *, T, ESI);
<a name="l00146"></a>00146         TechnoTypeClass * Type = T-&gt;GetTechnoType();
<a name="l00147"></a>00147         <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(T);
<a name="l00148"></a>00148         <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pTypeData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Type);
<a name="l00149"></a>00149 
<a name="l00150"></a>00150         CaptureManagerClass *Capturer = NULL;
<a name="l00151"></a>00151         ParasiteClass *Parasite = NULL;
<a name="l00152"></a>00152         TemporalClass *Temporal = NULL;
<a name="l00153"></a>00153 
<a name="l00154"></a>00154         FootClass *F = generic_cast&lt;FootClass *&gt;(T);
<a name="l00155"></a>00155         <span class="keywordtype">bool</span> IsFoot = (F != NULL);
<a name="l00156"></a>00156 
<a name="l00157"></a>00157 <span class="comment">//      for(int i = 0; i &lt; pTypeData-&gt;Weapons.get_Count(); ++i) {</span>
<a name="l00158"></a>00158 <span class="comment">//              WeaponStruct *W = &amp;pTypeData-&gt;Weapons[i];</span>
<a name="l00159"></a>00159         TechnoTypeClass *TT = T-&gt;GetTechnoType();
<a name="l00160"></a>00160         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 18; ++i) {
<a name="l00161"></a>00161                 WeaponTypeClass *W1 = TT-&gt;get_Weapon(i);
<a name="l00162"></a>00162                 WeaponTypeClass *W2 = TT-&gt;get_EliteWeapon(i);
<a name="l00163"></a>00163                 <span class="keywordflow">if</span>(!W1 &amp;&amp; !W2) {
<a name="l00164"></a>00164                         <span class="keywordflow">continue</span>;
<a name="l00165"></a>00165                 }
<a name="l00166"></a>00166                 WarheadTypeClass *WH1 = W1 ? W1-&gt;Warhead : NULL;
<a name="l00167"></a>00167                 WarheadTypeClass *WH2 = W2 ? W2-&gt;Warhead : NULL;
<a name="l00168"></a>00168 
<a name="l00169"></a>00169                 <span class="keywordflow">if</span>((W1 &amp;&amp; !WH1) || (W2 &amp;&amp; !WH2)) {
<a name="l00170"></a>00170                         <a class="code" href="class_debug.html#af5877607385240e065c60bed324530ff">Debug::FatalErrorAndExit</a>(
<a name="l00171"></a>00171                                 <span class="stringliteral">&quot;Constructing an instance of [%s]:\r\n%sWeapon %s (slot %d) has no Warhead!&quot;</span>,
<a name="l00172"></a>00172                                         Type-&gt;ID,
<a name="l00173"></a>00173                                         WH1 ? <span class="stringliteral">&quot;Elite &quot;</span> : <span class="stringliteral">&quot;&quot;</span>,
<a name="l00174"></a>00174                                         (WH1 ? W2 : W1)-&gt;ID,
<a name="l00175"></a>00175                                         i);
<a name="l00176"></a>00176                 }
<a name="l00177"></a>00177 
<a name="l00178"></a>00178                 <span class="keywordflow">if</span>(WH1 &amp;&amp; WH1-&gt;MindControl &amp;&amp; Capturer == NULL) {
<a name="l00179"></a>00179                         GAME_ALLOC(CaptureManagerClass, Capturer, T, W1-&gt;Damage, W1-&gt;InfiniteMindControl);
<a name="l00180"></a>00180                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(WH2 &amp;&amp; WH2-&gt;MindControl &amp;&amp; Capturer == NULL) {
<a name="l00181"></a>00181                         GAME_ALLOC(CaptureManagerClass, Capturer, T, W2-&gt;Damage, W2-&gt;InfiniteMindControl);
<a name="l00182"></a>00182                 }
<a name="l00183"></a>00183 
<a name="l00184"></a>00184                 <span class="keywordflow">if</span>(WH1 &amp;&amp; WH1-&gt;Temporal &amp;&amp; Temporal == NULL) {
<a name="l00185"></a>00185                         GAME_ALLOC(TemporalClass, Temporal, T);
<a name="l00186"></a>00186                         Temporal-&gt;WarpPerStep = W1-&gt;Damage;
<a name="l00187"></a>00187                         pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a298085b541cdbde1029ecb9e77e759d5">idxSlot_Warp</a> = (BYTE)i;
<a name="l00188"></a>00188                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(WH2 &amp;&amp; WH2-&gt;Temporal &amp;&amp; Temporal == NULL) {
<a name="l00189"></a>00189                         GAME_ALLOC(TemporalClass, Temporal, T);
<a name="l00190"></a>00190                         Temporal-&gt;WarpPerStep = W2-&gt;Damage;
<a name="l00191"></a>00191                         pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a298085b541cdbde1029ecb9e77e759d5">idxSlot_Warp</a> = (BYTE)i;
<a name="l00192"></a>00192                 }
<a name="l00193"></a>00193 
<a name="l00194"></a>00194                 <span class="keywordflow">if</span>((WH1 &amp;&amp; WH1-&gt;Parasite || WH2 &amp;&amp; WH2-&gt;Parasite) &amp;&amp; IsFoot &amp;&amp; Parasite == NULL) {
<a name="l00195"></a>00195                         GAME_ALLOC(ParasiteClass, Parasite, F);
<a name="l00196"></a>00196                         pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a39f2d7a58f3eceb3629b3a3718a957a8">idxSlot_Parasite</a> = (BYTE)i;
<a name="l00197"></a>00197                 }
<a name="l00198"></a>00198         }
<a name="l00199"></a>00199 
<a name="l00200"></a>00200         T-&gt;CaptureManager = Capturer;
<a name="l00201"></a>00201         T-&gt;TemporalImUsing = Temporal;
<a name="l00202"></a>00202         <span class="keywordflow">if</span>(IsFoot) {
<a name="l00203"></a>00203                 F-&gt;ParasiteImUsing = Parasite;
<a name="l00204"></a>00204         }
<a name="l00205"></a>00205 
<a name="l00206"></a>00206         <span class="keywordflow">return</span> 0x6F4102;
<a name="l00207"></a>00207 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a259774c2bd85df6f7e14a49b18d44434"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a259774c2bd85df6f7e14a49b18d44434" args="(415CA6, AircraftClass_Paradrop, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">415CA6&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AircraftClass_Paradrop&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00127"></a>00127 {
<a name="l00128"></a>00128         GET(AircraftClass *, A, EDI);
<a name="l00129"></a>00129         GET(FootClass *, P, ESI);
<a name="l00130"></a>00130         <span class="keywordflow">if</span>(P-&gt;WhatAmI() != abs_Unit) {
<a name="l00131"></a>00131                 <span class="keywordflow">return</span> 0;
<a name="l00132"></a>00132         }
<a name="l00133"></a>00133         CoordStruct SrcXYZ;
<a name="l00134"></a>00134         A-&gt;GetCoords(&amp;SrcXYZ);
<a name="l00135"></a>00135         LEA_STACK(CoordStruct *, XYZ, 0x20);
<a name="l00136"></a>00136         XYZ-&gt;X = (SrcXYZ.X &amp; ~0xFF) + 0x80;
<a name="l00137"></a>00137         XYZ-&gt;Y = (SrcXYZ.Y &amp; ~0xFF) + 0x80;
<a name="l00138"></a>00138         XYZ-&gt;Z = SrcXYZ.Z - 1;
<a name="l00139"></a>00139         R-&gt;ECX&lt;CoordStruct *&gt;(XYZ);
<a name="l00140"></a>00140         <span class="keywordflow">return</span> 0x415DE3;
<a name="l00141"></a>00141 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa0db1f91ecacb2c2aeb12e1df209f903"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="aa0db1f91ecacb2c2aeb12e1df209f903" args="(6F9E76, TechnoClass_Update_CheckOperators, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6F9E76&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_Update_CheckOperators&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>TechnoClass::Update is called every frame; returning 0 tells it to execute the original function's code as well. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00063"></a>00063 {
<a name="l00064"></a>00064         GET(TechnoClass *, pThis, ESI); <span class="comment">// object this is called on</span>
<a name="l00065"></a>00065         <span class="comment">//TechnoTypeClass *Type = pThis-&gt;GetTechnoType();</span>
<a name="l00066"></a>00066         <span class="comment">//TechnoTypeExt::ExtData *pTypeData = TechnoTypeExt::ExtMap.Find(Type);</span>
<a name="l00067"></a>00067         <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pTypeData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pThis-&gt;GetTechnoType());
<a name="l00068"></a>00068         <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(pThis);
<a name="l00069"></a>00069 
<a name="l00070"></a>00070         <span class="comment">// Related to operators/drivers, issue #342</span>
<a name="l00071"></a>00071         BuildingClass * pTheBuildingBelow = pThis-&gt;GetCell()-&gt;GetBuilding();
<a name="l00072"></a>00072 
<a name="l00073"></a>00073         <span class="comment">/* Conditions checked:</span>
<a name="l00074"></a>00074 <span class="comment">                - Is there no building below us</span>
<a name="l00075"></a>00075 <span class="comment">                OR</span>
<a name="l00076"></a>00076 <span class="comment">                - Is this the building on this cell AND is it online</span>
<a name="l00077"></a>00077 <span class="comment"></span>
<a name="l00078"></a>00078 <span class="comment">                pTheBuildingBelow will be NULL if no building was found</span>
<a name="l00079"></a>00079 <span class="comment">                This check ensures that Operator&#39;d units don&#39;t Deactivate above structures such as War Factories, Repair Depots or Battle Bunkers.</span>
<a name="l00080"></a>00080 <span class="comment">                (Which is potentially abusable, but let&#39;s hope no one figures that out.)</span>
<a name="l00081"></a>00081 <span class="comment">        */</span>
<a name="l00082"></a>00082         <span class="keywordflow">if</span>(!pTheBuildingBelow || ((pTheBuildingBelow == pThis) &amp;&amp; (pTheBuildingBelow-&gt;IsPowerOnline()))) {
<a name="l00083"></a>00083                 <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a1b88dd67b98261ab28662d7c4574dc5e">IsOperated</a>()) { <span class="comment">// either does have an operator or doesn&#39;t need one, so...</span>
<a name="l00084"></a>00084                         <span class="keywordflow">if</span>(pThis-&gt;Deactivated) { <span class="comment">// ...if it&#39;s currently off, turn it on! (oooh baby)</span>
<a name="l00085"></a>00085                                 pThis-&gt;Reactivate();
<a name="l00086"></a>00086                                 pThis-&gt;Owner-&gt;ShouldRecheckTechTree = <span class="keyword">true</span>; <span class="comment">// #885</span>
<a name="l00087"></a>00087                         }
<a name="l00088"></a>00088                 } <span class="keywordflow">else</span> { <span class="comment">// doesn&#39;t have an operator, so...</span>
<a name="l00089"></a>00089                         <span class="keywordflow">if</span>(!pThis-&gt;Deactivated) { <span class="comment">// ...if it&#39;s not off yet, turn it off!</span>
<a name="l00090"></a>00090                                 pThis-&gt;Deactivate();
<a name="l00091"></a>00091                                 pThis-&gt;Owner-&gt;ShouldRecheckTechTree = <span class="keyword">true</span>; <span class="comment">// #885</span>
<a name="l00092"></a>00092                         }
<a name="l00093"></a>00093                 }
<a name="l00094"></a>00094         }
<a name="l00095"></a>00095 
<a name="l00096"></a>00096         <span class="comment">// prevent disabled units from driving around.</span>
<a name="l00097"></a>00097         <span class="keywordflow">if</span>(pThis-&gt;Deactivated) {
<a name="l00098"></a>00098                 <span class="keywordflow">if</span>(UnitClass* pUnit = specific_cast&lt;UnitClass*&gt;(pThis)) {
<a name="l00099"></a>00099                         <span class="keywordflow">if</span>(pUnit-&gt;Locomotor-&gt;Is_Moving() &amp;&amp; pUnit-&gt;Destination) {
<a name="l00100"></a>00100                                 pUnit-&gt;SetDestination(NULL, <span class="keyword">true</span>);
<a name="l00101"></a>00101                                 pUnit-&gt;StopMoving();
<a name="l00102"></a>00102                         }
<a name="l00103"></a>00103                 }
<a name="l00104"></a>00104 
<a name="l00105"></a>00105                 <span class="comment">// dropping Radar Jammers (#305) here for now; should check if another TechnoClass::Update hook might be better ~Ren</span>
<a name="l00106"></a>00106                 <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a>) { <span class="comment">// RadarJam should only be non-null if the object is an active radar jammer</span>
<a name="l00107"></a>00107                         pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a>-&gt;<a class="code" href="class_jammer_class.html#a0f19799beebd05e67631d3bc6b8af84e" title="Unregisters this Jammer on all structures.">UnjamAll</a>();
<a name="l00108"></a>00108                 }
<a name="l00109"></a>00109         } <span class="keywordflow">else</span> {
<a name="l00110"></a>00110                 <span class="comment">// dropping Radar Jammers (#305) here for now; should check if another TechnoClass::Update hook might be better ~Ren</span>
<a name="l00111"></a>00111                 <span class="keywordflow">if</span>(!!pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a53b845b45ac6fcd8bef51266ae5751fd" title="Distance in cells to scan for &amp;amp; jam radars.">RadarJamRadius</a>) {
<a name="l00112"></a>00112                         <span class="keywordflow">if</span>(!pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a>) {
<a name="l00113"></a>00113                                 pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a> = <span class="keyword">new</span> <a class="code" href="class_jammer_class.html">JammerClass</a>(pThis, pData);
<a name="l00114"></a>00114                         }
<a name="l00115"></a>00115 
<a name="l00116"></a>00116                         pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a3b38af769cfd3b8eb28bc03e93c89645">RadarJam</a>-&gt;<a class="code" href="class_jammer_class.html#afd66d022f035fc202ce20ddc5d1cbadd" title="Updates this Jammer&amp;#39;s status on all eligible structures.">Update</a>();
<a name="l00117"></a>00117                 }
<a name="l00118"></a>00118         }
<a name="l00119"></a>00119 
<a name="l00120"></a>00120         <span class="comment">/*      using 0x6F9E7C instead makes this function override the original game one&#39;s entirely -</span>
<a name="l00121"></a>00121 <span class="comment">                don&#39;t activate that unless you handle _everything_ originally handled by the game */</span>
<a name="l00122"></a>00122         <span class="keywordflow">return</span> 0;
<a name="l00123"></a>00123 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3bf7463228e453cd6dfd9eed3f2144ff"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a3bf7463228e453cd6dfd9eed3f2144ff" args="(6F9E50, TechnoClass_Update, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6F9E50&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_Update&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00035"></a>00035 {
<a name="l00036"></a>00036         GET(TechnoClass *, Source, ECX);
<a name="l00037"></a>00037 
<a name="l00038"></a>00038         <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Source);
<a name="l00039"></a>00039 
<a name="l00040"></a>00040         <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a5baf75a5b306a062b88636f8ed8ca9a0">CloakSkipTimer</a>.IsDone()) {
<a name="l00041"></a>00041                 pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a5baf75a5b306a062b88636f8ed8ca9a0">CloakSkipTimer</a>.Stop();
<a name="l00042"></a>00042                 Source-&gt;Cloakable = Source-&gt;GetTechnoType()-&gt;Cloakable;
<a name="l00043"></a>00043         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a5baf75a5b306a062b88636f8ed8ca9a0">CloakSkipTimer</a>.GetTimeLeft() &gt; 0) {
<a name="l00044"></a>00044                 Source-&gt;Cloakable = 0;
<a name="l00045"></a>00045         }
<a name="l00046"></a>00046 
<a name="l00047"></a>00047         <span class="comment">// #1208</span>
<a name="l00048"></a>00048         <span class="keywordflow">if</span>(<a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pTypeData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.Find(Source-&gt;GetTechnoType())) {
<a name="l00049"></a>00049                 <span class="keywordflow">if</span>(pTypeData-&gt;PassengerTurret) {
<a name="l00050"></a>00050                         <span class="comment">// 18 = 1 8 = A H = Adolf Hitler. Clearly we can&#39;t allow it to come to that.</span>
<a name="l00051"></a>00051                         <span class="keywordtype">int</span> passengerNumber = (Source-&gt;Passengers.NumPassengers &lt;= 17) ? Source-&gt;Passengers.NumPassengers : 17;
<a name="l00052"></a>00052                         <span class="keywordtype">int</span> maxTurret = Source-&gt;GetTechnoType()-&gt;TurretCount - 1;
<a name="l00053"></a>00053                         Source-&gt;CurrentTurretNumber = (passengerNumber &lt;= maxTurret) ? passengerNumber : maxTurret;
<a name="l00054"></a>00054                 }
<a name="l00055"></a>00055         }
<a name="l00056"></a>00056 
<a name="l00057"></a>00057         <span class="keywordflow">return</span> 0;
<a name="l00058"></a>00058 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a70a006bd12a9751219642fe7aa112f0d"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="a70a006bd12a9751219642fe7aa112f0d" args="(41668B, AircraftClass_ReceiveDamage, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">41668B&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AircraftClass_ReceiveDamage&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00024"></a>00024 {
<a name="l00025"></a>00025         GET(AircraftClass *, a, ESI);
<a name="l00026"></a>00026 
<a name="l00027"></a>00027         GET_STACK(TechnoClass *, Killer, 0x28);
<a name="l00028"></a>00028         <span class="keywordtype">bool</span> select = a-&gt;IsSelected &amp;&amp; a-&gt;Owner-&gt;ControlledByPlayer();
<a name="l00029"></a>00029         <a class="code" href="class_techno_ext.html#ad34ee729a8d65cc603a7ca7dc9796a26">TechnoExt::SpawnSurvivors</a>(a, Killer, select);
<a name="l00030"></a>00030 
<a name="l00031"></a>00031         <span class="keywordflow">return</span> 0;
<a name="l00032"></a>00032 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa48e9ef641fcbcbe9cc051f5ca3d07f7"></a><!-- doxytag: member="Hooks.cpp::DEFINE_HOOK" ref="aa48e9ef641fcbcbe9cc051f5ca3d07f7" args="(7381AE, UnitClass_ReceiveDamage, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">7381AE&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UnitClass_ReceiveDamage&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00012"></a>00012 {
<a name="l00013"></a>00013         GET(TechnoClass *, t, ESI);
<a name="l00014"></a>00014         GET_STACK(TechnoClass *, Killer, 0x54);
<a name="l00015"></a>00015         GET_STACK(<span class="keywordtype">bool</span>, select, 0x13);
<a name="l00016"></a>00016 
<a name="l00017"></a>00017         <a class="code" href="class_techno_ext.html#ad34ee729a8d65cc603a7ca7dc9796a26">TechnoExt::SpawnSurvivors</a>(t, Killer, select);
<a name="l00018"></a>00018 
<a name="l00019"></a>00019         <span class="keywordflow">return</span> 0x73838A;
<a name="l00020"></a>00020 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7706437ae83f93b9655a4d741ef73b1f"></a><!-- doxytag: member="Hooks.cpp::EXPORT_FUNC" ref="a7706437ae83f93b9655a4d741ef73b1f" args="(InfantryClass_UpdateDeploy2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_FUNC </td>
          <td>(</td>
          <td class="paramtype">InfantryClass_UpdateDeploy2&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00481"></a>00481 {
<a name="l00482"></a>00482 <span class="comment">/*</span>
<a name="l00483"></a>00483 <span class="comment">        GET(TechnoClass *, I, ESI);</span>
<a name="l00484"></a>00484 <span class="comment">        TechnoTypeClassExt::TechnoTypeClassData *pData = TechnoTypeClassExt::Ext_p[I-&gt;GetTechnoType()];</span>
<a name="l00485"></a>00485 <span class="comment">        return pData-&gt;Is_Deso_Radiation ? 0x52139A : 0x5214B9;</span>
<a name="l00486"></a>00486 <span class="comment">        WRONG: needs more code to reimplement weapon shooting without rad checks</span>
<a name="l00487"></a>00487 <span class="comment">*/</span>
<a name="l00488"></a>00488         <span class="keywordflow">return</span> 0;
<a name="l00489"></a>00489 }
</pre></div></p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Tue Dec 14 21:10:39 2010 for Ares by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
