<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ares: Ext/Techno/Hooks.Spotlights.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_4f38a043d9972e86e8aa3f2d4f00b04c.html">Ext</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_e86fc2c1857956d0e689de71fa3de8f4.html">Techno</a>
  </div>
</div>
<div class="contents">
<h1>Hooks.Spotlights.cpp File Reference</h1><code>#include &quot;<a class="el" href="_weapon_type_2_body_8h.html">Body.h</a>&quot;</code><br/>
<code>#include &quot;../TechnoType/Body.h&quot;</code><br/>
<code>#include &lt;YRMath.h&gt;</code><br/>
<code>#include &lt;HouseClass.h&gt;</code><br/>
<code>#include &lt;TacticalClass.h&gt;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#adc9e110d098e609a84c6747975bd562a">DEFINE_HOOK</a> (420F40, Spotlights_UpdateFoo, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#aca00ef54a1eec60787539c7cbf59b7d0">DEFINE_HOOK</a> (5F5155, ObjectClass_Put, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#a57f6bd664b63654c94d44ca9a294d013">DEFINE_HOOK</a> (6F6D0E, TechnoClass_Put_1, 7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#a59178861a1181445b90d4122d15026a4">DEFINE_HOOK</a> (6F6F20, TechnoClass_Put_2, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#a786b14d4245e1c92b966618c3f6dacf0">DEFINE_HOOK</a> (441163, BuildingClass_Put_DontSpawnSpotlight, 0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#ac2c746577cfb5551208a7ab4e3ad00ae">DEFINE_HOOK</a> (435820, BuildingLightClass_CTOR, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#acee0e54ffd99cfd8fca5613205311899">DEFINE_HOOK</a> (4370C0, BuildingLightClass_SDDTOR, A)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#a37e3fcb114524c08d8aedf7953aa00aa">DEFINE_HOOK</a> (6F4500, TechnoClass_DTOR_Spotlight, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#ad792593d297896ccb7837e0c411dcb54">DEFINE_HOOK</a> (70FBE3, TechnoClass_Activate, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#a33ee5d75e53636fbd7104a494d32ab0c">DEFINE_HOOK</a> (70FC97, TechnoClass_Deactivate, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#afe6c3e2234115e5d7f57b735e33cac54">DEFINE_HOOK</a> (435C08, BuildingLightClass_Draw_ForceType, 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#a020c104abd2f3518b91ef69f54e6814b">DEFINE_HOOK</a> (435C32, BuildingLightClass_Draw_PowerOnline, A)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#a814d55510d912ec2914e87a28966037f">DEFINE_HOOK</a> (436459, BuildingLightClass_Update, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#ac9d1f7d005d34605c4ca0ae77c70fab5">DEFINE_HOOK</a> (435BE0, BuildingLightClass_Draw_Start, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#af0487588f7136b7d1f3b821d152c13e4">DEFINE_HOOK</a> (436072, BuildingLightClass_Draw_430, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#a147813fc7a264d02edbcf63789e296a4">DEFINE_HOOK</a> (4360D8, BuildingLightClass_Draw_400, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#a1093457ddbbd77570aaa261cd3154e4f">DEFINE_HOOK</a> (4360FF, BuildingLightClass_Draw_250, 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_hooks_8_spotlights_8cpp.html#a92725dd5472ca12e5e6037ae9d9faeda">DEFINE_HOOK</a> (435CD3, SpotlightClass_CTOR, 6)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a92725dd5472ca12e5e6037ae9d9faeda"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="a92725dd5472ca12e5e6037ae9d9faeda" args="(435CD3, SpotlightClass_CTOR, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">435CD3&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SpotlightClass_CTOR&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00244"></a>00244 {
<a name="l00245"></a>00245         GET_STACK(SpotlightClass *, Spot, 0x14);
<a name="l00246"></a>00246         GET(BuildingLightClass *, BL, ESI);
<a name="l00247"></a>00247 
<a name="l00248"></a>00248         TechnoClass *Owner = BL-&gt;OwnerObject;
<a name="l00249"></a>00249         <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pTypeData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Owner-&gt;GetTechnoType());
<a name="l00250"></a>00250 
<a name="l00251"></a>00251         eSpotlightFlags Flags = 0;
<a name="l00252"></a>00252         <span class="keywordflow">if</span>(pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#ad7cff96aa9aa951fe3f7c038986f51a2">Spot_Reverse</a>) {
<a name="l00253"></a>00253                 Flags |= sf_NoColor;
<a name="l00254"></a>00254         }
<a name="l00255"></a>00255         <span class="keywordflow">if</span>(pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#ad3065f6719790a622e424e2fd8809fa3">Spot_DisableR</a>) {
<a name="l00256"></a>00256                 Flags |= sf_NoRed;
<a name="l00257"></a>00257         }
<a name="l00258"></a>00258         <span class="keywordflow">if</span>(pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#aacc5e95d36b0b5c9f76365d4d0efdef7">Spot_DisableG</a>) {
<a name="l00259"></a>00259                 Flags |= sf_NoGreen;
<a name="l00260"></a>00260         }
<a name="l00261"></a>00261         <span class="keywordflow">if</span>(pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a94be8ed6ba52df16e7d32496cbc38a38">Spot_DisableB</a>) {
<a name="l00262"></a>00262                 Flags |= sf_NoBlue;
<a name="l00263"></a>00263         }
<a name="l00264"></a>00264 
<a name="l00265"></a>00265         Spot-&gt;DisableFlags = Flags;
<a name="l00266"></a>00266 
<a name="l00267"></a>00267         <span class="keywordflow">return</span> 0;
<a name="l00268"></a>00268 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1093457ddbbd77570aaa261cd3154e4f"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="a1093457ddbbd77570aaa261cd3154e4f" args="(4360FF, BuildingLightClass_Draw_250, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">4360FF&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingLightClass_Draw_250&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00235"></a>00235 {
<a name="l00236"></a>00236         TechnoClass *Owner = <a class="code" href="class_techno_ext.html#af257e89b8b2cb018402f9a6b1c25956f">TechnoExt::ActiveBuildingLight</a>-&gt;OwnerObject;
<a name="l00237"></a>00237         <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pTypeData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Owner-&gt;GetTechnoType());
<a name="l00238"></a>00238         R-&gt;ECX(pTypeData ? pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#aaea42814f0ea527e83541e805422e709">Spot_Height</a> : 250);
<a name="l00239"></a>00239         <a class="code" href="class_techno_ext.html#af257e89b8b2cb018402f9a6b1c25956f">TechnoExt::ActiveBuildingLight</a> = NULL;
<a name="l00240"></a>00240         <span class="keywordflow">return</span> 0x436105;
<a name="l00241"></a>00241 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a147813fc7a264d02edbcf63789e296a4"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="a147813fc7a264d02edbcf63789e296a4" args="(4360D8, BuildingLightClass_Draw_400, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">4360D8&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingLightClass_Draw_400&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00227"></a>00227 {
<a name="l00228"></a>00228         TechnoClass *Owner = <a class="code" href="class_techno_ext.html#af257e89b8b2cb018402f9a6b1c25956f">TechnoExt::ActiveBuildingLight</a>-&gt;OwnerObject;
<a name="l00229"></a>00229         <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pTypeData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Owner-&gt;GetTechnoType());
<a name="l00230"></a>00230         R-&gt;ECX((pTypeData ? pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#aaea42814f0ea527e83541e805422e709">Spot_Height</a> : 250) + 150);
<a name="l00231"></a>00231         <span class="keywordflow">return</span> 0x4360DE;
<a name="l00232"></a>00232 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af0487588f7136b7d1f3b821d152c13e4"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="af0487588f7136b7d1f3b821d152c13e4" args="(436072, BuildingLightClass_Draw_430, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">436072&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingLightClass_Draw_430&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00219"></a>00219 {
<a name="l00220"></a>00220         TechnoClass *Owner = <a class="code" href="class_techno_ext.html#af257e89b8b2cb018402f9a6b1c25956f">TechnoExt::ActiveBuildingLight</a>-&gt;OwnerObject;
<a name="l00221"></a>00221         <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pTypeData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Owner-&gt;GetTechnoType());
<a name="l00222"></a>00222         R-&gt;EAX((pTypeData ? pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#aaea42814f0ea527e83541e805422e709">Spot_Height</a> : 250) + 180);
<a name="l00223"></a>00223         <span class="keywordflow">return</span> 0x436078;
<a name="l00224"></a>00224 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac9d1f7d005d34605c4ca0ae77c70fab5"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="ac9d1f7d005d34605c4ca0ae77c70fab5" args="(435BE0, BuildingLightClass_Draw_Start, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">435BE0&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingLightClass_Draw_Start&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00212"></a>00212 {
<a name="l00213"></a>00213         GET(BuildingLightClass *, BL, ECX);
<a name="l00214"></a>00214         <a class="code" href="class_techno_ext.html#af257e89b8b2cb018402f9a6b1c25956f">TechnoExt::ActiveBuildingLight</a> = BL;
<a name="l00215"></a>00215         <span class="keywordflow">return</span> 0;
<a name="l00216"></a>00216 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a814d55510d912ec2914e87a28966037f"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="a814d55510d912ec2914e87a28966037f" args="(436459, BuildingLightClass_Update, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">436459&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingLightClass_Update&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00172"></a>00172 {
<a name="l00173"></a>00173         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> Facing2Rad = (2 * 3.14) / 0xFFFF;
<a name="l00174"></a>00174         GET(BuildingLightClass *, BL, EDI);
<a name="l00175"></a>00175         TechnoClass *Owner = BL-&gt;OwnerObject;
<a name="l00176"></a>00176         <span class="keywordflow">if</span>(Owner &amp;&amp; Owner-&gt;WhatAmI() != abs_Building) {
<a name="l00177"></a>00177                 <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pTypeData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Owner-&gt;GetTechnoType());
<a name="l00178"></a>00178                 CoordStruct Loc = Owner-&gt;Location;
<a name="l00179"></a>00179                 DWORD Facing;
<a name="l00180"></a>00180                 <span class="keywordflow">switch</span>(pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#adc96146a71014c03f4c509f7e538bd6f">Spot_AttachedTo</a>) {
<a name="l00181"></a>00181                         <span class="keywordflow">case</span> <a class="code" href="class_techno_type_ext.html#aa72efc1aeaf8cdf1b63b8603633c6b7ba99ccd74ccaced0f4964b2d4bde0816a7">TechnoTypeExt::sa_Barrel</a>:
<a name="l00182"></a>00182                                 Owner-&gt;BarrelFacing.GetFacing(&amp;Facing);
<a name="l00183"></a>00183                                 <span class="keywordflow">break</span>;
<a name="l00184"></a>00184                         <span class="keywordflow">case</span> <a class="code" href="class_techno_type_ext.html#aa72efc1aeaf8cdf1b63b8603633c6b7bacc34cd209de58c0b830cd4f914b64257">TechnoTypeExt::sa_Turret</a>:
<a name="l00185"></a>00185                                 Owner-&gt;TurretFacing.GetFacing(&amp;Facing);
<a name="l00186"></a>00186                                 <span class="keywordflow">break</span>;
<a name="l00187"></a>00187                         <span class="keywordflow">default</span>:
<a name="l00188"></a>00188                                 Owner-&gt;Facing.GetFacing(&amp;Facing);
<a name="l00189"></a>00189                 }
<a name="l00190"></a>00190                 WORD F = (WORD)Facing;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192                 <span class="keywordtype">double</span> Angle = Facing2Rad * F;
<a name="l00193"></a>00193                 Loc.Y -= pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a3778880080c3b634ae6127366d0ea50b">Spot_Distance</a> * Math::cos(Angle);
<a name="l00194"></a>00194                 Loc.X += pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a3778880080c3b634ae6127366d0ea50b">Spot_Distance</a> * Math::sin(Angle);
<a name="l00195"></a>00195 
<a name="l00196"></a>00196                 BL-&gt;field_B8 = Loc;
<a name="l00197"></a>00197                 BL-&gt;field_C4 = Loc;
<a name="l00198"></a>00198 <span class="comment">//              double zer0 = 0.0;</span>
<a name="l00199"></a>00199                 __asm { fldz }
<a name="l00200"></a>00200         } <span class="keywordflow">else</span> {
<a name="l00201"></a>00201                 <span class="keywordtype">double</span> Angle = RulesClass::Instance-&gt;SpotlightAngle;
<a name="l00202"></a>00202                 __asm { fld Angle }
<a name="l00203"></a>00203         }
<a name="l00204"></a>00204 
<a name="l00205"></a>00205         <span class="keywordflow">return</span> R-&gt;AL()
<a name="l00206"></a>00206                 ? 0x436461
<a name="l00207"></a>00207                 : 0x4364C8
<a name="l00208"></a>00208         ;
<a name="l00209"></a>00209 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a020c104abd2f3518b91ef69f54e6814b"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="a020c104abd2f3518b91ef69f54e6814b" args="(435C32, BuildingLightClass_Draw_PowerOnline, A)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">435C32&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingLightClass_Draw_PowerOnline&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">A&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00163"></a>00163 {
<a name="l00164"></a>00164         GET(TechnoClass *, T, EDI);
<a name="l00165"></a>00165         <span class="keywordflow">return</span> (T-&gt;WhatAmI() != abs_Building || (T-&gt;IsPowerOnline() &amp;&amp; !<span class="keyword">reinterpret_cast&lt;</span>BuildingClass *<span class="keyword">&gt;</span>(T)-&gt;IsFogged))
<a name="l00166"></a>00166                 ? 0x435C52
<a name="l00167"></a>00167                 : 0x4361BC
<a name="l00168"></a>00168         ;
<a name="l00169"></a>00169 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afe6c3e2234115e5d7f57b735e33cac54"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="afe6c3e2234115e5d7f57b735e33cac54" args="(435C08, BuildingLightClass_Draw_ForceType, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">435C08&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingLightClass_Draw_ForceType&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00158"></a>00158 {
<a name="l00159"></a>00159         <span class="keywordflow">return</span> 0x435C16;
<a name="l00160"></a>00160 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a33ee5d75e53636fbd7104a494d32ab0c"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="a33ee5d75e53636fbd7104a494d32ab0c" args="(70FC97, TechnoClass_Deactivate, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">70FC97&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_Deactivate&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00143"></a>00143 {
<a name="l00144"></a>00144         GET(TechnoClass *, T, ESI);
<a name="l00145"></a>00145         <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pTypeData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(T-&gt;GetTechnoType());
<a name="l00146"></a>00146 
<a name="l00147"></a>00147         <span class="keywordflow">if</span>(pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a09c96b455b2291c78114c60323eb7091">Is_Spotlighted</a>) {
<a name="l00148"></a>00148                 hash_SpotlightExt::iterator i = <a class="code" href="class_techno_ext.html#abf2c9a99af7a9fe3034bf6bec585f4f9">TechnoExt::SpotlightExt</a>.find(T);
<a name="l00149"></a>00149                 <span class="keywordflow">if</span>(i != <a class="code" href="class_techno_ext.html#abf2c9a99af7a9fe3034bf6bec585f4f9">TechnoExt::SpotlightExt</a>.end()) {
<a name="l00150"></a>00150 <span class="comment">//                      TechnoExt::SpotlightExt.erase(i);</span>
<a name="l00151"></a>00151                         GAME_DEALLOC(i-&gt;second);
<a name="l00152"></a>00152                 }
<a name="l00153"></a>00153         }
<a name="l00154"></a>00154         <span class="keywordflow">return</span> 0;
<a name="l00155"></a>00155 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad792593d297896ccb7837e0c411dcb54"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="ad792593d297896ccb7837e0c411dcb54" args="(70FBE3, TechnoClass_Activate, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">70FBE3&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_Activate&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00107"></a>00107 {
<a name="l00108"></a>00108         GET(TechnoClass *, T, ECX);
<a name="l00109"></a>00109         <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pTypeData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(T-&gt;GetTechnoType());
<a name="l00110"></a>00110         <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(T);
<a name="l00111"></a>00111 
<a name="l00112"></a>00112         <span class="comment">/* Check abort conditions:</span>
<a name="l00113"></a>00113 <span class="comment">                - Is the object currently EMP&#39;d?</span>
<a name="l00114"></a>00114 <span class="comment">                - Does the object need an operator, but doesn&#39;t have one?</span>
<a name="l00115"></a>00115 <span class="comment">                - Does the object need a powering structure that is offline?</span>
<a name="l00116"></a>00116 <span class="comment">           If any of the above conditions, bail out and don&#39;t activate the object.</span>
<a name="l00117"></a>00117 <span class="comment">        */</span>
<a name="l00118"></a>00118         <span class="keywordflow">if</span>(T-&gt;IsUnderEMP() || !pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#af67664c98137d949a09602a01f44f0c8">IsPowered</a>() || !pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a1b88dd67b98261ab28662d7c4574dc5e">IsOperated</a>()) {
<a name="l00119"></a>00119                 <span class="keywordflow">return</span> 0x70FC82;
<a name="l00120"></a>00120         }
<a name="l00121"></a>00121 
<a name="l00122"></a>00122         <span class="keywordflow">if</span>(pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a09c96b455b2291c78114c60323eb7091">Is_Spotlighted</a>) {
<a name="l00123"></a>00123                 hash_SpotlightExt::iterator i = <a class="code" href="class_techno_ext.html#abf2c9a99af7a9fe3034bf6bec585f4f9">TechnoExt::SpotlightExt</a>.find(T);
<a name="l00124"></a>00124                 <span class="keywordflow">if</span>(i != <a class="code" href="class_techno_ext.html#abf2c9a99af7a9fe3034bf6bec585f4f9">TechnoExt::SpotlightExt</a>.end()) {
<a name="l00125"></a>00125                         <a class="code" href="class_techno_ext.html#abf2c9a99af7a9fe3034bf6bec585f4f9">TechnoExt::SpotlightExt</a>.erase(i);
<a name="l00126"></a>00126                         GAME_DEALLOC(i-&gt;second);
<a name="l00127"></a>00127                 }
<a name="l00128"></a>00128                 ++Unsorted::IKnowWhatImDoing;
<a name="l00129"></a>00129                 BuildingLightClass *placeholder;
<a name="l00130"></a>00130                 GAME_ALLOC(BuildingLightClass, placeholder, T);
<a name="l00131"></a>00131                 <span class="keywordflow">if</span>(BuildingClass * B = specific_cast&lt;BuildingClass *&gt;(T)) {
<a name="l00132"></a>00132                         <span class="keywordflow">if</span>(B-&gt;Spotlight) {
<a name="l00133"></a>00133                                 <span class="keyword">delete</span> B-&gt;Spotlight;
<a name="l00134"></a>00134                         }
<a name="l00135"></a>00135                         B-&gt;Spotlight = placeholder;
<a name="l00136"></a>00136                 }
<a name="l00137"></a>00137                 --Unsorted::IKnowWhatImDoing;
<a name="l00138"></a>00138         }
<a name="l00139"></a>00139         <span class="keywordflow">return</span> 0;
<a name="l00140"></a>00140 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a37e3fcb114524c08d8aedf7953aa00aa"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="a37e3fcb114524c08d8aedf7953aa00aa" args="(6F4500, TechnoClass_DTOR_Spotlight, 5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6F4500&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_DTOR_Spotlight&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00096"></a>00096 {
<a name="l00097"></a>00097         GET(TechnoClass*, pItem, ECX);
<a name="l00098"></a>00098         hash_SpotlightExt::iterator i = <a class="code" href="class_techno_ext.html#abf2c9a99af7a9fe3034bf6bec585f4f9">TechnoExt::SpotlightExt</a>.find(pItem);
<a name="l00099"></a>00099         <span class="keywordflow">if</span>(i != <a class="code" href="class_techno_ext.html#abf2c9a99af7a9fe3034bf6bec585f4f9">TechnoExt::SpotlightExt</a>.end()) {
<a name="l00100"></a>00100                 GAME_DEALLOC(i-&gt;second);
<a name="l00101"></a>00101                 <a class="code" href="class_techno_ext.html#abf2c9a99af7a9fe3034bf6bec585f4f9">TechnoExt::SpotlightExt</a>.erase(i);
<a name="l00102"></a>00102         }
<a name="l00103"></a>00103         <span class="keywordflow">return</span> 0;
<a name="l00104"></a>00104 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acee0e54ffd99cfd8fca5613205311899"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="acee0e54ffd99cfd8fca5613205311899" args="(4370C0, BuildingLightClass_SDDTOR, A)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">4370C0&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingLightClass_SDDTOR&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">A&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00084"></a>00084 {
<a name="l00085"></a>00085         GET(BuildingLightClass *, BL, ECX);
<a name="l00086"></a>00086 
<a name="l00087"></a>00087         TechnoClass *T = BL-&gt;OwnerObject;
<a name="l00088"></a>00088         hash_SpotlightExt::iterator i = <a class="code" href="class_techno_ext.html#abf2c9a99af7a9fe3034bf6bec585f4f9">TechnoExt::SpotlightExt</a>.find(T);
<a name="l00089"></a>00089         <span class="keywordflow">if</span>(i != <a class="code" href="class_techno_ext.html#abf2c9a99af7a9fe3034bf6bec585f4f9">TechnoExt::SpotlightExt</a>.end()) {
<a name="l00090"></a>00090                 <a class="code" href="class_techno_ext.html#abf2c9a99af7a9fe3034bf6bec585f4f9">TechnoExt::SpotlightExt</a>.erase(i);
<a name="l00091"></a>00091         }
<a name="l00092"></a>00092         <span class="keywordflow">return</span> 0;
<a name="l00093"></a>00093 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac2c746577cfb5551208a7ab4e3ad00ae"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="ac2c746577cfb5551208a7ab4e3ad00ae" args="(435820, BuildingLightClass_CTOR, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">435820&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingLightClass_CTOR&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00071"></a>00071 {
<a name="l00072"></a>00072         GET_STACK(TechnoClass *, T, 0x4);
<a name="l00073"></a>00073         GET(BuildingLightClass *, BL, ECX);
<a name="l00074"></a>00074 
<a name="l00075"></a>00075         hash_SpotlightExt::iterator i = <a class="code" href="class_techno_ext.html#abf2c9a99af7a9fe3034bf6bec585f4f9">TechnoExt::SpotlightExt</a>.find(T);
<a name="l00076"></a>00076         <span class="keywordflow">if</span>(i != <a class="code" href="class_techno_ext.html#abf2c9a99af7a9fe3034bf6bec585f4f9">TechnoExt::SpotlightExt</a>.end()) {
<a name="l00077"></a>00077                 <a class="code" href="class_techno_ext.html#abf2c9a99af7a9fe3034bf6bec585f4f9">TechnoExt::SpotlightExt</a>.erase(i);
<a name="l00078"></a>00078         }
<a name="l00079"></a>00079         <a class="code" href="class_techno_ext.html#abf2c9a99af7a9fe3034bf6bec585f4f9">TechnoExt::SpotlightExt</a>[T] = BL;
<a name="l00080"></a>00080         <span class="keywordflow">return</span> 0;
<a name="l00081"></a>00081 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a786b14d4245e1c92b966618c3f6dacf0"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="a786b14d4245e1c92b966618c3f6dacf0" args="(441163, BuildingClass_Put_DontSpawnSpotlight, 0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">441163&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BuildingClass_Put_DontSpawnSpotlight&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00066"></a>00066 {
<a name="l00067"></a>00067         <span class="keywordflow">return</span> 0x441196;
<a name="l00068"></a>00068 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a59178861a1181445b90d4122d15026a4"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="a59178861a1181445b90d4122d15026a4" args="(6F6F20, TechnoClass_Put_2, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6F6F20&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_Put_2&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00047"></a>00047 {
<a name="l00048"></a>00048         GET(TechnoClass *, T, ESI);
<a name="l00049"></a>00049         <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pTypeData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(T-&gt;GetTechnoType());
<a name="l00050"></a>00050 
<a name="l00051"></a>00051         <span class="keywordflow">if</span>(pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a09c96b455b2291c78114c60323eb7091">Is_Spotlighted</a>) {
<a name="l00052"></a>00052                 BuildingLightClass *placeholder;
<a name="l00053"></a>00053                 GAME_ALLOC(BuildingLightClass, placeholder, T);
<a name="l00054"></a>00054                 <span class="keywordflow">if</span>(BuildingClass * B = specific_cast&lt;BuildingClass *&gt;(T)) {
<a name="l00055"></a>00055                         <span class="keywordflow">if</span>(B-&gt;Spotlight) {
<a name="l00056"></a>00056                                 <span class="keyword">delete</span> B-&gt;Spotlight;
<a name="l00057"></a>00057                         }
<a name="l00058"></a>00058                         B-&gt;Spotlight = placeholder;
<a name="l00059"></a>00059                 }
<a name="l00060"></a>00060         }
<a name="l00061"></a>00061 
<a name="l00062"></a>00062         <span class="keywordflow">return</span> 0;
<a name="l00063"></a>00063 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a57f6bd664b63654c94d44ca9a294d013"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="a57f6bd664b63654c94d44ca9a294d013" args="(6F6D0E, TechnoClass_Put_1, 7)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">6F6D0E&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass_Put_1&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">7&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00028"></a>00028 {
<a name="l00029"></a>00029         GET(TechnoClass *, T, ESI);
<a name="l00030"></a>00030         <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pTypeData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(T-&gt;GetTechnoType());
<a name="l00031"></a>00031 
<a name="l00032"></a>00032         <span class="keywordflow">if</span>(pTypeData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a09c96b455b2291c78114c60323eb7091">Is_Spotlighted</a>) {
<a name="l00033"></a>00033                 BuildingLightClass *placeholder;
<a name="l00034"></a>00034                 GAME_ALLOC(BuildingLightClass, placeholder, T);
<a name="l00035"></a>00035                 <span class="keywordflow">if</span>(BuildingClass * B = specific_cast&lt;BuildingClass *&gt;(T)) {
<a name="l00036"></a>00036                         <span class="keywordflow">if</span>(B-&gt;Spotlight) {
<a name="l00037"></a>00037                                 <span class="keyword">delete</span> B-&gt;Spotlight;
<a name="l00038"></a>00038                         }
<a name="l00039"></a>00039                         B-&gt;Spotlight = placeholder;
<a name="l00040"></a>00040                 }
<a name="l00041"></a>00041         }
<a name="l00042"></a>00042 
<a name="l00043"></a>00043         <span class="keywordflow">return</span> 0;
<a name="l00044"></a>00044 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aca00ef54a1eec60787539c7cbf59b7d0"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="aca00ef54a1eec60787539c7cbf59b7d0" args="(5F5155, ObjectClass_Put, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">5F5155&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ObjectClass_Put&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00021"></a>00021 {
<a name="l00022"></a>00022         <span class="keywordflow">return</span> R-&gt;EAX()
<a name="l00023"></a>00023                 ? 0
<a name="l00024"></a>00024                 : 0x5F5210;
<a name="l00025"></a>00025 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="adc9e110d098e609a84c6747975bd562a"></a><!-- doxytag: member="Hooks.Spotlights.cpp::DEFINE_HOOK" ref="adc9e110d098e609a84c6747975bd562a" args="(420F40, Spotlights_UpdateFoo, 6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_HOOK </td>
          <td>(</td>
          <td class="paramtype">420F40&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Spotlights_UpdateFoo&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">6&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00013"></a>00013 {
<a name="l00014"></a>00014         <span class="keywordflow">return</span> Game::CurrentFrameRate &gt;= Game::GetMinFrameRate()
<a name="l00015"></a>00015                 ? 0
<a name="l00016"></a>00016                 : 0x421346;
<a name="l00017"></a>00017 }
</pre></div></p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Tue Dec 14 21:10:39 2010 for Ares by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
