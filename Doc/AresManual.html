<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Ares 0.1 Manual</title>
	<script type="text/javascript" src="./jquery-1.4.2.min.js"></script>
	<link rel="stylesheet" type="text/css" href="./AresManualStyle.css">
	<!--[if lt IE 9]>
		<style type="text/css">
			#wrapper IMG#flowchart_png {
				display: block;
			}
			#flowchart_svg {
				display: none;
			}
		</style>
	<![endif]-->
</head>
<body>
<!--
	Documentation documentation:
	We're abusing two HTML elements to auto-generate the manual's lists:
	
	<var class="file section type default">TagName=</var>
	Example: <var class="rules SuperWeapon integer xxxnum5">Cursor.Interval=</var>
	This would generate the entry for Cursor.Interval= in section [SuperWeapon] of type integer with default 6, under the rulesmd.ini flags in Appendix A - New Flags/Sections.
	We're parsing three special values: xxxnum, xxxperc and R_G_B; this is necessary because CSS classes can't start with numbers, and commas are CSS operators
		xxxnum just vanishes
		xxxperc appends a percentage sign to the number
		R_G_B is turned into R,G,B
		Center_Middle is turned into Center,Middle
		foo____bar is turned into [foo]>bar (those are four underscores)
	If you need spaces, use underscores instead (e.g. list_of_InfantryTypes); there is a special exception for SpyPlane_Approach. Try not to be verbose, and not to use special characters.
	
	<dfn class="kind of change/addition">Description</dfn>
	Example: <dfn class="bugfix">Prism support modifier fixed for game modes/maps.</dfn>
	This would generate a feature explanation listing for Prism support modifiers in the bugfix section of Appendix B â€“ Ares Feature Summary.
	We're accepting:
		bugfix -> this is a bugfix
		restored -> this was restored from Tiberian Sun
		new -> this is a new feature, added by Ares
	The explanations are sorted into the the respective lists in Appendix B.
	In addition, the value "inset" can be added, to bump the explanation into a "sub-list" generated by adding 2em margin to the left. 
-->
<div id="wrapper">
	<a href="#top" id="toplink">return to top &uarr;</a>
	<noscript><p class="red">The Ares manual uses JavaScript for extended functionality such as TOC generation. How about you join the 21st century and enable JS?</p></noscript>
	<img src="./manual_images/ares_manual_header.png" alt="Ares logo" style="border: none;">
	<a name="top"></a>
	<h1><span class="gamename">Ares</span> Documentation</h1>
	<h2>Table of Contents</h2>
	<div id="ares_version_selector">Show <span class="gamename">Ares</span> 0.2 documentation <input type="checkbox" id="show_02" value="true"> </div><p>Due to the length of the TOC, it is hidden by default. <a href="#toc" id="toctoggle">Click here</a> to expand it.</p>
	<ul id="toc" class="nobullets"><li class="pseudo"></li></ul>
	
	<h2>Introduction</h2>
	<p><span class="gamename">Ares</span> is the new tool to extend the capabilities of <span class="gamename">Yuri's Revenge</span>. It was conceived by pd near the end of 2007, and is currently in an early development and testing cycle.</p>
	<p>This documentation is aimed primarily at <span class="gamename">Ares</span> testers, as <span class="gamename">Ares</span> is a work in progress and subject to many further changes. However, the documentation is also aimed at mod authors wishing to make use of the new functionality that <span class="gamename">Ares</span> offers.</p>
	<p><span class="gamename">Ares</span> is incorporated into <span class="gamename">Yuri's Revenge</span> via the use of <span class="gamename">Syringe</span>, a program developed by pd to 'inject' DLL code into a running executable without modifying the executable itself. In this case, the <span class="gamename">Ares</span> DLL is injected into the <span class="gamename">Yuri's Revenge 1.001</span> main executable, <span class="filename">gamemd.exe</span>.</p>
	<p><span class="gamename">Syringe</span> can be run directly via a command line prompt, or automatically using <span class="gamename">Launch Base</span>. See the respective documentations of those programs for further details.</p>
	<div style="clear:both;"> </div>

	<h3>Compatibility Notes</h3>
	<h4><span class="gamename">RockPatch/NPatch</span></h4>
	<p><span class="gamename">Ares</span> is not intended to be used in conjunction with any third party patch that modifies the executable of the game. This is due to fairly obvious technical reasons that were best summarized by Renegade: [paraphrase] <q cite="Renegade">You can't use the USA maps on your GPS to navigate through Russia.</q><br>
	...because sooner or later you will drive down a road that doesn't exist, and off a cliff.</p>

	<h4>Save Games</h4>
	<p>For the same reasons, <span class="gamename">Ares</span> does not support loading save games or scripted IPB videos that were created with any other version of the game than the very same version of <span class="gamename">Ares</span> (not even the original <span class="gamename">Yuri's Revenge</span> save games are supported).<br>
	<span class="note">NB: Unfortunately, for the moment, save games are not functional at all in <span class="gamename">Ares</span>. This is a known problem that will be fixed in the future - <span class="gamename">Ares</span> will eventually be able to load games that were saved using [the exact same version of] <span class="gamename">Ares</span>.</span></p>

	<h3>Known Major Issues</h3>
	<ul>
		<li>Save games are broken. This will be fixed in the future. (<a href="http://bugs.renegadeprojects.com/view.php?id=423">issue #423</a>)</li>
	</ul>
	
	<h3>Known Minor Issues</h3>
	<ul>
		<li>The <code>SolidHeight</code>/Solid Buildings functionality does not work with invisible projectiles yet. (<a href="http://bugs.renegadeprojects.com/view.php?id=888">issue #888</a>)</li>
	</ul>

	<h2>Bug Fixes</h2>
	<p><span class="gamename">Ares</span> provides three types of bug fixes:</p>
	<ol>
	<li>Fixes to genuine bugs in the original, unmodded <span class="gamename">Yuri's Revenge 1.001</span>, that cannot be fixed simply by modifying INI files or graphics (like the <span class="gamename">UMP</span> does).</li>
	<li>Fixes to logic that goes unused in the unmodded game, or at least not used to its full capabilities &ndash; i.e. game logic that often does not work as expected when used in mods.<br>
	<em>[This section might have included logic that existed in <span class="gamename">Tiberian Sun</span> but was removed by <span class="gamename">Yuri's Revenge 1.001</span>, however we have dedicated a <a href="#RestoredTiberianSunLogic">whole separate chapter</a> to restored <span class="gamename">Tiberian Sun</span> logic.]</em></li>
	<li>Corrections and enhancements to code efficiency that reduce loading times and in-game lag without affecting gameplay mechanics. Also hardware/operating system related crashes.</li>
	</ol>

	<h3>Type 1 Fixes (Original Bugs)</h3>
	<h4>Temporal Warheads Earn Experience By Killing Friendly Units</h4>
	<p>When a unit kills an enemy unit it gains experience which can lead to that unit becoming veteran or elite. Killing friendly units (your own or your allies') does not earn experience in this way.<br>
	However, <em>Temporal</em> warheads (warheads with <code>Temporal=yes</code> set) <em>did</em> use to earn experience when killing friendly units. This is no longer the case. <dfn class="bugfix">Temporal warheads no longer gain experience when used against allies</dfn></p>

	<h4>'Absolute-Damage' Prism Support Modifier</h4>
	<p>Whenever a game mode or map declared the <code>[General]</code> section without re-stating the <code>PrismSupportModifier</code>, the <code>PrismSupportModifier</code> from <span class="filename">rulesmd.ini</span> would get multiplied by 100, thus causing supported Prism Towers to deal seemingly 'instant-kill' damage.</p>
	<p>This bug is now fixed, however it should be noted that several official maps used to exhibit this bug and so are 'fixed' by the UMP by re-stating <code>PrismSupportModifier</code> which means that these maps are now set at the original 150%, regardless of what your mod may set it to (so if you are incorporating the UMP into your mod and change the modifier as well then you will need to amend the 'fixed' UMP maps accordingly).<dfn class="bugfix">Prism support modifier fixed for game modes/maps.</dfn></p>

	<h4>Frozen Mutation (MakeInfantry) Animations</h4>
	<p>Infantry killed by a mutation warhead appear to transform into another InfantryType. Internally this is achieved by playing an animation, upon completion of which a new infantry unit is spawned. If the cell where the new infantry is to be spawned is already occupied then the animation will pause on the final frame until the obstacle is cleared. The original game would allocate memory for the new infantry on every frame but would fail to de-allocate that memory when the infantry could not be placed. The more time that passes with the animation in this state, the worse the memory leak gets &ndash; resulting in the game eventually grinding to a halt. <span class="gamename">Ares</span> fixes this by simply deleting the animation if the new infantry unit cannot be spawned.<dfn class="bugfix">Stuck mutation animations are deleted (thus preventing a memory leak)</dfn></p>

	<h4>Misleading Veteran Naval Cameos</h4>
	<p>When you infiltrate an enemy War Factory, any [trainable] VehicleTypes' (not AircraftTypes) cameos (build icons) will gain the veteran symbol, indicating that they will start veteran when built. However, only vehicles built from a War Factory will actually start veteran, not vehicles built from a Naval Yard. <span class="gamename">Ares</span> ensures that only the vehicles that will actually start veteran gain the veteran symbol for their cameos.<dfn class="bugfix">Spying a war factory will not give you veteran build icons for naval units incorrectly.</dfn></p>

	<h4>Secret Lab Boon Weighting</h4>
	<p>The random weighting of each possible Secret Lab boon was not calculated correctly &ndash; the later a boon appeared in the list the less likely it was to appear in-game. For example, if the Grand Cannon were not picked as the boon for the first Secret Lab on the map (probability 1/8) then it could not be picked for any of the other Secret Labs. This has been fixed such that every Secret Lab will pick its boon completely at random, independently of other Secret Labs on the map.<dfn class="bugfix">Secret lab boons are picked truly at random.</dfn></p>

	<h4>Too Many Secret Labs</h4>
	<p>If there were more Secret Labs on the map than there were possible boons then all of the Secret Labs would be 'empty'. This has been fixed such that every Secret Lab will pick its boon completely at random, independently of other Secret Labs on the map.<dfn class="bugfix">Too many secret labs on a map would cause them all to be empty. Not anymore.</dfn></p>

	<h4>AI Targeting Cloaked Objects With Major Super Weapons</h4>
	<p>When AI controlled Super weapons with <code>Type=WeatherStorm</code> or <code>Type=Nuke</code> picked their target, they failed to ignore cloaked objects (such as Submarines) and, as a result, sometimes selected them as targets, ruining the appearance of fair play. Cloaked objects are no longer considered as targets for these super weapons.<dfn class="bugfix">AI will not use weather storms or nukes on cloaked units.</dfn></p>

	<h4>Enemy Harvester Guard Mode Exploit</h4>
	<p>It was possible to issue the 'guard mode' order to enemy harvesters as if they were your own units. Players unaware of this exploit would find their economy crippled when facing an unscrupulous player. It is no longer possible to issue the guard mode order to enemy harvesters.<dfn class="bugfix">"Enemy harvester guard mode" exploit no longer works.</dfn></p>

	<h4>Parasites In Airborne Units</h4>
	<p>If a parasite (e.g. Terror Drone) entered a unit that can fly (e.g. Nighthawk) and that unit was destroyed by the parasite whilst airborne then the parasite would appear, unscathed, on the ground beneath the destroyed unit. In <span class="gamename">Ares</span>, the parasite will instead appear at the same height as the destroyed airborne unit and fall to the ground - where it will be destroyed by the impact.<dfn class="bugfix">Parasites that destroy an airborne unit will fall to the ground and be destroyed too.</dfn></p>

	<h4>Warhead Verses' Special Values</h4>
	<p>The <code>Verses</code> flag (which is used on warheads to manipulate the damage dealt versus different armor types) has three special-case values used to define additional behavior:</p>
	<ul class="nobullets">
		<li>0% means no force fire, no retaliate, no passive acquire</li>
		<li>1% means no retaliate, no passive acquire</li>
		<li>2% means no passive acquire</li>
	</ul>
	<p>However, a bug with the way the floating point values are compared means that these behaviors were not always applied consistently. <span class="gamename">Ares</span> fixes this bug so the behavior should always be consistent now.<br>
	The special behaviors can also now be toggled independently of the Verses value (see <a href="#AdditionalArmorTypesandVerses">Additional ArmorTypes and Verses</a>).<dfn class="bugfix">Warhead verses special values (0%/1%/2%) should now apply their behavior consistently.</dfn></p>

	<h4>Unit Sounds Played At Inappropriate Times</h4>
	<p>When a unit was pulled by a Magnetron it would play its <code>MoveSound</code>, even though it was not moving under its own power. Now, this sound will only be played when the unit moves under its own power.<dfn class="bugfix">Units pulled by a Magnetron will on longer play their move sound.</dfn></p>

	<h3>Type 2 Fixes (Mod Logics)</h3>
	<h4>Unit Sounds Played At Inappropriate Times</h4>
	<p>When an <span class="type">InfantryType</span> with <code>MovementZone=AmphibiousDestroyer</code> was carried between water and land inside an 'open topped' vehicle (e.g. a Nighthawk converted into a flying Battle Fortress), their <code>EnterWaterSound</code>/<code>ExitWaterSound</code> would be played. Now, these sounds will only be played when the <span class="type">InfantryType</span> themselves physically enters/leaves water.</p>

	<h4>Buildable Secret Labs</h4>
	<p>Secret Lab boons were picked on map load so if a Secret Lab were not pre-placed on the map then it would not provide a boon. With <span class="gamename">Ares</span>, Secret Labs constructed by a player will randomly pick a boon that that player could not build at the time the Secret Lab was placed.<dfn class="bugfix">Buildable secret labs will now have a boon.</dfn></p>

	<h4>Buildable Construction Yards</h4>
	<p>Construction Yards that were made buildable from the sidebar would cause an Internal Error if the player started construction of one and then cancelled it. This error no longer occurs.<dfn class="bugfix">Buildable construction yards no longer cause an IE when canceled.</dfn></p>

	<h4>Animation Damage Warheads</h4>
	<p>Animations may have appeared to deal damage randomly rather than based on the warhead specified. In fact, animations were hard-coded to deal damage using the warhead specified by <code>[CombatDamage]&#9658;FlameDamage2</code>, unless the animation ID was <code>[INVISO]</code>, in which case the warhead used was <code>[CombatDamage]&#9658;C4Warhead</code>. With <span class="gamename">Ares</span>, the <code>[Animation]&#9658;Warhead=</code> flag will be adhered to, with the aforementioned warheads used as the default if <code>[Animation]&#9658;Warhead</code> is not specified.<dfn class="bugfix">Animations' warhead flag now works.</dfn><var class="art Animation warhead">Warhead=</var></p>

	<h4>Initial Veteran Cameos</h4>
	<p>When you infiltrate, say, an enemy Barracks, any [trainable] infantry that you subsequently build will start veteran. The infantry's cameos (build icons) will gain the veteran symbol to indicate this. However, if the country you are playing as has any units that always 'start veteran' then those units did not gain the veteran symbol for their cameos. Now they do.<dfn class="bugfix">Units that start veteran as a country-specific bonus will now have veteran build icons.</dfn></p>

	<h4>Only <span class="type">InfantryTypes</span> Can Overpower Buildings</h4>
	<p>Tesla Troopers, for example, can overpower Tesla Coils to make them fire a more powerful weapon. If the same logic was applied to vehicles (for example, the Tesla Tank), to make them overpower buildings in the same way, then the overpowering weapon of the vehicle would fire but would not, in fact, overpower the building. Now vehicles can overpower buildings properly.<dfn class="bugfix">Vehicles can overpower buildings.</dfn></p>

	<h4>OpenTopped Transports Do Not Decloak To Fire</h4>
	<p>If a passenger inside an 'open topped' vehicle (e.g. the Battle Fortress) fired a weapon with <code>DecloakToFire=yes</code> set then the open topped vehicle (if it were cloaked) would not decloak when the weapon was fired. Now it will.<dfn class="bugfix">OpenTopped transports will decloak to fire when their passengers fire.</dfn></p>

	<h4>RadBeams And Waves Using The Wrong FLH</h4>
	<p>The weapon effects of Radiation Beams and Waves (Sonic and Magnetron Beams) would always get drawn from the FLH of the firing unit's current primary weapon rather than from the FLH of the weapon that actually fired the beam/wave. Now the weapon effects will be drawn using the correct FLH.</p>
	<p>Note that the Magnetron does not have a <code>SecondaryFireFLH</code> set in the unmodded game, so any mod using <span class="gamename">Ares</span> will need to set this themselves. You may also need to correct the FLHs for the IFV.<dfn class="bugfix">RadBeams and waves will use the correct FLH (instead of always using PrimaryFLH).</dfn></p>

	<h4>Sonic Wave Ambient Damage</h4>
	<p>The <code>Warhead</code> and <code>AmbientDamage</code> settings used when applying ambient damage from a sonic weapon were always taken from the unit's current primary weapon rather than the weapon that actually fired the wave. Now these settings are taken from the weapon that fired the wave.<dfn class="bugfix">Sonic wave ambient damage comes from the correct weapon (instead of always Primary).</dfn></p>

	<h4>Ivan Bombs Can Only Be Fired By <span class="type">InfantryTypes</span></h4>
	<p>If an Ivan Bomb weapon was given to any unit other than an <span class="type">InfantryType</span> then the weapon would fire but the Ivan Bomb would not actually get attached to the target. Now Ivan Bombs can be fired by <span class="type">VehicleTypes</span>, <span class="type">AircraftTypes</span> and <span class="type">BuildingTypes</span> as well.<br>
	<span class="note">NB: <span class="type">BuildingTypes</span> do not get the Dynamite cursor.</span><dfn class="bugfix">Ivan bombs can be fired by any unit (instead of just infantry).</dfn></p>

	<h4><span class="type">BuildingType</span> Upgrades Are Not Viable Prerequisites</h4>
	<p>Before <span class="gamename">Ares</span>, upgrades did not appear to work as prerequisites &ndash; if you had the upgrade, you still didn't satisfy the prerequisite. In fact, only the most recently constructed <span class="type">BuildingType</span> would be checked to see if it had the upgrade. With <span class="gamename">Ares</span>, all upgrades on all <span class="type">BuildingTypes</span> are eligible to satisfy any prerequisite logic that a normal <span class="type">BuildingType</span> can.</p>
	<p>In addition, upgrades can now satisfy a super weapon's <code>AuxBuilding</code>.<dfn class="bugfix">Building upgrades can now be used as prerequisites.</dfn></p>

	<h4>Custom Palettes</h4>
	<p>The original game supports custom palettes on TechnoTypes using <code>Palette=</code> (filename, excluding .pal extension) on the TechnoType's entry in <span class="filename">artmd.ini</span>. However, the game would crash (with the message "You have violated the limit of having only one extra building Palette" in the (non-existent) log file) if you used the <code>Palette</code> flag more than once. And, of course, the one extra palette was already in use on the Statue of Liberty. <span class="gamename">Ares</span> removes this limit and lets you use custom palettes on all TechnoTypes to your heart's content.<br>
	<span class="note">NB: It is not known why this apparently arbitrary limit on custom palettes was in place &ndash; it may have been there to mask a bug that we don't yet know about.</span><dfn class="bugfix">Units can specify a custom palette.</dfn></p>

	<h4>Factory Load Sharing</h4>
	<p>If you had queued up a lot of vehicles such that the primary factory could not cope with the rapid exit cycle then the game would search for alternative exits &ndash; other instances of the same BuildingType. In <span class="gamename">Ares</span> this has been extended to search for all <span class="type">BuildingTypes</span> with the same <code>Factory=</code> and <code>Naval=</code> settings.<br>
	<span class="note">NB: This fix currently prevents the so-called 'kennel hack' from working.</span><dfn class="bugfix">Factory load sharing for factories of the same type, rather than just the same ID.</dfn></p>

	<h4>New Construction Options</h4>
	<p>One cause of the NCO bug (where the EVA will announce "new construction options" when, in fact, there aren't any) was the game's failure to check if the player had the appropriate factory type to build the unit concerned (e.g. a <span class="type">VehicleType</span> factory for VehicleTypes). Such a check will now take place, thus removing this cause of the NCO bug.<dfn class="bugfix">"New construction options" no longer announced if player does not have the correct factory type for a unit.</dfn></p>

	<h4>"Special" Weapons Only Functional In The Primary Slot</h4>
	<p>Units with weapons that use <code>MindControl=yes</code>, <code>Parasite=yes</code> or <code>Temporal=yes</code> require special treatment behind-the-scenes in order to function. However, the original game only performed this treatment if those units had such weapons as their Primary weapon. The treatment would not be applied for Secondary weapons and thus result in crashes. <span class="gamename">Ares</span> performs the treatment for Secondary weapons too.<br>
	<span class="note">NB: The 'special treatment' sets up the object wielding these weapons. However, the original code is not designed to handle an object having more than one weapon with 'special' functionality so it is not recommended to have multiple weapons with the same type of special functionality on a single object.</span><dfn class="bugfix">Special weapons (mind-control/parasite/temporal) will now work in the Secondary slot.</dfn></p>

	<h4>DestroyAnims Don't Remap</h4>
	<p>The remappable parts of animations played via the use of the <code>DestroyAnims=</code> flag (when a building is destroyed) used to remain red in color &ndash; they would not get remapped to the owning player's house color. Now they will. Note that the games files already include suitable animations for some buildings, however some of these (the Allied Barracks and Prism Tower) use the red palette indexes rather than the remappable indexes so you will need to recolor the images.<dfn class="bugfix">DestroyAnims can use remappable colors.</dfn></p>

	<h4>DestroyAnims Cause Reconnection Errors</h4>
	<p>The <code>DestroyAnims=</code> flag used to cause reconnection errors in multiplayer whenever it was used. This should not happen anymore.<dfn class="bugfix">DestroyAnims don't cause reconnection errors anymore.</dfn></p>

	<h4><span class="type">BuildingTypes</span> and <span class="type">InfantryTypes</span> Do Not Reload Ammo Properly</h4>
	<p>See <a href="http://modenc.renegadeprojects.com/Ammo">ModEnc://Ammo</a> for exact details of this problem. Put simply, ammo/reloading logic did not work properly on <span class="type">BuildingTypes</span> or <span class="type">InfantryTypes</span> and was essentially useless on those object types. <span class="gamename">Ares</span> fixes this logic such that these object types will now reload their ammo properly. Note that <span class="type">AircraftTypes</span> are hard-coded to require docking to reload.</p>
	<p>Additionally, <span class="type">BuildingTypes</span> with <code>Hospital=yes</code> or <code>Armory=yes</code> limit their special effects to the current Ammo they have, and previously those structures were hardwired to never reload their ammo. This restriction has been lifted, so you might need to revise the balance of such structures.<dfn class="bugfix">Infantry and buildings can now reload ammo correctly.</dfn></p>

	<h4>Unit Instances Not Counting Towards BuildLimit</h4>
	<p>If you have a vehicle which deploys into a structure, both the deploying vehicle and the structure will now count towards the <code>BuildLimit</code> of that vehicle.<dfn class="bugfix">Vehicles that deploy into a building now count towards the BuildLimit of that building, and vice versa.</dfn></p>
	<p>Hijackers inside stolen vehicles now count towards the Hijacker's BuildLimit.<dfn class="bugfix">Hijackers inside vehicles now count towards that hijacker's BuildLimit.</dfn></p>

	<h4>The 100-Unit Bug</h4>
	<p>There is no longer an upper limit on the InfantryTypes, <span class="type">VehicleTypes</span> and <span class="type">AircraftTypes</span> lists.
	<span class="note">NB: The so-called Whiteboy Bug (where graphical glitches and even game freezing can occur when there are 74 or more cameos visible on the sidebar at the same time) has not been fixed.</span><dfn class="bugfix">100-unit bug fixed for infantry, vehicles and aircraft (there's no longer a limit on these).</dfn></p>

	<h4>PKT Duplication</h4>
	<p>Multiple loose PKT files can now be used without their contents being duplicated (unless you duplicate the mapfilters, of course).<dfn class="bugfix">Multiple loose PKT files no longer have their contents duplicated.</dfn></p>
	
	<h4>Overriding Missionsmd.pkt</h4>
	<p>You can now override the original <span class="filename">missionsmd.pkt</span> by placing your own version in an <span class="filename">expandmd##.mix</span> file (the game has been modified to load these files before <span class="filename">langmd.mix</span>).<dfn class="bugfix">Missionsmd.pkt can now be overridden by your own version inside expandmd##.mix</dfn></p>

	<h4>Moving Alpha Lights</h4>
	<p>The original game includes a little-known flag that allows all ObjectTypes (anything placeable on the map - Projectiles, Trees, Overlays, Smudges (not the IsometricTileTypes), Aircraft, Infantry, Vehicles and Buildings) to have a lighting effect displayed on them.<br>
	<code>[Object]&#9658;AlphaImage=ALPHATST</code> instructs the game to display <span class="filename">ALPHATST.shp</span> on the object as a lighting effect. The SHP must be saved without any compression (just like mouse.sha).</p> 
	<p><span class="gamename">Ares</span> adds two improvements to this feature:</p>
	<ul>
		<li>The lighting effect will follow the object around as it moves, rather than staying where the object was created.<dfn class="bugfix">Alpha lights will now move with the object they are attached too.</dfn><br><span class="note">NB: Alpha Lights on moving objects are a potential source of lag.</span></li>
		<li>If the SHP has multiple frames then it is interpreted as a multi-facing image, and the largest n frames in the image are used as facing-specific versions (in this case, n is the largest power of 2 that is less than or equal to the number of frames in the SHP, e.g. 2/4/8/16/32/64...)<dfn class="bugfix">Alpha lights can now have multiple facings.</dfn></li>
	</ul>

	<h4>Mind-Controller Parasites</h4>
	<p>MC-parasites would draw a mind-control link between the mind-controlled unit and the point on the map where the parasite entered the unit. Now the link will not be drawn at all. You can also use <a href="#PermanentMindControl">MindControl.Permanent</a> instead, in order to use the perma-mc animation.<dfn class="bugfix">Mind-controller parasites will no longer draw the mind-control link when the the target is selected.</dfn></p>

	<h4>SpyPlane.Count Decoupled From AllyParaDropNum</h4>
	<p>If you set <code>AllyParaDropNum=</code> to a list of integers so as to send multiple <span class="type">InfantryTypes</span> in the paradrop (and thus multiple paradrop planes) then the SpyPlane super weapon would also send the same number of planes as there were elements in that list. In <span class="gamename">Ares</span>, the number of spy planes sent out is now specified by the super weapon's own <code>SpyPlane.Count=</code> flag (which defaults to 1).<dfn class="bugfix">SpyPlane.Count decoupled from AllyParaDropNum.</dfn></p>

	<h4>DigSound</h4>
	<p><code>[AudioVisual]&#9658;DigSound=</code> is used for both the global Nuke siren and the sound made when a subterranean unit (with <code>Locomotor={4A582743-9839-11d1-B709-00A024DDAFD1}</code>) digs into or emerges from the ground. With <span class="gamename">Ares</span>, the super weapon can specify its own <code>Nuke.Sound=</code> (which defaults to <code>[AudioVisual]&#9658;DigSound=</code>).<dfn class="bugfix">Nuke super weapons can be overridden to use a sound other than DigSound for their siren.</dfn></p>

	<h4>Jumpjet Shadows</h4>
	<p>If a Jumpjet vehicle uses SHP-based imagery then the shadow would only be drawn when the unit was at rest on the ground or if <code>Turret=yes</code> were set (and then the shadow would appear directly underneath the unit instead of on the ground). Now the shadow will always be drawn correctly on the ground.<dfn class="bugfix">Shadows on jumpjet units will now be drawn correctly when the unit is airborne.</dfn></p>

	<h4>Vehicle Paradrop Offset</h4>
	<p>Passengers of <span class="type">AircraftTypes</span> get paradropped out if the <span class="type">AircraftType</span> fires its weapon. The passengers would always use the infantry sub-cell positions for where they would be spawned, even if the passenger were not an InfantryType. This ultimately meant that vehicles would appear to fall part-way into the ground upon landing. This error no longer happens in <span class="gamename">Ares</span>.<br>
	(The same problem also used to occur with vehicles paradropped from aircraft with <code>Carryall=yes</code> set.)<dfn class="bugfix">Vehicles that are paradropped will now be centered correctly on the cell they land on, rather than being offset.</dfn></p>

	<h4>Air-To-Air Combat</h4>
	<p>Anti-air weapons (where the projectile has <code>AA=yes</code> set) could not be used by <span class="type">AircraftTypes</span> &ndash; aircraft simply would not attack other airborne units. Now, anti-air weapons work just fine on aircraft. No additional flags are required.<dfn class="bugfix">Aircraft can now attack other aircraft if given a weapon with an <code>AA=yes</code> projectile.</dfn></p>

	<h4>BaseUnit</h4>
	<p><code>[General]&#9658;BaseUnit=</code> specifies the list of <span class="type">VehicleTypes</span> that are considered to be MCVs. Only the first 3 entries of this list were recognized by the game, which means that additional sides would never be playable in non-Short Games (among other limitations). <span class="gamename">Ares</span> removes this limit so all entries in the list are now recognized.<dfn class="bugfix"><code>BaseUnit=</code> can now hold more than 3 vehicles.</dfn></p>

	<h4>BuildConst</h4>
	<p>If you get into low power then the EVA will announce 'low power', but only if you have one of the first 3 buildings from the <code>[AI]&#9658;BuildConst=</code> list. With <span class="gamename">Ares</span>, you'll get the EVA announcement if you have any building from the list.<dfn class="bugfix">"Low power" announcement used to occur only if you owned one of the first 3 buildings from <code>BuildConst=</code>. This now works if you have any building on the list.</dfn></p>

	<h4>Infantry Lost In Special Function Buildings</h4>
	<p>Infantry sent into an Armory or old-style Tech Hospital emerge a few moments later, having had the relevant benefit applied (e.g. promotion or healing). However, if the building were destroyed, sold or undeployed whilst the <span class="type">InfantryType</span> were still inside then that <span class="type">InfantryType</span> would remain in 'limbo' whilst still counting towards the owning player's units (e.g. defeat conditions, build limit, etc). <span class="gamename">Ares</span> will make sure that such <span class="type">InfantryTypes</span> are ejected from the building in those situations.<dfn class="bugfix">Infantry still inside a Hospital or Armory when it is destroyed/sold may go into limbo instead of emerging, meaning that they still count towards the player's units. Now they will emerge.</dfn></p>

	<h4>Multiple AI Factories Clone Units</h4>
	<p>If the AI were modified to build multiple factories of the same type then every time they built a unit from that factory type they would produce a copy of that unit from every additional factory. For example, if the AI were made to build a second War Factory then they would get a second copy of every vehicle they build. This behavior is disabled by default in <span class="gamename">Ares</span>, although a flag has been added to allow mod authors to turn it back on if they really want to:</p>
	<dl class="flaglist">
		<dt>[GlobalControls]&#9658;AllowParallelAIQueues= (boolean)</dt>
		<dd>Set this to yes to re-enable AI factory cloning.<dd>
	</dl>
	<dfn class="bugfix">If an AI is made to build multiple factories of the same type they will no longer result in cloned units/buildings (this can be turned back on if desired).</dfn><var class="rules">GlobalControls</var><var class="rules GlobalControls boolean no">AllowParallelAIQueues=</var>
	
	<div class="ares02"><h4>Alternate Theater Art For <span class="type">BuildingTypes</span> (Ares 0.2)</h4>
	<p><span class="type">BuildingTypes</span> whose <span class="filename">artmd.ini</span> entry has <code>NewTheater=yes</code> set would have the second letter of their  SHP filenames replaced by another letter, depending on the theater of the current map. For example, GAWEAP uses SHP files named GAWEAP* on arctic maps, GTWEAP* on temperate maps, GDWEAP* on desert maps and so on. In the event that a SHP file with the appropriate filename does not exist, the game falls back to GTWEAP*.<br>
	However, in <span class="gamename">Yuri's Revenge</span> this filename-adjusting logic only works for <span class="type">BuildingTypes</span> whose <code>Image</code> ID starts with G, N, Y or C. <span class="gamename">Ares</span> extends this logic to work for <code>Image</code> IDs starting with any letter (A-Z or a-z).</p></div>

	<h4>Amphibious Objects Sink When Chronoshifted Onto Water</h4>
	<p>When an amphibious (not hover) object - that is, one that can normally enter water cells without problem - was chronoshifted onto water by the Chrono Sphere, it would sink. <span class="gamename">Ares</span> corrects this so that all amphibious objects can be chronoshifted onto water without sinking.<dfn class="bugfix">Amphibious objects no longer sink when chronoshifted onto water.</dfn></p>

	<h4>Temporal Warheads Still Affect Objects That Are Not Warpable</h4>
	<p>Attacking a mind controlling unit or structure with a <code>Temporal=yes</code> warhead would free the captured units even if the target is not warpable (TechnoTypes with <code>Warpable=no</code> set).<br>
	Also, spawning units would have their aircrafts destroyed. This is no longer happens. <dfn class="bugfix">Temporal warheads no longer affect objects that are not warpable</dfn></p>
	
	<h4>Hardcoded Wall/Gate Interactions</h4>
	<p>In <span class="gamename">Tiberian Sun</span> you could place buildable gates on top of existing walls. This logic still exists in Yuri's Revenge. However, the logic was hardcoded to only work with GAWALL and NAWALL, so it wouldn't work with Yuri's wall (YAWALL) or, indeed, any other walls you might add to the game. <span class="gamename">Ares</span> changes this so that all overlays with <code>Wall=yes</code> set can have gates "slammed" onto them.<br><span class="note">NB: The automatic joining of walls to the gates still only works for GAWALL and NAWALL however this will be fixed in future.</span><dfn class="bugfix">Gates can be slammed onto any walls, not just GAWALL or NAWALL.</dfn></p>
	
	<h3>Type 3 Fixes (Performance)</h3>
	<ul>
		<li><span class="filename">pips.shp</span> was getting reloaded from disk six times in a row.</li>
		<li>A commonly used function, ObjectClass::GetCell, performed the same tasks twice.</li>
		<li>During startup, many superfluous calls were made to the debug log file writer.</li>
		<li>Random Map Generator time has been greatly reduced (much time was wasted by redrawing the minimap multiple times during a map's generation).</li>
		<li>Some particularly fast CPUs could cause the game to crash on startup.</li>
		<li>There exists a version of <span class="filename">ddraw.dll</span> that is often touted as improving the performance of <span class="gamename">Yuri's Revenge</span>. This "magic" DLL forces DirectDraw into software emulation mode, which doesn't use any hardware accelerated GPU functionality. This means special effects that are not emulated are simply omitted, potentially improving performance. <span class="gamename">Ares</span> uses software emulation mode by default, making this DLL unnecessary. However, Windows Vista and Windows 7 come with DirectX 10 - which does not  support software emulation - so <span class="gamename">Ares</span> will not default to software emulation mode on those versions of Windows (otherwise users would just get a completely black screen).</li>
	</ul><dfn class="bugfix">Several performance enhancements.</dfn>
	
	<h2>Restored <span class="gamename">Tiberian Sun</span> Logic</h2>
	<p>The <span class="gamename">Yuri's Revenge</span> engine is based on the <span class="gamename">Red Alert 2</span> engine which, in turn, is based on the <span class="gamename">Tiberian Sun</span> engine.<br>
	Various features that existed in <span class="gamename">Tiberian Sun</span> were removed in <span class="gamename">Red Alert 2</span>, and further features were removed in <span class="gamename">Yuri's Revenge</span> and in the 1.001 patch.<br>
	The extent to which these features no longer exist in <span class="gamename">Yuri's Revenge 1.001</span> varies, from not functioning correctly to complete removal of the logic (sometimes because simply using the logic causes an Internal Error).<br>
	Below is a list of the features that <span class="gamename">Ares</span> has restored, along with any changes or enhancements to the way those features used to work in <span class="gamename">Tiberian Sun</span>.<br>
	Note that, in many cases, <span class="gamename">Ares</span> has drastically changed the way these features are implemented.</p>

	<h3>EMP</h3>
	<p>Vehicles affected by EMP (Electromagnetic Pulse) are paralyzed in a similar manner to a Chrono Legionnaire erasing a unit. Unlike the Chrono Legionnaire however, EMP'd vehicles can still be attacked by other units.<br>
	EMP paralysis affects units in various ways:<dfn class="restored">EMP weapons</dfn><p>
	<ul>
		<li>Primary effect: units will not respond to any commands. They will stop moving and will not attack anything.>/li>
		<li>Hovering units (such as the Robot Tank) will land.</li>
		<li>Units display the animation specified by <code>[General]&#9658;EMPulseSparkles=EMP_FX01</code>. Note that the <span class="filename">emp_fx01.shp</span> file that comes with Red Alert 2 is in the Tiberian Sun palette and needs to be converted.</li>
		<li>Voxel-based units are darkened (SHP-based units are not).</li>
		<li>Buildings that can undeploy into vehicles (e.g. MCVs) still can, but the resulting vehicle will remain EMP'd until the effect wears off.</li>
		<li>Aircraft will immediately crash.</li>
		<li>Base defenses will not be able to fire their weapon.</li>
		<li>Gap Generators will stop emitting radar gap.</li>
		<li>Laser Fence Posts will stop emitting laser fences.</li>
		<li>Robot Control Centers will stop working.</li>
		<li>Super weapon buildings will shut down and the super weapons themselves will stop charging, <i>if</i> they have <code>[SuperWeapon]&#9658;IsPowered=yes</code> set.</li>
		<li>Radar buildings will stop providing radar.</li>
		<li>Units that spawn other units will cease to do so. If the spawner unit has launched any aircraft then the aircraft will immediately crash.</li>
		<li>Slave Miner slaves will stop working.</li>
		<li>Units that are in their unloading state (such as ore harvesters depositing ore or Siege Choppers transforming) will only become EMP'd once they have finished unloading.</li>
		<li>Harvesters that were in the middle of harvesting when hit by EMP will resume harvesting after EMP wears off.</li>
  	</ul>
	<p><span class="note">NB: <span class="gamename">Tiberian Sun</span> used the weapon's Damage flag to determine how long the EMP effect would last. <span class="gamename">Ares</span>, however, uses 2 new flags (EMP.Duration and EMP.Cap) to provide greater control. The weapon's Damage will be delivered independently from EMP paralysis (so a weapon can both damage and paralyze its target). <span class="gamename">Tiberian Sun</span> also used the flag EMEffect=yes, which is not used in <span class="gamename">Ares</span>.</span></p>
	<dl class="flaglist">
		<dt>[Warhead]&#9658;EMP.Duration= (integer &ndash; frames)<br>
		[Warhead]&#9658;EMP.Cap= (integer &ndash; frames)</dt>
		<dd>The above two flags are used together to determine how long (in frames) the affected units will be EMP'd for.<var class="rules Warhead integer_-_frames xxxnum0">EMP.Duration=</var><var class="rules Warhead integer_-_frames xxxnum-1">EMP.Cap=</var></dd>
	</dl>
	<p>The game keeps track of how much longer each unit will remain paralyzed. Each unit essentially has a hidden EMP counter that counts down frame by frame until it reaches zero, at which point the unit will be re-activated. This counter is what gets modified by EMP warheads.</p>
	<p>First we will look at positive EMP.Duration &ndash; the targets are going to be paralyzed.</p>
	<ul>
		<li><code>EMP.Cap</code> is greater than zero.<br>
		Makes this EMP effect stackable, but capped.<br>
		The target's EMP counter is increased by <code>EMP.Duration</code> up to but not exceeding <code>EMP.Cap</code>.<br>
		If the target's EMP counter is already greater than <code>EMP.Cap</code> (e.g. caused by some other EMP weapon) then it will not be reduced.<br>
		Examples:<br>
		EMP counter is 0, <code>EMP.Duration=10</code>, <code>EMP.Cap=20</code>. Result: EMP counter will be set to 10.<br>
		EMP counter is 15, <code>EMP.Duration=10</code>, <code>EMP.Cap=20</code>. Result: EMP counter will be set to 20.<br>
		EMP counter is 60, <code>EMP.Duration=10</code>, <code>EMP.Cap=20</code>. EMP counter will remain at 60.</li>
		<li><code>EMP.Cap=0</code><br>
		Makes this EMP effect stackable, but uncapped.<br>
		The target's EMP counter is incremented by <code>EMP.Duration</code>, without limit.<br>
		This is <span class="gamename">Ares</span> legacy behavior (before the <code>EMP.Cap</code> flag was added).<br>
		Example:<br>
		EMP counter is 25, <code>EMP.Duration=10</code>. Result: EMP counter will be set to 35.</li>
		<li><code>EMP.Cap=-1</code><br>
		The target's EMP counter is set to the exact number of frames specified by <code>EMP.Duration</code>, unless the target's EMP counter is already greater than this.<br>
		Examples:<br>
		EMP counter is 5, <code>EMP.Duration=10</code>. Result: EMP counter will be set to 10.<br>
		EMP counter is 20, <code>EMP.Duration=10</code>. EMP counter will remain at 20.</li>
	</ul>
	<p>Next we will look at negative <code>EMP.Duration</code> &ndash; for example, a friendly unit trying to re-activate the already-paralyzed unit.</p>
	<ul>
		<li><code>EMP.Cap=-1</code><br>
		The target's EMP counter is reduced by the number of frames specified by <code>EMP.Duration</code>.<br>
		Examples:<br>
		EMP counter is 50, <code>EMP.Duration=10</code>. Result: EMP counter will be set to 40.<br>
		EMP counter is 7, <code>EMP.Duration=10</code>. Result: EMP counter will be set to zero and the unit will re-activate.</li>
		<li><code>EMP.Cap</code> is greater than zero.<br>
		The target's EMP counter is reduced by the number of frames specified by <code>EMP.Duration</code>. If this value is still greater than <code>EMP.Cap</code> then the EMP counter is reduced further so that it is equal to <code>EMP.Cap</code>.<br>
		Examples:<br>
		EMP counter is 50, <code>EMP.Duration=10</code>, <code>EMP.Cap=70</code>. Result: EMP counter will be set to 40.<br>
		EMP counter is 50, <code>EMP.Duration=10</code>, <code>EMP.Cap=20</code>. Result: EMP counter will be set to 20.<br>
		EMP counter is 7, <code>EMP.Duration=10</code>. Result: EMP counter will be set to zero and the unit will re-activate.</li>
		<li><code>EMP.Cap=0</code><br>
		<code>EMP.Duration</code> is irrelevant. The EMP counter will be set to zero and the unit will re-activate.</li>
	</ul>
	<dl class="flaglist">
		<dt>[TechnoType]&#9658;ImmuneToEMP= (boolean)</dt>
		<dd>
			The above flag specifies whether or not the TechnoType is immune to the effects of EMP. The default immunity status is determined based on the following rules:<br>
			<ul>
				<li>
					BuildingTypes:<br>
					<code>ImmuneToEMP</code> defaults to no for <span class="type">BuildingTypes</span> that have <code>Powered=yes</code> and a negative <code>Power=</code> value set.<br>
					<code>ImmuneToEMP</code> defaults to no for <span class="type">BuildingTypes</span> that provide one or more of the following special functions:<br>
					<ul>
						<li>Radar</li>
						<li>Super weapons</li>
						<li>Undeploy into a vehicle (e.g. Construction Yards)</li>
						<li>Powers vehicles (e.g. Robot Control Centre)</li>
						<li>Gap Generator</li>
						<li>Sensors</li>
						<li>Laser Fence Posts</li>
					</ul>
				</li>	
				<li>
					InfantryTypes:<br>
					<code>ImmuneToEMP</code> defaults to yes for <span class="type">InfantryTypes</span> unless <code>Cyborg=yes</code> is set (in which case, <code>ImmuneToEMP</code> defaults to no.
				</li>
				<li>
					VehicleTypes and AircraftTypes:<br>
					<code>ImmuneToEMP</code> defaults to no for <span class="type">VehicleTypes</span> and AiracraftTypes unless <code>Organic=yes</code> is set (in which case, <code>ImmuneToEMP</code> defaults to yes.
				</li>
			</ul>
			<br>
			Manually setting <code>ImmuneToEMP</code> always overrides the default.<br>
			<br>
			EMP immunity can also be granted via the new veteran/elite ability "EMPIMMUNE". Just set <code>VeteranAbilities=EMPIMMUNE</code> or <code>EliteAbilities=EMPIMMUNE</code> on the TechnoType.<br>
			<br>
			EMP immunity also respects <code>TypeImmune</code>, <code>AffectsAllies</code> and <code>AffectsEnemies</code> on the warhead.
			<var class="rules TechnoType boolean Depends_on_TechnoType">ImmuneToEMP=</var>
		</dd>
	</dl>

	<h3>SellUnit</h3>
	<p>In <span class="gamename">Tiberian Sun</span> you could sell units that were docked with a structure by using the normal Sell button on the sidebar. In <span class="gamename">Yuri's Revenge</span>, a super weapon with <code>Action=SellUnit</code> achieves the same function. However, if such a super weapon were fired on a unit inside a Tank Bunker then an Internal Error would occur (sometimes this would be delayed until the destruction of the Tank Bunker). <span class="gamename">Ares</span> prevents the error occurring.<dfn class="restored">SellUnit super weapon no longer causes IEs with Tank Bunker.</dfn></p>

	<h3>PowerToggle</h3>
	<p>In <span class="gamename">Tiberian Sun</span> there was a button on the sidebar that allowed players to turn their own buildings on and off and in low power situations. In <span class="gamename">Yuri's Revenge</span>, a super weapon with <code>Action=PowerToggle</code> achieves the same function. However, if such a super weapon were fired into an empty cell then an Internal Error would occur. <span class="gamename">Ares</span> prevents the error occurring.<dfn class="restored">PowerToggle super weapon no longer causes IE when targetting an empty cell.</dfn></p>

	<h3>Spotlights</h3>
	<p>Spotlights would cause an Internal Error whenever they were created. The error no longer occurs so spotlights can now be used.<dfn class="restored">Spotlights</dfn></p>
	<dl class="flaglist">
		<dt>[Unit]&#9658;HasSpotlight= (boolean)</dt>
		<dd>If set to yes, creates a spotlight from the unit (note that this is now available to all of the Big Four types, not just BuildingTypes). When attached to a BuildingType, the spotlight still behaves like it used to, just circling around, but when it is attached to a different unit type, such as a VehicleType, it is fixed to shine straight ahead.<var class="rules TechnoType boolean no">HasSpotlight=</var></dd>
		<dt>[Unit]&#9658;Spotlight.StartHeight= (integer - leptons)</dt>
		<dd>Specifies the number of leptons above the ground at which the spotlight will be generated. Defaults to 250.<var class="rules TechnoType integer_-_leptons xxxnum250">Spotlight.StartHeight=</var></dd>
		<dt>[Unit]&#9658;Spotlight.Distance= (integer - leptons)</dt>
		<dd>The number of leptons ahead of the unit where the spotlight will reach the ground. Defaults to 1024.<var class="rules TechnoType integer_-_leptons xxxnum1024">Spotlight.Distance=</var></dd>
		<dt>[Unit]&#9658;Spotlight.AttachedTo= (enumeration -  one of body|turret|barrel)</dt>
		<dd>The part of the unit that the spotlight will align to in regards to facing. If set to "body" then the spotlight will be pointed in the direction the unit's body is facing, if set to "turret" then the spotlight will be pointed in the direction the unit's turret is facing. Does not work on BuildingTypes. Defaults to body.<var class="rules TechnoType enumeration">Spotlight.AttachedTo=</var></dd>
		<dt>[Unit]&#9658;Spotlight.DisableRed= (boolean)</dt>
		<dd>If set to yes then the spotlight will not emit any red light. Defaults to no.<var class="rules TechnoType boolean no">Spotlight.DisableRed=</var></dd>
		<dt>[Unit]&#9658;Spotlight.DisableGreen= (boolean)</dt>
		<dd>If set to yes then the spotlight will not emit any green light. Defaults to no.<var class="rules TechnoType boolean no">Spotlight.DisableGreen=</var></dd>
		<dt>[Unit]&#9658;Spotlight.DisableBlue= (boolean)</dt>
		<dd>If set to yes then the spotlight will not emit any blue light. Defaults to no.<var class="rules TechnoType boolean no">Spotlight.DisableBlue=</var></dd>
		<dt>[Unit]&#9658;Spotlight.DisableColor= (boolean)</dt>
		<dd>If set to yes then the spotlight will paint the ground darker, instead of brighter, and the disable red/green/blue flags mentioned above will be ignored.<var class="rules TechnoType boolean no">Spotlight.DisableColor=</var></dd>
	</dl>
	
	<h3>Laser Fences</h3>
	<p>Laser Fences used to work in <span class="gamename">Red Alert 2</span> and <span class="gamename">Yuri's Revenge</span> 1.000 but stopped working with the arrival of the 1.001 patch, in that the 'lasers' never turned on (this appears to have been an incidental change and not something Westwood did intentionally).</p>
	<p>Laser Fences now work just the same as they did in <span class="gamename">Tiberian Sun</span>. You need a <span class="type">BuildingType</span> with <code>LaserFencePost=yes</code> to act as a corner post, and another <span class="type">BuildingType</span> with <code>LaserFence=yes</code> which will be placed in between the corner posts automatically (see the original building's SHP from <span class="gamename">Tiberian Sun</span> to see how the art is controlled). These fences are impassable to ground objects and invulnerable to normal damage, but when a corner post is destroyed, the fences connected to it are lost. When the corner post loses power, the fences connected to it go offline and become freely passable. When the post regains power, the fences reactivate and any object unfortunate enough to be traversing them will be destroyed.<dfn class="restored">Laser Fences</dfn><var class="rules TechnoType boolean no">LaserFence=</var><var class="rules TechnoType boolean no">LaserFencePost=</var></p>

	<h3>Firestorm Wall</h3>
	<p>The Firestorm Wall and super weapon can now be implemented in <span class="gamename">Yuri's Revenge</span>.<br>
	See the <a href="#TypeFirestorm">New Super Weapon Types: Firestorm</a> section) for details.</p>

	<h3>Amphibious Voxel Changes</h3>
	In <span class="gamename">Tiberian Sun</span>, the Amphibious APC would appear to sink into the water. This was achieved by changing the imagery from <span class="filename">apc.vxl</span> to <span class="filename">apcw.vxl</span>. With <span class="gamename">Ares</span>, you can now specify:
	<dl class="flaglist">
		<dt>[VehicleType]&#9658;WaterVoxel= (any string)</dt>
		<dd></dd>
	</dl>
	...to make the amphibious unit's voxel change from <span class="filename">XXXX.vxl</span> to <span class="filename">XXXXwo.vxl</span> when in water.<br>
	<span class="note">NB: In future this will be changed to use the entered string as the voxel filename.</span>
	<var class="rules TechnoType string_-_voxel_file_name_suffix">WaterVoxel=</var>
	<dfn class="restored">Amphibious vehicles can change their voxel when moving between water/land.</dfn>

	<h2>New &amp; Enhanced In-Game Logic</h2>
	<p>This chapter documents all the completely new features that have been added to the game.</p>

	<h3>Sides &amp; Countries</h3>
	<p>In the original game the sides and countries were, for the most part, hard-coded. You could not add to, remove or reorder the 10 countries or 3 sides. <span class="gamename">Ares</span>, however, makes these tasks possible &ndash; you can now have up to 16<sup title="Theoretically there's no limit to the amount of countries you can define in the list. However, certain flags only work properly for up to 32 countries, and yet others fail after merely 16 â€“ it is recommended to not have any more than 16 playable countries and 32 total countries.">?</sup> countries and 16 sides, and you can customize these in numerous ways...<dfn class="new">New sides &amp; countries (including numerous enhancements).</dfn></p>

	<h4>Countries</h4>
	<p>Countries are specified in the <code>[Countries]</code> list in <span class="filename">rulesmd.ini</span>. Any country with <code>Multiplay=yes</code> set will appear in the country selection drop-down list and be eligible for random selection if the player chooses 'Random'.<dfn class="new">Countries can be excluded from the 'random country' option, or given differing weights.</dfn></p>
	<p>The <code>[Countries]</code> list can contain up to 32 countries, however taunts will only work for 16 of these.</p>
	<p>Each country can be customized using the following flags in the country's INI section:<br>
	<span class="note">NB: The following filename specifications (where raw C-style format specifiers like %s are required) are going to be changed into safer versions in the future. The replacement style has not been decided yet.</span></p>
	<dl class="flaglist">
		<dt>[Country]&#9658;File.Flag= (filename, <em>including</em> the .pcx extension)</dt>
		<dd>The PCX file to use for the country's flag, in the format "filename.pcx".<var class="rules Country filename">File.Flag=</var></dd>
		<dt>[Country]&#9658;File.LoadScreen= (filename, <em>including</em> the .shp extension)</dt>
		<dd>The SHP file to use for the country's loading screen, in the format "filename%s.shp". The filename specified <em>must</em> include "<code>%s</code>", which will be substituted for the current screen width (640 or 800 pixels). For example, <code>File.LoadScreen=ls%susstates.shp</code> will make the game load <span class="filename">ls800usstates.shp</span>.<var class="rules Country filename">File.LoadScreen=</var></dd>
		<dt>[Country]&#9658;File.LoadScreenPAL= (filename, <em>including</em> the .pal extension)</dt>
		<dd>The palette file to use for the country's loading screen, in the format "filename.pal".<var class="rules Country filename">File.LoadScreenPAL=</var></dd>
		<dt>[Country]&#9658;File.Taunt= (filename, <em>including</em> the Taunts\ directory and .wav extension)</dt>
		<dd>Path of the files to use for the country's taunts, in the format "Taunts\filename%02i.wav". The filename specified <em>must</em> include "<code>%02i</code>", which will be substituted for the taunt ID (01 through 08). For example, <code>File.Taunt=Taunts\tauam%02i.wav</code> will make the game load taunts <code>tauam01.wav</code> through <code>tauam08.wav</code>.<br>
		<span class="note">NB: Taunts will only be registered for up to 16 countries.</span><var class="rules Country filename">File.Taunt=</var></dd>
		<dt>[Country]&#9658;LoadScreenText.Name= (CSF label)</dt>
		<dd>Name of the country, displayed on the loading screen (where a map of the country is usually shown). For example, <code>LoadScreenText.Name=Name:Americans</code>.<var class="rules Country CSF_label">LoadScreenText.Name=</var></dd>
		<dt>[Country]&#9658;LoadScreenText.SpecialName= (CSF label)</dt>
		<dd>Name of the country's special weapon, displayed on the loading screen. For example, <code>LoadScreenText.SpecialName=Name:apara</code>.<var class="rules Country CSF_label">LoadScreenText.SpecialName=</var></dd>
		<dt>[Country]&#9658;LoadScreenText.Brief= (CSF label)</dt>
		<dd>Description of the country and its special weapon, displayed on the loading screen. For example, <code>LoadScreenText.Brief=loadbrief:usa</code>.<var class="rules Country CSF_label">LoadScreenText.Brief=</var></dd>
		<dt>[Country]&#9658;MenuText.Status= (CSF label)</dt>
		<dd>Brief description of the country, displayed in the status bar of the country selection screen when the player mouse-overs that country in the country selection drop-down list.<var class="rules Country CSF_label">MenuText.Status=</var></dd>
		<dt>[Country]&#9658;RandomSelectionWeight= (integer)</dt>
		<dd>Specifies how likely it is that this country will be randomly selected when a player chooses 'Random'. The probability of this country being picked is calculated by dividing this country's <code>RandomSelectionWeight</code> value by the sum of all <code>Multiplay=yes</code> countries' RandomSelectionWeight values. Defaults to 1.<var class="rules Country integer xxxnum1">RandomSelectionWeight=</var></dd>
		<dt>[Country]&#9658;AI.PowerPlants= (list of BuildingTypes)</dt>
		<dd>A list of buildings that the AI will treat as this country's power plants.<var class="rules Country list_of_BuildingTypes">AI.PowerPlants=</var></dd>
	</dl>
	
	<h4>Sides</h4>
	<p>Sides are specified in the <code>[Sides]</code> list in <span class="filename">rulesmd.ini</span>.</p>
	<p>There is no limit to the number of sides that can be defined. However, only 16 fully-working countries can be implemented (see above).</p>
	<p>Each side can (and should) define its own values for the following flags in the side's INI section:</p>
	<dl class="flaglist">
		<dt>[Side]&#9658;DefaultDisguise= (InfantryType)</dt>
		<dd>Default <span class="type">InfantryType</span> that disguisable infantry will be disguised as when first created.<var class="rules Side InfantryType">DefaultDisguise=</var></dd>
		<dt>[Side]&#9658;Crew= (InfantryType)</dt>
		<dd>The <span class="type">InfantryType</span> that is spawned as a survivor when objects (with <code>Crewed=yes</code> set) owned by this side are destroyed (or, in the case of buildings, sold)<var class="rules Side InfantryType">Crew=</var></dd>
		<dt>[Side]&#9658;SurvivorDivisor= (integer)</dt>
		<dd>An object's refund amount is divided by this number to determine how many survivors will be spawned when this object is destroyed (or, in the case of buildings, sold).<var class="rules Side integer">SurvivorDivisor=</var></dd>
		<dt>[Side]&#9658;AI.BaseDefenses= (list of BuildingTypes)</dt>
		<dd>List of base defense buildings that the AI can build.<var class="rules Side list_of_BuildingTypes">AI.BaseDefenses=</var></dd>
		<dt>[Side]&#9658;AI.BaseDefenseCounts= (list of integers)</dt>
		<dd>The maximum number of each corresponding base defense building (listed against <code>AI.BaseDefenses</code>) that the AI can build.<var class="rules Side list_of_integers">AI.BaseDefenseCounts=</var></dd>
		<dt>[Side]&#9658;LoadScreenText.Color= (R,G,B)</dt>
		<dd>Text on the loading screen for this side will be displayed in this color.<var class="rules Side R_G_B">LoadScreenText.Color=</var></dd>
		<dt>[Side]&#9658;ParaDrop.Types= (list of <span class="type">InfantryTypes</span> and/or VehicleTypes)</dt>
		<dd>The units that will be paradropped by <code>Type=ParaDrop</code> super weapons (such as the one normally provided by a Tech Airport) for this side. Defaults to <code>[General]&#9658;AllyParaDropInf</code> for GDI (Allied), <code>[General]&#9658;SovParaDropInf</code> for Nod (Soviet), and <code>[General]&#9658;YuriParaDropInf</code> for ThirdSide (Yuri).<br>
		<span class="note">NB: The original flags used to control the paradrop units only accept InfantryTypes. To include <span class="type">VehicleTypes</span> in a paradrop you must use the new ParaDrop.Types and ParaDrop.Num flags.</span><var class="rules Side list_of_InfantryTypes_or_VehicleTypes">ParaDrop.Types=</var></dd>
		<dt>[Side]&#9658;ParaDrop.Num= (list of integers)</dt>
		<dd>The quantity of each corresponding unit (listed against ParaDrop.Types) that will be paradropped. Defaults to <code>[General]&#9658;AllyParaDropNum</code> for GDI (Allied), <code>[General]&#9658;SovParaDropNum</code> for Nod (Soviet), and <code>[General]&#9658;YuriParaDropNum</code> for ThirdSide (Yuri).<var class="rules Side list_of_integers">ParaDrop.Num=</var></dd>
		<dt>[Side]&#9658;Sidebar.MixFileIndex= (integer)</dt>
		<dd>The MIX file number to use for the sidebar (e.g. 1 for the Allied <span class="filename">sidec01.mix</span>, 2 for the Soviet <span class="filename">sidec02.mix</span>)<dfn class="new">Sides can specify their own unique UI.</dfn><var class="rules Side integer">Sidebar.MixFileIndex=</var></dd>
		<dt>[Side]&#9658;Sidebar.YuriFileNames= (boolean)</dt>
		<dd>Whether or not to use the Yuri sidebar file names (<span class="filename">sidec02md.mix</span> and the Yuri-specific files within that MIX).<var class="rules Side boolean">Sidebar.YuriFileNames=</var></dd>
		<dt>[Side]&#9658;EVA.Tag= (EVA event)</dt>
		<dd>Name of the INI tag to load from <span class="filename">evamd.ini</span> for this side's EVA (vocal interface assistant &ndash; e.g. Eva for Allied, Sofia for Soviet and Some Guy for Yuri).<br>
		<span class="note">NB: EVA.Tag is not yet implemented.</span><var class="rules Side EVA event">EVA.Tag=</var></dd>
	</dl>
	
	<h3>Weapons</h3>
	<h4><code>[WeaponTypes]</code> Section</h4>
	<p>This new section allows you to declare new weapons without having to declare a dummy unit to parse them (like the official "WEEDGUY" hack). This works in the same way as the existing <code>[Warheads]</code> section. Any WeaponType listed under the <code>[WeaponTypes]</code> section will be parsed by the game and can be used as a shrapnel weapon or a new weapon in a game mode, etc.</p>

	<h4>Radiation Beams</h4>
	<p>Before <span class="gamename">Ares</span>, Radiation beams could not be customized &ndash; they were always either green or blue depending on the type of weapon. Now, however, radiation beams can be customized using the following flags (which affect weapons with <code>IsRadBeam=yes</code> set and/or <code>IsRadEruption=yes</code> set) in the weapon's INI section:<dfn class="new">Rad beams can have custom colors, duration and amplitude.</dfn></p>
	<dl class="flaglist">
		<dt>[Weapon]&#9658;Beam.Color= (R,G,B)</dt>
		<dd>The color that the beam will be drawn in. Defaults to <code>[AudioVisual]&#9658;ChronoBeamColor</code> for weapons with a Temporal warhead, and <code>[Radiation]&#9658;RadColor</code> for weapons with a non-Temporal warhead.<var class="rules Weapon R_G_B">Beam.Color=</var></dd>
		<dt>[Weapon]&#9658;Beam.IsHouseColor= (boolean)</dt>
		<dd>Whether or not the beam should be drawn using the firing unit's player color instead of the specific color specified by <code>Beam.Color</code>.<var class="rules Weapon boolean no">Beam.IsHouseColor=</var></dd>
		<dt>[Weapon]&#9658;Beam.Duration= (integer)</dt>
		<dd>The number of frames for which the beam should be visible. Default is 15 as per original RadBeams. The RadEruption effect originally used a random value between 5 and 20.<var class="rules Weapon integer_-_frames xxxnum15">Beam.Duration=</var></dd>
		<dt>[Weapon]&#9658;Beam.Amplitude= (float)</dt>
		<dd>The amplitude of the beam (possibly measured in pixels?). Defaults to 40.0 as per original RadBeams. The RadEruption effect originally used a random value between 100.0 and 500.0.<var class="rules Weapon float xxxnum40">Beam.Amplitude=</var></dd>
	</dl>
	
	<h4>Electric Bolt Coloring</h4>
	<dl class="flaglist">
	<dt>[Weapon]&#9658;Bolt.Color1= (R,G,B)<br>
	[Weapon]&#9658;Bolt.Color2= (R,G,B)<br>
	[Weapon]&#9658;Bolt.Color3= (R,G,B)</dt>
	<dd>The three colors used to draw this Electric Bolt. Can be omitted to use the default values (default values are palette-dependent as opposed to RGB).<dfn class="new">Electric bolts can have custom colors.</dfn><var class="rules Weapon R_G_B">Bolt.Color1=</var><var class="rules Weapon R_G_B">Bolt.Color2=</var><var class="rules Weapon R_G_B">Bolt.Color3=</var></dd>
	</dl>

	<h4>Wave Effects</h4>
	<p>An unused weapon effect (present in the game code but disabled) has been enabled. It is similar in appearance to the old laser beam or the old disruptor wave from previous games. For now it is referred to as Laser.<dfn class="new">Enabled unused IsLaser wave effect.</dfn></p>
	<dl class="flaglist">
		<dt>[Weapon]&#9658;Wave.IsLaser= (boolean)</dt>
		<dt>[Weapon]&#9658;Wave.IsBigLaser= (boolean)</dt>
	</dl>
	<p><code>IsLaser</code> and <code>IsBigLaser</code> should technically produce two different effects, however so far no difference has been observed.<br>
	The following flags are applicable to all Wave effects; the aforementioned <code>Wave.Is(Big)Laser=yes</code> as well as <code>Sonic=yes</code> and <code>IsMagBeam=yes</code>.<var class="rules Weapon boolean no">Wave.IsLaser=</var><var class="rules Weapon boolean no">Wave.IsBigLaser=</var></p>

	<h4>Wave Coloring</h4>
	<dl class="flaglist">
		<dt>[Weapon]&#9658;Wave.Color= (R,G,B)</dt>
		<dd>The color of the wave. Default value is different depending on the type of Wave.<br>
		<span class="note">NB: Sonic Waves do no yet have a sensible default Wave.Color.</span><var class="rules Weapon R_G_B">Wave.Color=</var><dd>
		<dt>[Weapon]&#9658;Wave.IsHouseColor= (boolean)</dt>
		<dd>If this is set to yes then the wave will be drawn in the firing unit's house color instead of the color specified by <code>Wave.Color</code>.<dfn class="new">Waves can have custom colors.</dfn><var class="rules Weapon boolean no">Wave.IsHouseColor=</var><dd>
	</dl>
	
	<h4>Wave Direction</h4>
	<p>Waves are drawn in different directions (from firer to target or vice versa) depending on the type of wave and the circumstances. This direction can now be customized in several ways. The following flags all default to no unless otherwise specified.</p>
	<dl class="flaglist">
		<dt>[Weapon]&#9658;Wave.ReverseAgainstVehicles= (boolean)</dt>
		<dd>Whether or not the wave will be drawn from the target to the firer when the target is a VehicleType. Defaults to yes if <code>IsMagBeam=yes</code> is set on the weapon.<var class="rules Weapon boolean">Wave.ReverseAgainstVehicles=</var><dd>
		<dt>[Weapon]&#9658;Wave.ReverseAgainstBuildings= (boolean)</dt>
		<dd>Whether or not the wave will be drawn from the target to the firer when the target is a BuildingType.<var class="rules Weapon boolean no">Wave.ReverseAgainstBuildings=</var><dd>
		<dt>[Weapon]&#9658;Wave.ReverseAgainstInfantry= (boolean)</dt>
		<dd>Whether or not the wave will be drawn from the target to the firer when the target is an InfantryType.<var class="rules Weapon boolean no">Wave.ReverseAgainstInfantry=</var><dd>
		<dt>[Weapon]&#9658;Wave.ReverseAgainstAircraft= (boolean)</dt>
		<dd>Whether or not the wave will be drawn from the target to the firer when the target is an AircraftType.<var class="rules Weapon boolean no">Wave.ReverseAgainstAircraft=</var><dd>
		<dt>[Weapon]&#9658;Wave.ReverseAgainstOthers= (boolean)</dt>
		<dd>Whether or not the wave will be drawn from target to firer when the target is anything not covered by the other 'ReverseAgainst' flags (i.e. trees, overlays, empty cells, etc.).<dfn class="new">Customisable wave direction.</dfn><var class="rules Weapon boolean no">Wave.ReverseAgainstOthers=</var><dd>
	</dl>
	
	<h4>Wave Ambient Damage</h4>
	<p>All waves can now deal disruptor-style damage to objects that they pass through, a feature that was previously limited to Sonic Waves only. As a reminder, the flags that control this are:</p>
	<dl class="flaglist">
		<dt>[Weapon]&#9658;AmbientDamage= (integer)</dt>
		<dd>How much damage the wave deals to objects it passes through. Defaults to zero.<dd>
		<dt>[Weapon]&#9658;Warhead= (WarheadType)</dt>
		<dd>The warhead used to deal ambient damage as well as normal damage.<dfn class="new">Customisable Ivan bomb clones.</dfn><dd>
	</dl>
	
	<h4>Customizable Ivan Bombs</h4>
	<p>As with many other features of <span class="gamename">Yuri's Revenge</span>, the settings that control Crazy Ivan Bombs are global so you can't have multiple variations of them with their own controls. With <span class="gamename">Ares</span> it is now possible to create new Ivan Bomb-esque weapons &ndash; new types of sticky bomb with whatever settings you like. The only aspect of Ivan Bombs that hasn't been de-globalized is the ability to remote detonate the bombs &ndash; this feature is either enabled or disabled for all Ivan Bomb types.</p>
	<p>When <code>IvanBomb=yes</code> is set on the weapon's warhead, the weapon can specify the following flags in order to customize that bomb.</p>
	<dl class="flaglist">
		<dt>[Weapon]&#9658;IvanBomb.Warhead= (WarheadType)</dt>
		<dd>The warhead that will be used when the bomb detonates.<var class="rules Weapon warhead">IvanBomb.Warhead=</var><dd>
		<dt>[Weapon]&#9658;IvanBomb.Damage= (integer)</dt>
		<dd>The damage that will be dealt when the bomb detonates.<var class="rules Weapon integer_-_damage">IvanBomb.Damage=</var><dd>
		<dt>[Weapon]&#9658;IvanBomb.Detachable= (boolean)</dt>
		<dd>Whether or not Engineers can remove this bomb from units it has been attached to.<var class="rules Weapon boolean">IvanBomb.Detachable=</var><dd>
		<dt>[Weapon]&#9658;IvanBomb.DestroysBridges= (boolean)</dt>
		<dd>Whether or not this bomb can be used on Bridge Repair Huts in order to destroy the corresponding Bridge.<br>
			<span class="note">NB: Bombs can always be attached to Bridge Huts, but the resulting explosion will not destroy the bridge unless <code>IvanBomb.DestroysBridges=yes</code> is set.</span><var class="rules Weapon boolean">IvanBomb.DestroysBridges=</var><dd>
		<dt>[Weapon]&#9658;IvanBomb.Delay= (integer)</dt>
		<dd>The number of frames that will elapse before the bomb detonates automatically.<var class="rules Weapon integer_-_frames">IvanBomb.Delay=</var><dd>
		<dt>[Weapon]&#9658;IvanBomb.AttachSound= (Sound name)</dt>
		<dd>The sound that will be played when the bomb is attached to a target.<var class="rules Weapon sound">IvanBomb.AttachSound=</var><dd>
		<dt>[Weapon]&#9658;IvanBomb.TickingSound= (Sound name)</dt>
		<dd>The sound that will be played whilst the bomb is attached to a unit. In order for this sound to loop correctly, the sound must have <code>Control=loop</code> set in its INI section in <span class="filename">soundmd.ini</span>.<var class="rules Weapon sound">IvanBomb.TickingSound=</var><dd>
		<dt>[Weapon]&#9658;IvanBomb.Image= (filename, <em>including</em> the .shp extension)</dt>
		<dd>The SHP file for the image to display over a unit that has a bomb attached to them, in the format "filename.shp". If the image cannot be loaded then the game will fall back to the default <span class="filename">bombcurs.shp</span>.<var class="rules Weapon filename">IvanBomb.Image=</var><dd>
		<dt>[Weapon]&#9658;IvanBomb.FlickerRate= (integer)</dt>
		<dd>
			The rate at which the bomb SHP will flip back and forth between two frames to give the impression of a flickering fuse.<br>
			On every game frame, the frame of the bomb SHP is calculated as follows:
			<pre>frameToShow = (Game.CurrentFrame &ndash; Bomb.PlantingFrame) / (Bomb.Delay / (Bomb.Image.Frames &ndash; 1))
IF (CurrentFrame mod (2 * Bomb.FlickerRate) >= Bomb.FlickerRate) THEN frameToShow = frameToShow + 1</pre>
			Originally this logic was hard-coded to ignore the last frame of the bomb SHP, which was originally planned to be used for so called "death bombs" which were cut from the game before <span class="gamename">Red Alert 2</span> was released. This hard-coding has been changed so that the whole SHP is now considered for the fuse, however this means that you'll now see that extra frame from <span class="filename">bombcurs.shp</span>, unless you replace that SHP file.<br>
			<img src="./manual_images/bombcurs.png" alt="Image of bombcurs.shp">
			<var class="rules Weapon integer">IvanBomb.FlickerRate=</var>
		</dd>
	</dl>

	<h3>Warheads</h3>
	<h4>Iron Curtain Effect</h4>
	<dl class="flaglist">
		<dt>[Warhead]&#9658;IronCurtain.Duration= (integer)</dt>
		<dd>Endows the target unit(s) with the Iron Curtain effect for the specified number of frames, if they are not already under the effect. Units that are already under the effect will have the duration of the effect extended by the specified number of frames (the duration is cumulative rather than absolute).<br>
		If the duration value is negative then a unit's current Iron Curtain effect (if any) will be shortened by the specified number of frames (so you could create a weapon that will nullify the Iron Curtain effect by setting <code>IronCurtain.Duration=-99999</code>).<var class="rules Warhead integer_-_frames xxxnum0">IronCurtain.Duration=</var><dd>
	</dl>
	<p>This feature works with <code>CellSpread</code> to affect multiple targets.<br>
	<span class="note">NB: No other warhead properties (e.g. Verses) affect the application of this effect.</span><dfn class="new">Weapons can apply the Iron Curtain effect for a specified number of frames (stackable).</dfn></p>
	
	<h4>Permanent Mind-Control</h4>
	<dl class="flaglist">
		<dt>[Warhead]&#9658;MindControl.Permanent= (boolean)</dt>
		<dd>If the warhead has <code>MindControl.Permanent=yes</code> set as well as <code>MindControl=yes</code> set then the mind-control will be permanent.<var class="rules Warhead boolean no">MindControl.Permanent=</var><dd>
	</dl>
	<p>Permanent mind-control is handled in the same way as the Psychic Dominator effect &ndash; previously-mind-controlled units (even permanently) are re-mind-controlled, and the mind-controller does not have a limit on the number of units that it can permanently mind-control.</p>
	<p>Unlike the Psychic Dominator, buildings are susceptible to permanent mind-control if the warhead can target them.<dfn class="new">Permanent mind-control weapons.</dfn></p>
	
	<h4>Customizable WarpAway</h4>
	<p>If <code>[Warhead]&#9658;Temporal.WarpAway</code> is set, it specifies the animation to be played when this warhead erases an object, instead of <code>[General]&#9658;WarpAway=</code>.<dfn class="new">Per-weapon WarpAway animation.</dfn><var class="rules Warhead animation">Temporal.WarpAway=</var></p>

	<h4>Ion Cannon Ripple Effect</h4>
	<dl class="flaglist">
		<dt>[Warhead]&#9658;Ripple.Radius= (integer, scale unknown)</dt>
		<dd>This generates a visual shockwave when the warhead detonates, identical to the one produced by <span class="gamename">Tiberian Sun</span>'s Ion Cannon. It is recommended that you don't set Radius above 79. Note that this is a visual effect only.<dfn class="new">Ion Cannon ripple effect for weapons.</dfn><var class="rules Warhead integer">Ripple.Radius=</var></dd>
	</dl>

	<h4>Deployed Infantry Damage multiplier</h4>
	<dl class="flaglist">
		<dt>[Warhead]&#9658;Deployed.Damage= (float - multiplier)</dt>
		<dd>A multiplier applied to <code>Damage</code> if the <span class="type">InfantryType</span> receiving it is currently deployed.<var class="rules Warhead float_-_multiplier xxxperc100">Deployed.Damage=</var></dd>
	</dl>
	<p>Note that this is not the same as the existing <code>ProneDamage=</code> flag; deployed units are not considered to be prone. Defaults to 100%.<dfn class="new">Per-warhead damage multiplier against deployed infantry.</dfn></p>

	<h4>AffectsEnemies</h4>
	<dl class="flaglist">
		<dt>[Warhead]&#9658;AffectsEnemies= (boolean)</dt>
		<dd>Specifies whether or not this warhead can damage enemy units. This has no effect on the warhead's ability to target enemy units. A counterpart to the existing <code>AffectsAllies</code> flag.<dfn class="new"><code>AffectsEnemies=</code> flag added (counterpart for AffectsAllies=).</dfn><var class="rules Warhead boolean yes">AffectsEnemies=</var></dd>
	</dl>

	<h4>InfDeathAnim</h4>
	<dl class="flaglist">
		<dt>[Warhead]&#9658;InfDeathAnim= (string, animation ID)</dt>
		<dd>Specifies the animation to display when an <span class="type">InfantryType</span> (with <code>NotHuman=no</code>) is killed by this warhead. Works in the same way as existing <code>InfDeath</code> animations except this flag allows you to specify an animation ID rather than an integer. Further more, the animation will be treated as the correct type (e.g. mutation or non-mutation) automatically, which means that you can now have any number of mutations that produce player-owned InfantryTypes. <a href="#MakeInfantryOwner">See MakeInfantryOwner</a> for how to control which player will gain control of 'mutated' infantry.<dfn class="new">New InfDeaths (InfDeathAnim= any animation, auto-detect mutation).</dfn><var class="rules Warhead animation">InfDeathAnim=</var></dd>
	</dl>

	<h3>Additional ArmorTypes and Verses</h3>
	<p>The new <code>[ArmorTypes]</code> section can be used to define new ArmorTypes for objects (in addition to the 11 existing ArmorTypes; none, flak, plate, light, medium, heavy, wood, steel, concrete, special_1 and special_2).</p>
	<pre>[ArmorTypes]
paper=steel
magic=11%</pre>

	<p><code>paper=steel</code> declares a new ArmorType called "paper" whose <code>Verses</code> on each warhead defaults to being the same as that warhead's <code>Verses</code> against the "steel" ArmorType.
	<code>magic=11%</code> declares a new ArmorType called "magic" whose <code>Verses</code> on all warheads defaults to 11%.<br>
	These ArmorTypes can be assigned to objects in the same way as the standard ArmorTypes (case-insensitively). Their susceptibility to specific warheads can be specified as follows:</p>
	<dl class="flaglist">
		<dt>[Warhead]&#9658;Versus.magic=150%</dt>
		<dd>makes this warhead very good at damaging objects with <code>Armor=magic</code>.<var class="rules Warhead float_-_multiplier">Versus.*=</var></dd>
	</dl>
	<p>Note that each individual ArmorType's versus value is specified using the new "Versus.*" flag, whereas the original 11 ArmorTypes versus values are specified using the original Verses flag (note Westwood's misspelling of "versus").</p>
	<p>The original <code>Verses=</code> flag parser no longer crashes if you specify less than 11 values.<dfn class="new">Additional armor types which can default to reacting like an existing armor type.</dfn><var class="rules">ArmorTypes</var></p>

	<h4>Warhead Verses' Special Values</h4>
	<p>The Verses flag has three special-case values that can be used to define additional behavior:</p>
	<ul class="nobullets">
		<li>0% means no force fire, no retaliate, no passive acquire</li>
		<li>1% means no retaliate, no passive acquire</li>
		<li>2% means no passive acquire</li>
	</ul>
	<p>These behaviors can now be toggled on or off independently of the damage multiplier (so you can now have a warhead that is 100% effective against an armor type but, at the same time, will not directly target a unit with that ArmorType).</p>
	<dl class="flaglist">
		<dt>[Warhead]&#9658;Versus.magic.ForceFire= (boolean)</dt>
		<dd>Whether or not this warhead is allowed to be force-fired on the "magic" ArmorType.<var class="rules Warhead boolean">Versus.*.ForceFire=</var></dd>
		<dt>[Warhead]&#9658;Versus.steel.Retaliate= (boolean)</dt>
		<dd>Whether or not this warhead is allowed to be used in retaliation against the "steel" ArmorType<var class="rules Warhead boolean">Versus.*.Retaliate=</var></dd>
		<dt>[Warhead]&#9658;Versus.clingfilm.PassiveAcquire= (boolean)</dt>
		<dd>Whether or not this warhead is allowed to be used to attack the "clingfilm" ArmorType automatically.<var class="rules Warhead boolean">Versus.*.PassiveAcquire=</var></dd>
	</dl>
	<p>Note <span class="gamename">Ares</span>' correct spelling of "acquire".<dfn class="new">Warhead verses special behaviours can be decoupled from Verses (ForceFire/Retaliate/PassiveAcquire).</dfn></p>

	<h3>MakeInfantryOwner</h3>
	<p>The original <code>MakeInfantry</code> logic would always grant ownership of newly-created infantry to the neutral side, unless the animation was caused by an <span class="type">InfantryType</span> being killed by an <code>InfDeath=9</code> warhead (in which case the killing player would get ownership of the new InfantryType). <span class="gamename">Ares</span> lets you choose which player will gain ownership, from one of several options.</p>
	<dl class="flaglist">
		<dt>[Animation]&#9658;MakeInfantryOwner= (enumeration &ndash; invoker|killer|victim|neutral|random)</dt>
		<dd>Specifies which house will own the resulting <span class="type">InfantryType</span> that gets created after this animation has played. The animation's re-mappable colors will be shown in that house's color.</dd>
	</dl>
	<p>Note that this is not a warhead property &ndash; it goes on the corresponding animation entry in <span class="filename">artmd.ini</span>. However, <code>MakeInfantryOwner</code> only works for specific animations; namely those invoked by <code>InfDeathAnim</code>, <code>DeathAnims</code> and map triggers. The deafult <code>MakeInfantryOwner</code> is 'invoker', which corresponds to a different player depending on the animation.</p>
	<ul class="nobullets">
		<li>For <code>InfDeathAnim</code>, 'invoker' represents 'killer' (the owner of the killing unit).</li>
		<li>For <code>DeathAnims</code>, 'invoker' represents 'victim' (the owner of the dying unit).</li>
		<li>For map triggers, 'invoker', 'killer' and 'victim' all represent the house that is considered to be the owner of the trigger.</li>
	</ul>
	<p>'random' will pick a random player from all players in the game, including neutral.<br>
	<span class="note">NB: Like <code>InfDeath=9</code>, all mutation animations will be rendered in the unit palette instead of anim.pal.</span><dfn class="new">MakeInfantry animations (InfDeathAnim, DeathAnims, map triggers) can choose who the owner will be as killer|victim|neutral|random.</dfn><var class="art Animation enumeration invoker">MakeInfantryOwner=</var></p>
	
	<h3>Super Weapons</h3>
	<p>In <span class="gamename">Yuri's Revenge</span>, there is very little you can do to change or add to the existing super weapons &ndash; most super weapon-related features are hard-coded to only work as designed for the original super weapons. <span class="gamename">Ares</span>, however, includes several new ways to customize existing super weapons as well as several wholly new super weapons.<dfn class="new">Super Weapons:</dfn></p>
	
	<h4>Building Animations</h4>
	<p>Buildings can display specific animations for when the attached super weapon is charging, is nearly charged (1 minute remaining in the normal game), is ready to be fired, and when it fires. However, in <span class="gamename">Yuri's Revenge</span>, these animations only work properly for the original super weapons. In <span class="gamename">Ares</span>, these will work for any super weapon.<dfn class="new">Building animations played correctly for new super weapons.</dfn></p>
	
	<h4>Cursors</h4>
	<p>Setting <code>Action=Custom</code> on a super weapon will allow you to specify custom mouse cursors for the super weapon, using the following flags:<dfn class="new">Custom cursors.</dfn></p>
	<dl class="flaglist">
		<dt>[SuperWeapon]&#9658;Cursor.Frame= (integer)</dt>
		<dd>Starting frame of the cursor from mouse.sha. Defaults to the Attack cursor.<var class="rules SuperWeapon integer">Cursor.Frame=</var></dd>
		<dt>[SuperWeapon]&#9658;Cursor.Count= (integer)</dt>
		<dd>Number of frames in the animated cursor.<var class="rules SuperWeapon integer">Cursor.Count=</var></dd>
		<dt>[SuperWeapon]&#9658;Cursor.Interval= (integer)<var class="rules SuperWeapon integer xxxnum5">Cursor.Interval=</var></dt>
		<dd>How often to animate the cursor? Default is 5.</dd>
		<dt>[SuperWeapon]&#9658;Cursor.MiniFrame= (integer)</dt>
		<dd>Same as <code>Cursor.Frame</code>, except this is for the mouse cursor when positioned on the minimap.<var class="rules SuperWeapon integer">Cursor.MiniFrame=</var></dd>
		<dt>[SuperWeapon]&#9658;Cursor.MiniCount= (integer)</dt>
		<dd>Same as <code>Cursor.Count</code>, except this is for the mouse cursor when positioned on the minimap.<var class="rules SuperWeapon integer">Cursor.MiniCount=</var></dd>
		<dt>[SuperWeapon]&#9658;Cursor.HotSpot= (HotSpot X, HotSpot Y)</dt>
		<dd>Specifies the coordinates on the cursor that are considered to be the 'tip' &ndash; that is, the point from which the click event will handled. HotSpot X should be one of "Left", "Center" or "Middle". HotSpot Y should be one of "Top", "Middle" or "Bottom".<br>
		For example, <code>Cursor.HotSpot=Left,Top</code> will treat the top-left corner of the cursor as the tip. Default is "Center,Middle".</dd>
	</dl>
	<p>All of the above "<code>Cursor.</code>" flags have a corresponding "<code>NoCursor.</code>" flag, which allows you to specify the cursor that will be displayed then the mouse pointer is positioned over a point where the super weapon cannot be fired (e.g. the Force Shield cannot be fired over empty ground, so will display an alternate cursor to indicate this).<var class="rules SuperWeapon list_of_2 enumerationsCenter_Middle">Cursor.HotSpot=</var></p>
	<dl class="flaglist">
		<dt>[SuperWeapon]&#9658;NoCursor.Frame=<br>
		[SuperWeapon]&#9658;NoCursor.Count=<br>
		[SuperWeapon]&#9658;NoCursor.Interval=<br>
		[SuperWeapon]&#9658;NoCursor.MiniFrame=<br>
		[SuperWeapon]&#9658;NoCursor.MiniCount=<br>
		[SuperWeapon]&#9658;NoCursor.HotSpot=</dt>
		<dd>The "<code>NoCursor.</code>" flags default to the same value as their "<code>Cursor.</code>" counterparts.<var class="rules SuperWeapon integer">NoCursor.Count=</var><var class="rules SuperWeapon integer">NoCursor.Frame=</var><var class="rules SuperWeapon list_of_2 enumerationsCenter_Middle">NoCursor.HotSpot=</var><var class="rules SuperWeapon integer xxxnum5">NoCursor.Interval=</var><var class="rules SuperWeapon integer">NoCursor.MiniCount=</var><var class="rules SuperWeapon integer">NoCursor.MiniFrame=</var></dd>
	</dl>
	
	<h4>Cost</h4>
	<p>The firing of a super weapon can now add or subtract credits from the firing player's cash reserve.</p>
	<dl class="flaglist">
		<dt>[SuperWeapon]&#9658;Money.Amount= (integer &ndash; credits)</dt>
		<dd>This many credits are added to the firing player's account when the super weapon is fired. Use a negative number to subtract credits.<var class="rules SuperWeapon integer_-_credits xxxnum0">Money.Amount=</var></dd>
	</dl>
	<p><span class="note">NB: Players are not prevented from firing the super weapon if they do not have sufficient funds for the Money.Amount being subtracted.</span><dfn class="new">Money deductable when firing a superweapon.</dfn></p>
	
	<h4>Animation/Sound</h4>
	<dl class="flaglist">
		<dt>[SuperWeapon]&#9658;SW.Animation= (animation)</dt>
		<dd>The animation to display at the super weapon's target cell.<var class="rules SuperWeapon animation">SW.Animation=</var></dd>
		<dt>[SuperWeapon]&#9658;SW.AnimationHeight= (integer)</dt>
		<dd>How high above the target cell to display the animation.<dfn class="new">Custom animation played at target cell.</dfn><var class="rules SuperWeapon integer">SW.AnimationHeight=</var></dd>
	</dl>
	
	<h4>Targeting</h4>
	<dl class="flaglist">
		<dt>[SuperWeapon]&#9658;SW.FireIntoShroud= (boolean)</dt>
		<dd>Whether or not this super weapon is allowed to fire into an unexplored area of the map. Default is yes.<dfn class="new">FireIntoShroud optional.</dfn><var class="rules SuperWeapon boolean">SW.FireIntoShroud=</var></dd>
	</dl>
	
	<h4>EVA Events</h4>
	<dl class="flaglist">
		<dt>[SuperWeapon]&#9658;EVA.Detected= (EVA event)</dt>
		<dd>The EVA event that will be triggered when the super weapon building is constructed (the EVA event is not played for the owner of the building).<var class="rules SuperWeapon EVA event">EVA.Detected=</var></dd>
		<dt>[SuperWeapon]&#9658;EVA.Ready= (EVA event)</dt>
		<dd>The EVA event that will be triggered when the super weapon is ready to fire (the EVA event is only played for the owner of the super weapon).<var class="rules SuperWeapon EVA event">EVA.Ready=</var></dd>
		<dt>[SuperWeapon]&#9658;EVA.Activated= (EVA event)</dt>
		<dd>The EVA event that will be triggered when the super weapon is fired.<var class="rules SuperWeapon EVA event">EVA.Activated=</var></dd>
	</dl>
	<p><span class="note">NB: There is a known bug that can cause the EVA events to be played incorrectly.</span><dfn class="new">Custom EVA events.</dfn></p>
	
	<h4>Enhanced Super Weapon Types</h4>
	<h5><code>Type=ParaDrop</code></h5>
	<p>The original flags that control the units provided by the generic paradrop super weapons (AllyParaDropInf, SovParaDropInf and YuriParaDropInf) only accept InfantryTypes. If you try to include a <span class="type">VehicleType</span> via these lists then the game will create a new <span class="type">InfantryType</span> instead - with the same parameters as the existing <span class="type">VehicleType</span> - ultimately resulting in an invisible <span class="type">InfantryType</span> being delivered in the paradrop.</p>
	<p>With <span class="gamename">Ares</span>, there are 2 new side-specific flags (ParaDrop.Types and ParaDrop.Num) that override the old flags. These new flags will accept <span class="type">VehicleTypes</span> as well as InfantryTypes.</p>
	<pre>
		[Side]&#9658;ParaDrop.Types=E1,MTNK,FV
		[Side]&#9658;ParaDrop.Num=6,2,1
	</pre>
	<p><span class="note">NB: Because the new flags are side-specific, this means there is still a limit of 1 unique paradrop set per side. This will be addressed in the future.</span><dfn class="new">ParaDrops can include vehicles.</dfn></p>
	
	<h5><code>Type=SpyPlane</code></h5>
	<dl class="flaglist">
		<dt>[SuperWeapon]&#9658;SpyPlane.Type= (AircraftType)</dt>
		<dd>The <span class="type">AircraftType</span> that will be sent as a spy plane. Defaults to SPYP.<var class="rules SuperWeapon AircraftType SPYP">SpyPlane.Type=</var></dd>
		<dt>[SuperWeapon]&#9658;SpyPlane.Count= (integer)</dt>
		<dd>The number of spy planes to be sent out. Defaults to 1.<var class="rules SuperWeapon integer xxxnum1">SpyPlane.Count=</var></dd>
		<dt>[SuperWeapon]&#9658;SpyPlane.Mission= (mission)</dt>
		<dd>The mission that the aircraft will be sent on (Guard, Attack, Move, etc). Defaults to SpyPlane_Approach.<dfn class="new">SpyPlane can now specify which AircraftType, how many, and what mission to perform.</dfn><var class="rules SuperWeapon mission SpyPlane_Approach">SpyPlane.Mission=</var></dd>
	</dl>
	
	<h5><code>Type=Nuke</code></h5>
	<dl class="flaglist">
		<dt>[SuperWeapon]&#9658;Nuke.Sound= (sound)</dt>
		<dd>The sound to use for the Nuke siren. Defaults to <code>[AudioVisual]&#9658;DigSound=</code>.<dfn class="new">Custom nuke siren sound.</dfn><var class="rules SuperWeapon sound AudioVisual____DigSound">Nuke.Sound=</var></dd>
	</dl>

	<h4>New Super Weapon Types</h4>
	<p><span class="note">NB: The AI cannot use the new SuperWeapon Types yet. Control similar to RockPatch's <code>AITargetingType=</code> will be added soon.</span></p>

	<h5><code>Type=SonarPulse</code></h5>
	<p>The Sonar Pulse is a variation of the original Red Alert Sonar Pulse - it can only be fired into water cells and will cause any cloaked units situated on a water cell to temporarily decloak.</p>
	<dl class="flaglist">
		<dt>[SuperWeapon]&#9658;SonarPulse.Range= (integer)</dt>
		<dd>The radius, in cells, that the decloak effect will be applied.<var class="rules SuperWeapon integer_-_cells">SonarPulse.Range=</var></dd>
		<dt>[SuperWeapon]&#9658;SonarPulse.Delay= (integer)</dt>
		<dd>The duration, in frames, that the decloak effect will last.<var class="rules SuperWeapon integer_-_frames">SonarPulse.Delay=</var></dd>
	</dl>
	<p><span class="note">NB: If the affected unit gained its cloaking ability via VeteranAbilities or EliteAbilities then it will only decloak for a moment, as opposed to the full duration specified by the super weapon.</span><dfn class="new">New super weapon type: SonarPulse (briefly reveals cloaked units).</dfn></p>
	
	<h5><code>Type=GenericWarhead</code></h5>
	<p>The Generic Warhead super weapon will detonate the specified warhead at the target cell.</p>
	<dl class="flaglist">
		<dt>[SuperWeapon]&#9658;GenericWarhead.Warhead= (warhead)</dt>
		<dd>The warhead that will be detonated when in the target cell when the super weapon is fired. Note the warhead is detonated in a cell, not on a unit, so chances are you will want to set a <code>CellSpread</code> on the warhead to make sure the desired targets (especially InfantryTypes) are affected.<var class="rules SuperWeapon warhead">GenericWarhead.Warhead=</var></dd>
		<dt>[SuperWeapon]&#9658;GenericWarhead.Damage= (integer)</dt>
		<dd>The amount of damage that will be dealt by the warhead.<dfn class="new">New super weapon type: GenericWarhead (detonate any warhead at target cell).</dfn><var class="rules SuperWeapon integer_-_damage">GenericWarhead.Damage=</var></dd>
	</dl>
	Don't forget that the <span class="type">BuildingType</span> will need <code>DamageSelf=yes</code> set (just like the Soviet Nuclear Missile Silo) if you want the warhead to be capable of damaging the firing building.
	
	<h5><code>Type=UnitDelivery</code></h5>
	<p>The Unit Delivery super weapon will create the specified unit(s) in the target cell. This uses the CellSpread model to place the units.</p>
	<dl class="flaglist">
		<dt>[SuperWeapon]&#9658;SW.Deliver= (list of TechnoTypes)</dt>
		<dd>The list of units that will be delivered. This works for infantry, vehicles, aircraft and buildings.<var class="rules SuperWeapon list_of_TechnoTypes">SW.Deliver=</var></dd>
		<dt>[SuperWeapon]&#9658;SW.DeliverBuildups= (boolean)</dt>
		<dd>Whether or not buildings delivered by this super weapon should play their buildup animation prior to becoming available.<var class="rules SuperWeapon boolean no">SW.DeliverBuildups=</var></dd>
	</dl>
	<p>All objects are placed on the ground, including aircraft. Flying units that never land (e.g. the Rocketeer and Kirovs) will take off.<br>
	If a cell is occupied, the super weapon will retry on the next cell and so on, until the object gets placed. Once the first unit is placed, this process starts again for the next item in the list. Infantry squads are grouped in a single cell. The search will skip an item if it has not been placed after testing 100 cells.</p>
	<p>You can mix in naval units and they will be placed where they can normally exist.</p>
	<p>If you have more than one building, the resulting placement might look odd.</p>
	<p>The actual delivery of the units happens all at once, on the 20th frame after firing the super weapon. This delayed-effect logic will most likely be customizable in future and so, in future, the delay for this super weapon may default to a different amount.<dfn class="new">New super weapon type: UnitDelivery (create unit(s) at target cell).</dfn></p>
	
	<h5><code>Type=Firestorm</code></h5>
	<p>
		This superweapon is a recreation of the <span class="gamename">Tiberian Sun</span> Firestorm superweapon.<br>
		When activated, all structures owned by the firing player that have <code>Firestorm.Wall=yes</code> set will emit an energy field, blocking all hostile projectiles (except those with <code>SubjectToFirestorm=no</code> set) from passing through. The energy field also destroys any friend or foe unlucky (or stupid) enough to come into direct contact with active cells.<br>
		<br>
		BuildingTypes with <code>Firestorm.Wall=yes</code> set will act as a section of the Firestorm Wall and auto-connect to other nearby pieces (check the original building's SHP from <span class="gamename">Tiberian Sun</span> to see how the art is controlled).<br>
		<br>
		This Superweapon uses the old Charge-Drain logic: once activated, the effect will persist for a duration determined by <code>[General]&#9658;ChargeToDrainRatio</code>, after which it will automatically shut down and the superweapon will restart its charging process. Whilst the effect is active you can click the super weapon button again to manually deactivate it, thus allowing the recharge process to begin earlier and finish faster. Refer to <a href="http://modenc.renegadeprojects.com/ChargeToDrainRatio">ModEnc</a> for more information about Charge-Drain logic.<br>
		<br>
		In <span class="gamename">Tiberian Sun</span>, the Charge-Drain feature was disableable through an INI flag (<code>[SuperWeapon]&#9658;UseChargeDrain=no</code>) however: <span class="gamename">Ares</span> forces this logic to be used regardless of the value of that flag. <span class="gamename">Ares</span> also forces this super weapon to ignore its assigned <code>Action</code>, if any, as this is required to make it activate from a single click of the sidebar icon.<br>
		<span class="note">NB: The animations used by this logic are temporarily hard-coded to "FSIDLE", "FSGRND" and "FSAIR", as was used in <span class="gamename">Tiberian Sun</span>.</span><br>
		<span class="note">NB: The AI has a lot of problems with targets behind an active Firestorm Wall, although this should not be a major problem due to the relatively small amount of game time that the Wall is active for.</span>
		<dfn class="restored">Firestorm Wall</dfn>
		<var class="rules BuildingType boolean no">Firestorm.Wall=</var>
		<var class="rules Projectile boolean no">SubjectToFirestorm=</var>
	</p>

	<h3>Survivors</h3>
	<p>In the original Red Alert, pilots would parachute from destroyed aircraft. <span class="gamename">Ares</span> reintroduces this feature along with some additional improvements, all of which are customizable.</p>
	<p>AircraftTypes and <span class="type">VehicleTypes</span> have the option of spawning a pilot (or driver) when they are destroyed. In order for a pilot to be spawned from an airborne unit, the ground beneath the destroyed unit must be clear.</p>
	<p>The following flags control the percent chance of a survivor being spawned, and the type of unit that that survivor will be.</p>
	<dl class="flaglist">
		<dt>[Unit]&#9658;Survivor.Side#= (InfantryType) (where # is the zero-based index of the side &ndash; e.g. 0 for Allied, 1 for Soviet, 2 for Yuri)</dt>
		<dd>The <span class="type">InfantryType</span> that can emerge from this unit as a survivor when the unit was owned by the corresponding side. For example, <code>Survivor.Side0=E1</code> would cause the spawned survivor (if any) to be a GI when the destroyed unit was owned by an Allied player.<br>
		Defaults to the owning side's <code>Crew=</code>.<var class="rules TechnoType InfantryType">Survivor.Side#=</var></dd>
		<dt>[Unit]&#9658;Survivor.PilotCount= (integer)</dt>
		<dd>The number of pilots that will attempt to be spawned when this unit is destroyed (provided that the ground beneath the destroyed unit is clear).<br>
		Defaults to 1 if the unit has <code>Crewed=yes</code> set, 0 otherwise.<var class="rules TechnoType integer">Survivor.PilotCount=</var></dd>
		<dt>[Unit]&#9658;Survivor.RookiePilotChance= (integer between 0 and 100)<br>
		[Unit]&#9658;Survivor.VeteranPilotChance= (integer between 0 and 100)<br>
		[Unit]&#9658;Survivor.ElitePilotChance= (integer between 0 and 100)</dt>
		<dd>The percent chance that each individual pilot will be spawned when this unit is destroyed. <br>
		Defaults to <code>[General]&#9658;CrewEscape=50%</code><var class="rules TechnoType integer">Survivor.RookiePilotChance=</var><var class="rules TechnoType integer">Survivor.VeteranPilotChance=</var><var class="rules TechnoType integer">Survivor.ElitePilotChance=</var></dd>
		<dt>[Unit]&#9658;Survivor.RookiePassengerChance= (integer between 0 and 100)<br>
		[Unit]&#9658;Survivor.VeteranPassengerChance= (integer between 0 and 100)<br>
		[Unit]&#9658;Survivor.ElitePassengerChance= (integer between 0 and 100)</dt>
		<dd>Determines the percent chance that each of the unit's passengers (if any) will survive. Rookie/Veteran/Elite refers to the veteran level of the transport unit &ndash; a unit with a higher veteran level could be made to have a greater (or lesser) chance of allowing its passengers to survive. Passengers will be spawned in the cells around the destroyed unit and, so, if these cells are not clear then the passengers will not be spawned.<var class="rules TechnoType integer xxxnum-1">Survivor.RookiePassengerChance=</var><var class="rules TechnoType integer xxxnum-1">Survivor.VeteranPassengerChance=</var><var class="rules TechnoType integer xxxnum-1">Survivor.ElitePassengerChance=</var></dd>
	</dl>
	<p>These flags default to a special-case value of -1 which means "use the original game logic" (i.e. land-based vehicles such as the Battle Fortress will eject their passengers but jumpjet vehicles such as the Nighthawk will not).<br>
	Note that, for airborne vehicles such as the Nighthawk, there is no way to say "passengers can survive on the ground, but aren't allowed to paradrop from the air" &ndash; if they can survive they can survive.</p>
	<p>If either the pilots or any passengers are 'killed' because they were not spawned (i.e. because the ground was not clear or the random chance did not luck in) then they count as having been killed by the unit that killed the transport. If <code>Survivor.PilotChance=0</code> then the pilots will not count as having been killed (however, passengers will always count as having been killed, even if <code>Survivor.PassengerChance=0</code>).</p>
	<p>Spawned pilots will be spawned with 50% of their maximum health and the same amount of experience as the destroyed unit had. Passengers will emerge with both their health and their experience unchanged.<dfn class="new">Percent chance for pilots and/or passengers to emerge/parachute from destroyed vehicles/aircraft.</dfn></p>

	<h3>Operator</h3>
	<p>Any TechnoType can now require a specific <span class="type">InfantryType</span> to be among its passengers before it will function.</p>
	<dl class="flaglist">
		<dt>[TechnoType]&#9658;Operator= (string, either an <span class="type">InfantryType</span> or "_ANY_")</dt>
		<dd>Specifies the <span class="type">InfantryType</span> that must be among the TechnoType's passengers before the TechnoType will function. If "_ANY_" (sans quotes) is specified then it doesn't matter which <span class="type">InfantryType</span> is inside as long as some <span class="type">InfantryType</span> is.<var class="rules TechnoType InfantryType">Operator=</var></dd>
	</dl>
	<p>On the TechnoType you will need to set <code>Passengers=1</code> (or higher) and <code>SizeLimit=1</code> (or higher).</p>
	<p>For <span class="type">BuildingTypes</span> you will also need to set <code>InfantryAbsorb=yes</code>.</p>
	<p>If the needed passenger is not inside then the TechnoType will power down in a similar fashion to the Robot Tank when the Robot Control Centre is offline &ndash; the unit will not be able to move or fire.</p>
	<p>BuildingTypes without their Operator will not be able to fire their weapon, if they have one.</p>
	<p>No other building-specific functions will be affected (e.g. providing power, being a factory, undeploying, super weapons, radar, etc).</p>
	<p>Mirage Tanks without their Operator will still maintain their disguise.</p>
	<ul>
		<li>Operator logic has no effect on Service Depots &ndash; the Operator cannot enter.</li>
		<li>Operator logic has no effect on deployed Siege Choppers &ndash; an Operator is never needed.</li>
		<li>Operator logic will render Refineries unusable because the Operator will not be able to enter and the Harvester will not dock.</li>
		<li>Operator logic will render <span class="type">InfantryTypes</span> unusable because <span class="type">InfantryTypes</span> cannot have passengers.</li>
		<li>Operator logic cannot be used on vehicles that deploy into buildings (e.g. MCVs) because the passenger deploy function takes precedence over <code>DeploysInto=</code>.</li>
		<li>Operator logic will render <span class="type">VehicleTypes</span> with <code>BallonHover=yes</code> unusable because they will power down in mid-air without landing, so it is impossible to get <li>an Operator into them (even flying infantry like the Rocketeer cannot enter them).</li>
		<!-- Operator logic should not be used on Robot Tanks because they will behave erratically if they contain their Operator and the Robot Control Centre goes offline.<br> This should be fixed by now -->
		<li>Operator logic cannot be used on <span class="type">AircraftTypes</span> for 2 reasons:
			<ol>
				<li>Aircraft are produced in a place where the Operator cannot board them. You can issue a move order to an Operator-less aircraft but they will immediately crash.</li>
				<li>Assuming you manage to get an aircraft to a place where the Operator can board it, if the aircraft can attack then the act of attacking will cause the passengers (including the Operator) to parachute from the aircraft - whereupon it will crash.</li>
			</ol>
		</li>
	</ul>
	<p><span class="note">NB: The AI behaves unpredicatably when faced with units that require Operators and may not be subject to certain effects. You should prevent the AI from building anything that requires an Operator.</span><dfn class="new">Vehicles and buildings can be made to require an operator (driver) before they will function.</dfn></p>

	<h3>Solid Buildings</h3>
	<p>Buildings can now be made 'solid' to projectiles, meaning that projectiles will detonate when hitting a building rather than passing through it.<br>
	In <span class="filename">rulesmd.ini</span>:</p>
	<dl class="flaglist">
		<dt>[Projectile]&#9658;SubjectToBuildings= (boolean)</dt>
		<dd>Whether or not this projectile can be blocked by solid buildings. Defaults to no.<var class="rules Projectile boolean no">SubjectToBuildings=</var></dd>
	</dl>
	<p>In <span class="filename">artmd.ini</span>:</p>
	<dl class="flaglist">
		<dt>[BuildingArt]&#9658;SolidHeight= (integer &ndash; cells)</dt>
		<dd>How tall the solid part of the building is considered to be, measured in cells (each cell has a height of 256 leptons), so buildings with a large amount of clear space near their top can allow projectiles to fly through that space. Negative values (e.g. -1) tell the game to consider the building's full <code>Height</code> as solid. Default is zero, meaning the building is not at all solid (as per the normal game).<br>
		<span class="note">NB: The solid building logic does not lend itself well to non-rectangular buildings, such as the Paris Tower or Space Needle.</span><var class="art UnitArt integer_-_height_in_cells xxxnum0">SolidHeight=</var></dd>
	</dl>
	<p><span class="note">NB: The solid building logic does not lend itself well to non-rectangular buildings, such as the Paris Tower or Space Needle.</span><dfn class="new">Buildings can be made solid (like walls) to certain projectiles.</dfn></p>

	<h3>Urban Combat &ndash; Trenches</h3>
	<p>This section covers several new features that were designed together in order to allow mod authors to add occupiable trenches to the game.<br>
	These features do not all have to be used together to implement trenches though - each feature has been designed to be customizable and can be used separately.<br>
	<span class="note">NB: This means that these individual features do not distinguish between buildings that are a trench and buildings that are not. It is important that you understand how each new flag works - both on its own and in conjunction with other trench-related flags.</span><dfn class="new">Numerous features added to support trenches:</dfn></p>

	<h4>Pass Through</h4>
	<p>Urban Combat buildings can now specify what percentage of attacks against them will 'pass through' to the occupants inside &ndash; damaging them rather than the building itself.<dfn class="new">Weapons can be made to pass through urban combat buildings to the occupants inside (including fatal chance and damage modifier).</dfn></p>
	<dl class="flaglist">
		<dt>[BuildingType]&#9658;UC.PassThrough= (float - chance)</dt>
		<dd>The percentage of shots that will pass through to the occupants (and therefore not damage this building). Defaults to zero percent (i.e. all shots damage the building / no shots damage the occupants). When there are no occupants inside then <code>UC.PassThrough</code> will be ignored (i.e. all shots damage the building).<var class="rules TechnoType float_-_chance">UC.PassThrough=</var></dd>
		<dt>[BuildingType]&#9658;UC.FatalRate= (float - chance)</dt>
		<dd>In the event that a shot has passed through, the percentage of those shots that will instantly kill one occupant, disregarding the weapon entirely. Defaults to zero percent.<var class="rules TechnoType float_-_chance">UC.FatalRate=</var></dd>
		<dt>[BuildingType]&#9658;UC.DamageMultiplier= (float - multiplier)</dt>
		<dd>If a shot has passed through but isn't necessarily fatal then one occupant will be damaged. The damage dealt by the weapon will be multiplied by <code>UC.DamageMultiplier</code>. Defaults to 100% (i.e. no change to the damage dealt by the weapon).<var class="rules TechnoType float_-_multiplier">UC.DamageMultiplier=</var></dd>
		<dt>[Projectile]&#9658;SubjectToTrenches= (boolean)</dt>
		<dd>Whether or not this projectile will override the normal <code>UC.PassThrough</code> chance on targeted buildings. If the projectile has <code>SubjectToTrenches=no</code> set, and the target building has UC.PassThrough set greater than zero, then the building will be treated as if it had <code>UC.PassThrough=100%</code>, when hit by this projectile. If <code>SubjectToTrenches=yes</code> is set (default), then the normal <code>UC.PassThrough</code> chance will be used when the building is hit by this projectile.<var class="rules Projectile boolean no">SubjectToTrenches=</var></dd>
	</dl>
	<p>SubjectToTrenches was very much intended for trenches - a Grenadier, for example, would easily be able to drop their grenade into an open trench and would therefore definitely harm the occupants.<br>
	<span class="note">NB: The name 'SubjectToTrenches' is misleading if you are not thinking about trenches. This has an effect on all occupiable buildings with UC.PassThrough > 0%.</span></p>
	<p class="center">
		<img style="border-width: 3px;" src="./manual_images/subjecttotrenches.png" alt="Illustration of different SubjectToTrenches values">
		<img style="border-width: 3px;" src="./manual_images/subjecttotrenches_passthrough.png" alt="Illustration of different UC.PassThrough values">
	</p>

	<h4>Squatters' Rights</h4>
	<p>You can now specify that Battle Bunkers, for example, can be captured by enemy infantry just by having them walk in and garrison the building as if it were their own.</p>
	<dl class="flaglist">
		<dt>[BuildingType]&#9658;Bunker.Raidable= (boolean)</dt>
		<dd>Whether or not this building can be garrisoned by an enemy player's infantry, provided the building is not already occupied.<var class="rules TechnoType boolean no">Bunker.Raidable=</var></dd>
	</dl>
	<p>If <code>Bunker.Raidable=yes</code> is set and the building is empty then the building can be garrisoned by any player's infantry. When another player garrisons the building, ownership is transferred to that player. At this point the building can only be further garrisoned by the player whose troops are inside. If the occupants leave the building then ownership of the building is transferred back to its original owner. Whilst a building is held by a player that is not the "true" owner, that building cannot be sold.<dfn class="new">Unoccupied player buildings can be garrisoned by enemy infantry.</dfn></p>
	
	<h4>Advanced Rubble</h4>
	<p>If you really hit a trench hard enough to destroy it you're only doing one of two things; either you're turning a small hole into a larger hole, or you're making it collapse. Either way, you don't really remove the trench from the battlefield - just render it unusable. It will be easier to re-dig a trench there than on untouched soil, and, on the other hand, you can't just build there like nothing ever happened.</p>
	<p>Advanced Rubble is implemented in a similar way to other upgrade systems in <span class="gamename">Ares</span>:</p>
	<dl class="flaglist">
		<dt>[BuildingType]&#9658;Rubble.Destroyed= (BuildingType)</dt>
		<dd>The new <span class="type">BuildingType</span> that this <span class="type">BuildingType</span> will transform into upon destruction. Buildings that are created via <code>Rubble.Destroyed</code> will have the following properties forced upon them:
		<pre>Capturable=no
TogglePower=no
Unsellable=yes
ClickRepairable=no
CanBeOccupied=no</pre>
		The building will be created with 99% of its maximum <code>Strength</code>. This, combined with <code>ClickRepairable=no</code>, ensures that Engineers will get a repair cursor over the building.<var class="rules TechnoType BuildingType">Rubble.Destroyed=</var></dd>
		<dt>[BuildingType]&#9658;Rubble.Intact= (BuildingType)</dt>
		<dd>The new <span class="type">BuildingType</span> that this <span class="type">BuildingType</span> will transform into when it is repaired.<var class="rules TechnoType BuildingType">Rubble.Intact=</var></dd>
	</dl>
	<p>Note that Engineers will not be 'used up' by this repair process - they keep existing outside of the trench. This is very much intended for trenches: an Engineer would not be repairing/rebuilding an entire building, just re-digging a trench so his work would not be too exhausting.<br>
	<span class="note">NB: You should ensure that the in-tact trench and the collapsed trench both have the same Foundation. Otherwise, if the necessary cells are not clear, the replacement <span class="type">BuildingType</span> will not get created.</span><dfn class="new">Buildings can be converted into a different building on destruction (rubble) and back again on repair by an engineer.</dfn></p>
	<p><em>Known bug: <a href="http://bugs.renegadeprojects.com/view.php?id=850">#850</a></em></p>

	<h4>Traversing Trenches</h4>
	<p>A major concept of trenches is the ability for infantry to move from one segment of a trench to the next, on the basis that adjacent segments are connected and, in essence, the same trench.</p>
	<dl class="flaglist">
		<dt>[BuildingType]&#9658;IsTrench= (string - trench type ID)</dt>
		<dd>Specifies a unique name for this particular trench so that the game knows that it is a trench for traversal purposes, and allows occupants to transfer between segments of the same trench type.<var class="rules TechnoType string_-_trench_type_ID">IsTrench=</var></dd>
	</dl>
	<p>For example, let's say you have <code>IsTrench=AlliedModern</code>. You have 2 segments of this trench adjacent to one another and one of these segments is garrisoned. If you select the garrisoned segment and then position the mouse cursor over the adjacent segment, you will get an 'enter' cursor over the adjacent segment. Clicking now with the enter cursor showing will transfer the occupants from the garrisoned segment into the adjacent segment.<br>
	<span class="note">NB: There is no special image-handling with IsTrench logic (yet); you will not get nice rows of trenches with proper joins/closed off ends like you do with, say, walls or Laser Fences.</span><dfn class="new">Infantry can jump from one urban combat building to an adjacent one.</dfn></p>

	<h3>Custom Building Foundations</h3>
	<p>Building Foundations can now be any shape and size, not just the few predefined options previously available. For example, you can now recreate the old Red Alert Repair Depot foundation. The INI coding is rather complex, so instead of writing it manually, it's recommended to use the <a href="custom_foundation.html">Custom Foundation Generator</a> developed by Renegade.</p>
	<p>When creating foundations, don't forget to create the outlines.</p>
	<p><span class="note">NB: War Factories are hard-coded to use the unit exit paths from the original game so changing the foundation for these buildings is not recommended. The preferred exit point for a unit exiting a War Factory is hard-coded to be the 11th cell of the Outline.</span> <dfn class="new">Buildings can have any size and shape of custom foundations.</dfn></p>

	<h3>Prerequisites</h3>
	<p>The prerequisite system has been enhanced in several ways. New flags are described below, and an issue has been resolved with regard to <a href="#BuildingTypeUpgradesAreNotViablePrerequisites">upgrades as prerequisites</a> (see Type 2 Fixes).<dfn class="new">Prerequisites:</dfn></p>
	<dl class="flaglist">
		<dt>[Unit]&#9658;Prerequisite.RequiredTheaters= (list of theater names)</dt>
		<dd>The map theaters in which the unit is available. Defaults to all theaters. For example, if only the SNOW theater were specified then the unit would only be available on arctic maps. This allows you to implement, for example, the <code>AlternateArcticArt</code> functionality used on the Navy SEAL, but for all unit types and all theaters (however this may present challenges for your AI). The theater names are:
		<ul>
			<li>TEMPERATE - most maps</li>
			<li>SNOW - arctic/snowy maps</li>
			<li>URBAN - some city maps</li>
			<li>DESERT - some desert maps, older maps use Temperate</li>
			<li>LUNAR - Soviet Mission 6</li>
			<li>NEWURBAN - most YR urban maps</li>
		</ul>
		<code>PrerequisiteOverride</code> does <em>not</em> override <code>Prerequisite.RequiredTheaters</code>.<dfn class="new inset">Units can require the map to be a specific theater (desert/snow/lunar/etc).</dfn><var class="rules TechnoType list_of_theater names">Prerequisite.RequiredTheaters=</var></dd>
		<dt>[Unit]&#9658;Prerequisite.Negative= (list of BuildingTypes)</dt>
		<dd>The buildings that preclude construction of the unit. If the player owns one or more of the buildings on this list then the unit will not be available.<br>
		<code>PrerequisiteOverride</code> does <em>not</em> override <code>Prerequisite.Negative</code>.<dfn class="new inset">PrerequisiteNegative makes a unit unavailable if a building on the list is owned.</dfn><var class="rules TechnoType list_of_BuildingTypes">Prerequisite.Negative=</var></dd>
		<dt>[Unit]&#9658;Prerequisite.Lists= (integer)</dt>
		<dd>Specifies how many extra Prerequisite lists are available (see below). Defaults to zero.<var class="rules TechnoType integer">Prerequisite.Lists=</var></dd>
		<dt>[Unit]&#9658;Prerequisite.List#= (list of BuildingTypes) (where # is the 1-based index of the prerequisite list, the maximum specified by <code>Prerequisite.Lists</code>)</dt>
		<dd>Each prerequisite list acts as an independent copy of the existing <code>Prerequisite</code> flag. For example, if you set <code>Prerequisite=GAPILE,GATECH</code> and <code>Prerequisite.List1=NAHAND,NATECH</code> then the unit will be available to any player who owns both an Allied Barracks and Battle Lab, or a Soviet Barracks and Battle Lab (a minimum of one of the prerequisite lists must be satisfied).<br>
		<code>Prerequisite.List0</code>, if specified, overrides the existing <code>Prerequisite</code> flag.<dfn class="new inset">Multiple separate prerequisite lists - a unit can require any one of several sets of buildings.</dfn><var class="rules TechnoType list_of_BuildingTypes">Prerequisite.List#=</var></dd>
		<dt>[Unit]&#9658;Prerequisite.StolenTechs= (list of integers)</dt>
		<dd>The list of stealable technology types that must be stolen before this object can be built. See <a href="#StolenTechnology">Stolen Technology</a> for more information.<dfn class="new inset">New StolenTech requirements.</dfn><var class="rules TechnoType list_of_integers">Prerequisite.StolenTechs=</var></dd>
	</dl>
	<p>Below is a flowchart of the current prerequisite system. Blue sections are unchanged from the original system. Pink sections have been modified or added by <span class="gamename">Ares</span>.</p>
	<img id="flowchart_png" src="./manual_images/prerequisite_system.png" alt="Flowchart of the current prerequisite system" style="border: none;">
	<object id="flowchart_svg" class="blockcenter" data="./manual_images/prerequisite_system.svg" type="image/svg+xml" width="655px" height="830px"><param name="src" value="./manual_images/prerequisite_system.svg"></object>
	<!--[if lt IE 9]>
		<p><strong>If you had a less crappy browser, you could see this flowchart in a vector format (SVG), rather than a bitmap (PNG). <a href="http://getfirefox.com/">Time to switch.</a></strong></p>
	<![endif]-->

	<h4>Generic Prerequisite Groups</h4>
	<p>You can now create custom generic prerequisite groups like the existing <code>POWER</code> (<code>PrerequisitePower</code>), <code>FACTORY</code> (<code>PrerequisiteFactory</code>), <code>BARRACKS</code> (<code>PrerequisiteBarracks</code>), <code>RADAR</code> (<code>PrerequisiteRadar</code>), <code>TECH</code> (<code>PrerequisiteTech</code>) and <code>PROC</code> (<code>PrerequisiteProc</code> and <code>PrerequisiteProcAlternate</code>) groups.</p>
	<p>To create new groups simply include the new <code>[GenericPrerequisites]</code> section and add flags with the format <code>GROUPNAME=</code> (list of BuildingTypes). For example:</p>
	<pre>[GenericPrerequisites]
NAVALYARD=GAYARD,NAYARD,YAYARD
CONYARD=GACNST,NACNST,YACNST
AIRFORCE=GAAIRC,AMRADR</pre>
	<p>If you declare any of the existing groups (<code>POWER</code>/<code>FACTORY</code>/<code>BARRACKS</code>/<code>RADAR</code>/<code>TECH</code>/<code>PROC</code>) then the <span class="type">BuildingTypes</span> specified in the <code>[GenericPrerequisites]</code> section will be used <em>instead</em> of those specified on the original <code>PrerequisiteGroup</code> flags (i.e. <code>[GenericPrerequisites]&#9658;POWER=</code>, if specified, overrides <code>[General]&#9658;PrerequisitePower=</code>). Take note that <code>[GenericPrerequisites]&#9658;PROC=</code> does not override or nullify <code>[General]&#9658;PrerequisiteProcAlternate=</code>.<dfn class="new inset">New Prerequisite Groups.</dfn><var class="rules">GenericPrerequisites</var></p>
	
	<h3>Secret Labs</h3>
	<p>Secret Lab logic had some <a href="#SecretLabBoonWeighting">flaws which have been resolved</a> (see Type 1 Fixes). In addition to those fixes, Secret Lab logic has been extended with the following 'per building' flags. <code>SecretLab=yes</code> must be set on the building before it will be treated as a Secret Lab and so allow these flags to be considered.</p>
	<dl class="flaglist">
		<dt>[Building]&#9658;SecretLab.PossibleBoons= (list of TechnoTypes)</dt>
		<dd>Specifies all the buildings, vehicles, infantry and aircraft that this particular building could potentially award as a secret lab boon. The original Secret Lab system had three separate flags to control this which were all global and did not allow for AircraftTypes.<var class="rules TechnoType list_of_TechnoTypes">SecretLab.PossibleBoons=</var></dd>
		<dt>[Building]&#9658;SecretLab.GenerateOnCapture= (boolean)</dt>
		<dd>The boon offered by a Secret Lab is picked when the building is first created (or on map load if it is pre-placed). If <code>SecretLab.GenerateOnCapture=yes</code> is set then every time the building is captured it will re-pick the boon to be offered. Defaults to no.<var class="rules TechnoType boolean no">SecretLab.GenerateOnCapture=</var></dd>
	</dl>
	<p>Each possible boon can specify the following flags...</p>
	<dl class="flaglist">
		<dt>[Boon]&#9658;Secret.RequiredHouses= (list of countries)</dt>
		<dd>Which countries are allowed to get this unit as a secret lab boon. This is only checked when the boon is picked so if <code>SecretLab.GenerateOnCapture=no</code> then the boon can still be obtained by a country not on the <code>Secret.RequiredHouses</code> list (if the original owner's country is on the list).<var class="rules TechnoType list_of_countries">Secret.RequiredHouses=</var></dd>
		<dt>[Boon]&#9658;Secret.ForbiddenHouses= (list of countries)</dt>
		<dd>Which countries are not allowed to get this unit as a secret lab boon. This is only checked when the boon is picked so if <code>SecretLab.GenerateOnCapture=no</code> then the boon can still be obtained by a country that is on the <code>Secret.RequiredHouses</code> list (if the original owner's country is not on the list).<var class="rules TechnoType list_of_countries">Secret.ForbiddenHouses=</var></dd>
	</dl>
	<p>The boon ultimately offered is picked at random, but only boons that are not presently buildable by the owner of the Secret Lab (civilian in the case of pre-placed buildings without <code>GenerateOnCapture=yes</code>) are eligible to be picked.<br>
	<span class="note">NB: This means that such Secret Labs may appear to disobey Secret.RequiredHouses and Secret.ForbiddenHouses when captured. This is not a bug.</span><dfn class="new inset">Per-building secret lab boons.</dfn></p>
	
	<h3>Hard-coded Unit Properties</h3>
	<p>The game is hard-coded to do certain things with certain unit IDs. Namely the <code>[COW]</code>, <code>[DESO]</code> and <code>[FV]</code>. These units can now have said special properties switched off, and other units can be given these properties if you want.<dfn class="new">Hard-coded properties of Cows and Desolators can be toggled on/off for any infantry.</dfn></p>
	<h4>IsCow</h4>
	<p>The <code>[COW]</code> was hard-coded to play its idle animation more frequently than other infantry and was also hard-coded to move around randomly. You can now set <code>IsCow=yes</code> on other <span class="type">InfantryTypes</span> or, indeed, <code>IsCow=no</code> on the <code>[COW]</code>.<var class="rules TechnoType boolean">IsCow=</var></p>
	<h4>IsDesolator</h4>
	<p>The <code>[DESO]</code> was hard-coded to have different deploy-weapon firing timing than other units. The change to the timing appears to be related to the unit's art <code>Sequence</code> although the exact effect has not been investigated. You can now set <code>IsDesolator=yes</code> on other <span class="type">InfantryTypes</span> or, indeed, <code>IsDesolator=no</code> on the <code>[DESO]</code>.<var class="rules TechnoType boolean">IsDesolator=</var></p>
	<h4>Multiple IFVs / Gunner</h4>
	<p>The <code>[FV]</code> was the only unit to be checked for the special turret and weapon flags, such as <code>SniperTurretIndex</code>. With <span class="gamename">Ares</span>, all <span class="type">VehicleTypes</span> with <code>Gunner=yes</code> set will read those flags. This means that you can now have multiple types of IFV.<dfn class="new">Custom IFV clones.</dfn></p>
	
	<h3>Customizable Insignia</h3>
	<p>Units can now have custom insignia (chevrons) to represent their veterancy level. </p>
	<dl class="flaglist">
		<dt>[TechnoType]&#9658;Insignia.Rookie= (filename, excluding the .shp extension)<br>
		[TechnoType]&#9658;Insignia.Veteran= (filename, excluding the .shp extension)<br>
		[TechnoType]&#9658;Insignia.Elite= (filename, excluding the .shp extension)</dt>
		<dd>For example, <code>Insignia.Rookie=SAMPLE</code> would display <span class="filename">sample.shp</span> as the insignia while the object is rookie.<var class="rules TechnoType filename">Insignia.Rookie=</var><var class="rules TechnoType filename">Insignia.Veteran=</var><var class="rules TechnoType filename">Insignia.Elite=</var></dd>
	</dl>
	<p>These SHPs - like the original <span class="filename">pips.shp</span> - are expected to be in the theater palette. If you specify an insignia, the first frame of its SHP will be drawn. Veteran and Elite objects without the insignia specified will still display the 15th/16th frames of <span class="filename">pips.shp</span> as usual.<dfn class="new">Custom insignia for veteran/elite units.</dfn></p>
	
	<h3>Customizable Parachute Animations</h3>
	<p>Objects can now have their own individual parachute animation.</p>
	<dl class="flaglist">
		<dt>[Object]&#9658;Parachute.Anim= (animation)</dt>
		<dd>Specifies the animation from <span class="filename">artmd.ini</span> to use as the object's parachute when the object is falling. If omitted, <code>Parachute.Anim</code> will default to PARACH. The SHP is expected to be in the unit palette.<var class="rules TechnoType animation">Parachute.Anim=</var></dd>
	</dl>
	<p>While the animation is playing, the object's falling speed will reach, but not exceed, <code>[General]&#9658;ParachuteMaxFallRate=</code>. After the animation disappears, if the object is still falling then the object's speed will increase to match <code>[General]&#9658;NoParachuteMaxFallRate=</code>. <dfn class="new">Custom parachute animations.</dfn></p>
	
	<h3>Custom Cameo Palettes</h3>
	<p>Rather than always using the cameo palette, individual cameos can now use their own bespoke palette.<br>
	In <span class="filename">artmd.ini</span>:</p>
	<dl class="flaglist">
		<dt>[UnitArt]&#9658;CameoPalette= (filename, <em>including</em> the .pal extension)</dt>
		<dd>Specifies the palette to use for the unit's cameo (<code>Cameo</code> and <code>AltCameo</code> must use the same palette), in the format "filename.pal". <br>
		Defaults to cameo.pal.<var class="art UnitArt filename cameo.pal">CameoPalette=</var><dd>
	</dl>
	<p>In <span class="filename">rulesmd.ini</span>:</p>
	<dl class="flaglist">
		<dt>[SuperWeapon]&#9658;SidebarPalette= (filename, <em>including</em> the .pal extension)</dt>
		<dd>Specifies the palette to use for the super weapon's <code>SidebarImage</code>, in the format "filename.pal".
		Defaults to cameo.pal.<dfn class="new">Custom palettes for cameos.</dfn><var class="rules SuperWeapon filename cameo.pal">SidebarPalette=</var></dd>
	</dl>
  <p><span class="note">NB: The cameo must not use the color at index 0 of the palette. It will be transparent in-game.</span></p>

	<h3>Spy Behavior</h3>
	<p><span class="gamename">Yuri's Revenge</span> only permits a Spy to achieve one effect on infiltrating, which is determined by a hard-coded order of precedence. Spy infiltration logic has been rewritten in <span class="gamename">Ares</span> to be more flexible, including some new effects that a Spy can achieve.</p>
	<p>All of the following flags default to no or zero.</p>
	<dl class="flaglist">
		<dt>[BuildingType]&#9658;SpyEffect.Custom= (boolean)</dt>
		<dd>Whether or not to use the <span class="gamename">Ares</span> spy infiltration logic instead of the original <span class="gamename">Yuri's Revenge</span> logic.<var class="rules TechnoType boolean no">SpyEffect.Custom=</var></dd>
	</dl>
	<p><span class="note">NB: Must be set to yes for any of the following effects to work...</span><dfn class="new">Spy behaviour:</dfn><dfn class="new inset">Multiple effects can be achieved on a single building.</dfn></p>
	<h4>Radar</h4>
	<dl class="flaglist">
		<dt>[BuildingType]&#9658;SpyEffect.ResetRadar= (boolean)</dt>
		<dd>Whether or not spying this enemy building will cause the normal radar sabotage behavior (i.e. re-shrouding the enemy's map down to just the terrain that they can presently see).<var class="rules TechnoType boolean no">SpyEffect.ResetRadar=</var></dd>
		<dt>[BuildingType]&#9658;SpyEffect.RevealRadar= (boolean) <span style="color:blue">*NEW EFFECT*</span></dt>
		<dd>Whether or not spying this enemy radar will reveal to you, the infiltrator, all of the terrain that they, the enemy, have thus far explored. The building must also have <code>Radar=yes</code> set.<dfn class="new inset">New effect: Reveal radar (shows you what the enemy can see).</dfn><var class="rules TechnoType boolean no">SpyEffect.RevealRadar=</var></dd>
	</dl>
	<h4>Power</h4>
	<dl class="flaglist">
		<dt>[BuildingType]&#9658;SpyEffect.PowerOutageDuration= (integer - frames)</dt>
		<dd>The number of frames for which the enemy's power will be sabotaged (i.e. temporarily reduced to zero).<dfn class="new inset">Per-building power outage duration.</dfn><var class="rules TechnoType integer_-_frames xxxnum0">SpyEffect.PowerOutageDuration=</var></dd>
	</dl>
	<h4>Money</h4>
	<dl class="flaglist">
		<dt>[BuildingType]&#9658;SpyEffect.StolenMoneyAmount= (integer - credits) <span style="color:blue">*NEW EFFECT*</span></dt>
		<dd>The amount of credits that will be stolen from the enemy upon spying this enemy building.<dfn class="new inset">New effect: Steal money amount (steals a set amount of money rather than a percentage).</dfn><var class="rules TechnoType integer_-_credits xxxnum0">SpyEffect.StolenMoneyAmount=</var></dd>
		<dt>[BuildingType]&#9658;SpyEffect.StolenMoneyPercentage= (float - multiplier)</dt>
		<dd>The percentage of the enemy's current credits that will be stolen from the enemy upon spying this enemy building. Only has an effect if <code>SpyEffect.StolenMoneyAmount=0</code>.<br>
		The amount of money ultimately stolen from the enemy is always capped by the amount of money they presently have (i.e. if <code>SpyEffect.StolenMoneyAmount=500</code> but the enemy only has 200 credits then you will only gain 200 credits from spying the building).<dfn class="new inset">Per-building steal money percentage.</dfn><var class="rules TechnoType float_-_multiplier xxxperc0">SpyEffect.StolenMoneyPercentage=</var></dd>
	</dl>
	<h4>Super Weapons</h4>
	<dl class="flaglist">
		<dt>[BuildingType]&#9658;SpyEffect.ResetSuperweapons= (boolean)</dt>
		<dd>Whether or not spying this enemy building will cause all super weapons attached to it (SuperWeapon, SuperWeapon2 and all super weapons on attached upgrades) to have their countdown timers restarted.<var class="rules TechnoType boolean no">SpyEffect.ResetSuperweapons=</var></dd>
	</dl>
	<h4>Stolen Technology</h4>
	<dl class="flaglist">
		<dt>[BuildingType]&#9658;SpyEffect.StolenTechIndex= (integer)</dt>
		<dd>The stealable technology type that is stolen upon spying this enemy building.<dfn class="new inset">New effect: Stolen tech index (multiple new stolen techs).</dfn><var class="rules TechnoType integer">SpyEffect.StolenTechIndex=</var></dd>
		<dt>[TechnoType]&#9658;Prerequisite.StolenTechs= (list of integers)</dt>
		<dd>The list of stealable technology types that must be stolen before this object can be built.<var class="rules TechnoType list_of_integers">SpyEffect.StolenTechs=</var></dd>
	</dl>
	<p>In <span class="gamename">Yuri's Revenge</span>, there were only three types of stealable technology available and these were hard-coded to specific buildings.<br>
	Spying <code>[GATECH]</code> satisfies <code>RequiresStolenAlliedTech=yes</code><br>
	Spying <code>[NATECH]</code> satisfies <code>RequiresStolenSovietTech=yes</code><br>
	Spying <code>[YATECH]</code> satisfies <code>RequiresStolenThirdTech=yes</code><br>
	In <span class="gamename">Ares</span>, spying a building with <code>SpyEffect.StolenTechIndex=2</code> (for example) satisfies the stolen tech requirements for units that require stolen tech 2.<br>
	<span class="note">NB: If you set <code>SpyEffect.Custom=yes</code> on GATECH, NATECH or YATECH then those buildings will no longer satisfy the old RequiresStolen*Tech flags.</span></p>
	<h4>Factories</h4>
	<dl class="flaglist">
		<dt>[BuildingType]&#9658;SpyEffect.UnitVeterancy= (boolean)</dt>
		<dd>Whether or not spying this enemy factory will make all future units you build from your own factories of the same type start veteran. For example, spying an enemy barracks with <code>SpyEffect.UnitVeterancy=yes</code> set will cause all future <span class="type">InfantryTypes</span> that you build to start veteran.<br>
		<span class="note">NB: This only works for <span class="type">VehicleType</span> and <span class="type">InfantryType</span> factories at present. Also note that infiltrating any <span class="type">VehicleType</span> factory (i.e. War Factory or Naval Yard) will only make land vehicles start veteran - Naval vehicles cannot be made to start veteran through spy infiltration logic.</span><var class="rules TechnoType boolean no">SpyEffect.UnitVeterancy=</var></dd>
		<dt>[BuildingType]&#9658;SpyEffect.RevealProduction= (boolean) <span style="color:blue">*NEW EFFECT*</span></dt>
		<dd>
			Whether or not spying this enemy factory will allow you to see what the enemy is presently building from that factory. Once the building has been spied, select the building and the cameo of the unit that is being produced will be displayed over the building.
			<p class="center"><img src="./manual_images/production_spying.png" alt="Screenshot of a current production being revealed"></p>
			<dfn class="new">New effect: Reveal production cameo (shows you what the enemy are currently building).</dfn>
			<var class="rules TechnoType boolean no">SpyEffect.RevealProduction=</var>
		</dd>
	</dl>
	<div class="ares02">
	<h4>AlternateTheaterArt</h4>
	<p>The Navy Seal has <code>AlternateArcticArt=yes</code> set, which causes the game to use the image file <span class="filename">seala.shp</span> on arctic maps, instead of <span class="filename">seal.shp</span>. This logic works for any InfantryType, however this only works for the arctic theater and only for InfantryTypes.</p>
	<dl class="flaglist">
		<dt>[TechnoType]&#9658;AlternateTheaterArt= (boolean)</dt>
		<dd>Specifies whether or not this SHP-based unit can have alternate art depending on the theater of the current map. For example, setting <code>Image=JUNK</code> and <code>AlternateTheaterArt=yes</code> on a unit will make the unit load <span class="filename">artmd.ini</span> section <code>[JUNKA]</code> on arctic, <code>[JUNKD]</code> on desert, and so on according to theater. If any of those sections do not exist then the unit will fall back to <code>[JUNK]</code>. So quite similar to <code>AlternateArcticArt</code>, just automatic and smarter. Defaults to no.<br>
		<span class="note">NB: This only works for SHP-based units. Voxels do not use this system and cannot have theater-specifc art (you'd have to use <a href="#Prerequisites" class="tt">Prerequisite.RequiredTheaters</a> to achieve that).</span><var class="rules TechnoType boolean no">AlternateTheaterArt=</var></dd>
	</dl></div>

	<h3>Miscellaneous Modding Enhancements</h3>
	<p>All the changes/additions that make various tasks easier for the mod author, but don't directly provide any new functionality.</p>
	<h4>[#include]</h4>
	<p><span class="gamename">Ares</span> allows you to split your <span class="filename">rulesmd.ini</span> file up into separate pieces so as to better organise the various settings. Any INI files you list under the new <code>[#include]</code> section will be loaded once the main file itself has finished loading. INI files included in this manner can also specify their own <code>[#include]</code> section to load further INIs. There is no depth limit, and the file loading recursion is depth-first (In English: if the original INI file includes multiple files, and an included file includes other files itself, those second-level files will be included before resuming inclusion of the remaining first-level ones. Recurse again if necessary.)</p>
	<p>For example, the <code>[#include]</code> section you specify in <span class="filename">rulesmd.ini</span> may look something like this:</p>
	<pre>[#include]
	1=rules_sw.ini
	2=rules_vehicles.ini
	3=rules_buildings.ini
	4=rules_aircraft.ini
	5=rules_infantry.ini</pre>
	<p>As each INI file is loaded, any flag that is encountered that has already been defined will have its value updated with the newly found value. Using the above include list as an example, if <code>[E1]&#9658;Strength=200</code> is specified in <span class="filename">rulesmd.ini</span>, and <code>[E1]&#9658;Strength=300</code> is specified in <span class="filename">rules_infantry.ini</span>, then the GI will have <code>Strength=300</code> in-game.</p>

	<p>INI files are taken to be relative to the <span class="gamename">Red Alert 2</span> directory. Values in the include list can include subfolders (e.g. <code>5=MyMod\rules_infantry.ini</code>). The currently loaded MIXes are also scanned for the files if a loose file of that name cannot be found, however, this only works if you do not specify a subfolder.<dfn class="new"><code>[#include]</code> section allows <span class="filename">rulesmd.ini</span> to be split up into separate files.</dfn><var class="rules">#include</var></p>
	
	<h4>String Table Enhancements</h4>
	<p>In addition to ra2md.csf, the game will now load &ndash; <span class="filename">stringtable00.csf</span> through <span class="filename">stringtable99.csf</span>. These string tables will add to or replace strings that were included in previously loaded string tables.</p>
	<p>It is also now possible to name objects in INI code (without having to create a string table entry) by using the <code>NOSTR:</code> prefix. For example, <code>UIName=NOSTR:Sonar Pulse</code> will be displayed as "<em>Sonar Pulse</em>". However, the string (including the prefix) cannot exceed 31 characters.<dfn class="new">Object names can be written directly into <span class="filename">rulesmd.ini</span> rather than adding them to the string table.</dfn></p>
	
	<h4>List Lengths</h4>
	<p>There are several INI flags that take a comma-separated list of values. The game imposes a maximum length for INI flag values of 128 characters which isn't always long enough for lists &ndash; especially with some of the extensions that <span class="gamename">Ares</span> allows. This limit has been relaxed <em>for flags that take lists</em> &ndash; the maximum length for flags that take lists is now 2048 characters.<dfn class="new">Several INI flag lists have been extended to allow more text to be parsed.</dfn></p>
	
	<h4>MIX Loading Order</h4>
	<p><span class="filename">expandmd##.mix</span> files are now loaded earlier, allowing them to override content from <span class="filename">langmd.mix</span>.<dfn class="new">expandmd##.mix can override content from langmd.mix.</dfn></p>
	
	<h4>Loose Audio Files</h4>
	<p>The game can now load WAV files that are loose in the <span class="gamename">Red Alert 2</span> game directory &ndash; they no longer have to be packed into a BAG file. Sounds should be referenced in <span class="filename">audiomd.ini</span> just the same as always (without the .wav extension).<dfn class="new">WAV files loose in the <span class="gamename">Red Alert 2</span> directory can now be played, without having to include them in audio.bag.</dfn></p>
	<h4>Mouse.sha</h4>
	<p>SHP compression can now be used on mouse.sha. Without <span class="gamename">Ares</span>, using SHP compression on mouse.sha would result in a garbled mouse cursor in-game.<dfn class="new">SHP compression can be used on mouse.sha.</dfn></p>
	<h4>InfantryElectrocuted</h4>
	<p>The animation displayed for a dying <span class="type">InfantryType</span> when the warhead that killed them had <code>InfDeath=5</code> used to be hard-coded to the second animation from the <code>[Animations]</code> list. You can now specify <code>[AudioVisual]&#9658;InfantryElectrocuted=</code> instead. If <code>InfantryElectrocuted</code> is not defined then the game will search for an animation named "ELECTRO", before finally falling back to the second animation like before.<dfn class="new">Animation for <code>InfDeath=5</code> can be overriden using <code>InfantryElectrocuted=</code> (instead of using the second animation from [Animations]).</dfn><var class="rules AudioVisual animation">InfantryElectrocuted=</var></p>
	<h4>Snowmd.ini</h4>
	<dl class="flaglist">
		<dt>[General]&#9658;Medians=71</dt>
		<dd>This setting is needed to prevent an Internal Error occurring in the Random Map Generator if Urban Areas are enabled by the user. This change is also needed by the Terrain Expansion.</dd>
	</dl>
	<p>In order to avoid internal errors, <span class="gamename">Ares</span> sets this to 71 by default if it's not specified in the terrain control file.<dfn class="new"><span class="filename">Snowmd.ini</span> defaults <code>Medians=71</code> (this is needed by the Terrain Expansion and also prevents an IE in the Random Map Generator when Urban <span class="gamename">Ares</span> are enabled).</dfn></p>
	
	<h2>User Interface Features</h2>
	<p>Numerous enhancements and additions have been made to the user interface &ndash; aspects of <span class="gamename">Yuri's Revenge</span> outside the main in-game battlefield view.</p>
	
	<h3>Loading Screen</h3>
	<p>The initial loading screen displayed when first starting <span class="gamename">Yuri's Revenge</span> now indicates that <span class="gamename">Ares</span> is active and stresses that it is a test version.</p>
	
	<h3>Internal Errors / Debugging</h3>
	<p>When an Internal Error occurs, the <span class="filename">except.txt</span> file that is produced has been modified so as to output more information that is both relevant to mod authors, and also relevant to us, the developers, when debugging the changes and additions introduced by <span class="gamename">Ares</span>.</p>
	<p><span class="filename">except.txt</span> may include a timestamp in the filename to prevent existing an existing <span class="filename">except.txt</span> file being overwritten.</p>
	<p><span class="gamename">Ares</span> will give you the option to produce a crash dump file to assist in determining the cause of the error. This file will be stored in a Debug folder within the main game directory. Note that the crash dump file is very large and may only be readable by the <span class="gamename">Ares</span> developers. Like <span class="filename">except.txt</span>, this file will include a timestamp in the filename.</p>
	<p>If you have turned on debug logging (see Command Line Arguments and Keyboard Commands) then the game will produce a debug.log file in the aforementioned Debug folder. Like <span class="filename">except.txt</span>, this file will include a timestamp in the filename. The log file may contain useful information for helping diagnose problems with your mod or <span class="gamename">Ares</span> itself.</p>
	<p>In the event of an Internal Error, <span class="gamename">Ares</span> can sometimes tell you what caused the error. For example:</p>
	<p class="center">
		<img src="./manual_images/crash0.png" alt="Screenshot of an Ares Internal Error dialog showing the cause of an Internal Error" style="border: none;">
		<br>
		Here, Ares can determine what caused the error.
	</p>
		<hr>
	<p class="center">
		<img src="./manual_images/crash1.png" alt="Screenshot of an Ares Internal Error dialog showing an unsolved Internal Error" style="border: none;">
		<br>
		Here, the error cannot be figured out - Ares offers to create a full crash report.
	</p>
		<hr>
	<p class="center">
		<img src="./manual_images/crash2.png" alt="Screenshot of an Ares Internal Error dialog after recording an Internal Error" style="border: none;">
		<br>
		The crash report has been generated. Ares will close after showing this message.
	</p>

	<p>Some potential errors may now be triggered when loading rather than waiting for the error to crop up in game.<dfn class="new">Improved Internal Error handling and debug logs to assist with debugging mods/Ares.</dfn></p>
	
	<h3>Bitmap Screenshots</h3>
	<p>With <span class="gamename">Ares</span> active, screenshots are now generated as BMP files rather than PCX. BMP files are smaller in size and are more widely supported.<br><span class="note">NB:The BMP files are written in reverse line order. This is perfectly valid but some graphics editors may not support it.</span><dfn class="new">Screenshots saved as BMP files rather than PCX.</dfn></p>
	
	<h3>Random Map Generator</h3>
	<p><span class="gamename">Ares</span> lets you create random maps using some new map styles &ndash; Archipelago terrain and the Desert tileset.<br>
	<span class="note">NB: these options are not affected by the "Surprise Me" function for the moment.</span></p>
	<p>The RMG will now place bridges at random on maps that include rivers.<dfn class="new">Random Map Generator enhancements:</dfn></p>
	<p>A new checkbox &ndash; 'Place Urban Areas' &ndash; allows the user to add an assortment of streets and urban combat buildings at random spots throughout the generated map. The objects placed by this feature are hard-coded to the following list for the time being:</p>
	<ul class="nobullets">
		<li><strong>Structures:</strong> CABUNK01, CABUNK02, CAARMY01, CAARMY02, CAARMY03, CAARMY04, CACHIG03, CANEWY01, CANEWY14, CANWY09, CANWY26, CANWY25, CATEXS07</li>
		<li><strong>Vehicles:</strong> TRUCKA, TRUCKB, COP, EUROC, SUVW, SUVB, FTRK, AMBU</li>
		<li><strong>Infantry:</strong> CIV1, CIV2, CIV3, CIVA, CIVB, CIVC</li>
	</ul>
	<p><dfn class="new inset">Place Urban Areas option.</dfn><dfn class="new inset">Bridges over rivers.</dfn><dfn class="new inset">New terrain style: Archipelago.</dfn><dfn class="new inset">New tileset: Desert.</dfn><span class="note">NB: Urban areas generated in the minimap preview do not always correspond to content generated ingame, especially in Desert maps &ndash; this is still being investigated.<br>In addition, there are reports of this feature not working at all with certain settings. (Known issue: <a href="http://bugs.renegadeprojects.com/view.php?id=794">#794</a>)</span></p>
	<h3>Keyboard Commands (Hotkeys)</h3>
	<p><span class="gamename">Ares</span> includes several new commands that can be issued in game via the use of keyboard hotkeys. Note that the labels for these hotkeys are presently hard-coded, unlike the standard <span class="gamename">Yuri's Revenge</span> hotkeys (which use the string table).</p>
	
	<h4>Map Snapshot</h4>
	<p>A key can be assigned to save a snapshot of the current game as a YRM map file, which can be edited in FinalAlert 2 YR.<br>
	<span class="note">NB: Loading the generated map file in-game causes an Internal Error. The reason for this is not yet known. If you do encounter it then please provide the developers with the crash information.</span><dfn class="new">Map snapshot command (saves a YRM map file of the current map).</dfn></p>
	
	<h4>Debug Logging</h4>
	<p>A key can be assigned to toggle debug.log writing on and off. See <a href="#InternalErrorsDebugging">Internal Errors / Debugging</a></p>
	
	<h4>Type Data Dumping</h4>
	<p>A key can be assigned to output some additional information to the debug.log file (see above). The additional information is written to the log each time the key is pressed. This includes information such as AI trigger weighting, so mod authors can see how the AI is performing over the course of a game.<br>
	Note that debug.log file writing must be turned on otherwise the data will not be written to the file.<dfn class="new">Type data dumping command (dump type information to a log file, including AI trigger weights).</dfn></p>
	
	<h4>AI Assume Control</h4>
	<p>A key can be assigned to have the AI take control of your base so that you can observe what the AI does. This is for testing purposes only.<br><span class="note">NB: You must let the AI assume control of your base before you deploy your MCV, otherwise the AI will do nothing.<br>NB: This hot key is available in multiplayer at present however this will most likely be changed in future.</span></p>
	<h3>Command Line Arguments</h3>
	<dl>
		<dt>-CD</dt>
		<dd>Allows the game to run without the <span class="gamename">Yuri's Revenge</span> CD. Requires the content of the <span class="gamename">Yuri's Revenge</span> CD to be copied to the <span class="gamename">Red Alert 2</span> directory first.<dfn class="new">Command line option to not require the <span class="gamename">Yuri's Revenge</span> CD.</dfn></dd>
		<dt>-NOLOGO</dt>
		<dd>Prevents the EA logo video from playing before the game begins to load.<br>
		<span class="note">NB: Launch Base has its own option to just prevent the video playing for mods that do not include their own video.</span><dfn class="new">Command line option to not play the EA/Westwood logo video.</dfn></dd>
		<dt>-DEBUG</dt>
		<dd>Turns debug.log file writing on initially. See <a href="#InternalErrorsDebugging">Internal Errors / Debugging</a></dd>
	</dl>
	
	<h3>New Game Resolutions</h3>
	<p>Various new resolutions have been enabled by default in the Options screen, up to 4096x4096. This is the same effect provided by the <code>AllowHiResModes</code> setting or the HIRES cheat code, both of which are obsolete in <span class="gamename">Ares</span>.<dfn class="new">AllowHiResMods enabled by default.</dfn></p>
	
	<h3>Lone Player Skirmish</h3>
	<p>You can now start a single player skirmish game without any AI players. This is primarily used for testing a mod without having to worry about the AI attacking you.<dfn class="new">Can play single player skirmish without any computer players.</dfn></p>
	
	<h3>Graphics / Surface Drawing</h3>
	<p><em class="red">This is for advanced users only!</em> By default, most of the game's drawing surfaces are allocated in system memory, but two of them (frequently used destination buffers) default to GPU memory.<br> Techniques used by the game to draw images to the screen require the former ones to be copied to the latter ones, and this operation is fairly expensive. <span class="gamename">Ares</span> allows you to allocate those surfaces in system memory, which means the source to destination copying is almost free.</p>
	<p>In <span class="filename">ares.ini</span> you can add the following section:</p>
	<pre>[Graphics.Advanced]
DirectX.Force= (hardware|emulation)
Surface.$surface.Memory= (System|VRAM)
Surface.$surface.Force3D= (true|false)</pre>
	<p>...where <span class="tt">$surface</span> is one of <span class="tt">Composite</span>, <span class="tt">Alternate</span>, <span class="tt">Hidden</span>, <span class="tt">Sidebar</span> or <span class="tt">Tile</span>.</p>
	<p><span class="note">NB: enabling Force3D forces Memory into VRAM mode.</span><br>
	<span class="note">NB: Ares.ini is not intended to be included or edited by mods, as this file may include various other settings in future that the end-user wishes to set themselves. Launch Base does not permit mods to include ares.ini, and also provides its own interface to allow the user to modify the above graphical settings.</span><dfn class="new">Graphics/Surface drawing options can be configured by the user (advanced users only).</dfn></p>
	
	<h2>Required Changes For Mods Using <span class="gamename">Ares</span></h2>
	<p>Unfortunately, <span class="gamename">Ares</span> will not simply "work" without changes to the original game files. The reason for this is that maintaining compatibility with the original game files whilst still offering the enhancements that are <span class="gamename">Ares</span>' raison d'Ãªtre would make implementing <span class="gamename">Ares</span> features (both for us, the developers, and you, the mod author) considerably more complex, ultimately wasting time that would be better spent on other tasks.</p>
	<p>This section details the modifications you'll most likely need to make to ensure your mod does not receive any unexpected changes from simply being run whilst <span class="gamename">Ares</span> is active.</p>
	<p>In future these changes will be provided as extensions to the standard files that are included with the YR Unofficial 1.002 Mini-Patch Developer's Pack.</p>
	
	<h3>artmd.ini</h3>
	<ul>
		<li>
			<dl class="flaglist">
				<dt>[TELE]&#9658;SecondaryFireFLH=85,0,130</dt>
				<dd>See <a href="#RadBeamsAndWavesUsingTheWrongFLH">RadBeams And Waves Using The Wrong FLH</a>.</dd>
			</dl>
		</li>
	</ul>
	
	<h3>bombcurs.shp</h3>
	<p>This animation needs to have its last frame removed if you don't want to see the previously unused skull image. See <a href="#CustomizableIvanBombs">IvanBomb.FlickerRate</a>.</p>
	
	<h3>ares.mix</h3>
	Mods should <strong>not</strong> include <span class="filename">ares.mix</span>. This new MIX file is bundled with <span class="gamename">Ares</span> to provide any new/modified files that <span class="gamename">Ares</span> changes/additions rely on. This MIX file presently includes:
	<ul>
		<li>
			ares.csf &ndash; includes a few new strings that are used by the Random Map Generator:
			<ul class="nobullets">
				<li>GUI:UrbanAreas=Create Urban Areas</li>
				<li>Name:Desert=Desert</li>
				<li>STT:RMGUrbanAreas=Choose whether urban areas will be present on the map.</li>
			</ul>
		</li>
	</ul>

	<h2>Credits</h2>
	<p><span class="gamename">Ares</span> is being developed by:
	<ul class="nobullets">
		<li><strong>pd</strong> &ndash; the brains behind <span class="gamename">Ares</span> and Syringe, and the author of the original RockPatch. Officially retired from the project, but his contributions will never be forgotten.</li>
		<li><strong>DCoder</strong> &ndash; the crazy programmer guy with too many projects and too little free time. Spearhead of the <span class="gamename">Ares</span> project.</li>
		<li><strong>Electro</strong> &ndash; the first contributor who can add functionality without needing to understand raw assembly code (another great <span class="gamename">Ares</span> feature - you can contribute as soon as you know C++).
		<li><strong>Nighthawk</strong> &ndash; <span class="gamename">Ares</span>' project manager.</li>
		<li><strong>Renegade</strong> &ndash; the first contributor who adds functionality while working on Linux!</li>
		<li><strong>AlexB</strong> &ndash; the guy who claims he's not VK.</li>
	</ul>
	<p>Documentation by DCoder, Marshall, Nighthawk and Renegade. If there are any omissions or errors in this document, please <a href="http://bugs.renegadeprojects.com/bug_report_page.php">file a bug</a> under the category "Wrong Information" or "Outdated Information", whichever fits better.<br>
	If you feel something is not explained clearly enough, please post on the RenegadeProjects Network Forums and let us know where the issue is.</p>
	<h3>Special Thanks</h3>
	<h4>Westwood Studios</h4>
	<p>For creating this great game in the first place. Although you guys really should've fired half of your coding staff (out of a cannon, into the sun).</p>

	<h4>Marshall</h4>
	<p>For developing Launch Base and the YR Unofficial 1.002 Mini-Patch (UMP), and whipping this documentation into shape.</p>

	<h4>Renegade</h4>
	<p>For hosting <span class="gamename">Ares</span> itself, performing the duties of Project Manager, creating the HTML version of the <span class="gamename">Ares</span> manual and, of course, contributing code and helper tools.</p>

	<h4><span class="gamename">Ares</span> Testers</h4>
	<p>For devoting their free time to testing <span class="gamename">Ares</span> and giving us feedback - this enables us to make <span class="gamename">Yuri's Revenge</span> and <span class="gamename">Ares</span> even better.</p>
	<ul>
		<li>AlexB</li>
		<li>angrymod</li>
		<li>Apollo</li>
		<li>Beowulf</li>
		<li>Black Shadow 750</li>
		<li>Corporal Blade</li>
		<li>Darkstorm</li>
		<li>FS-21</li>
		<li>Gangster</li>
		<li>gordon-creAtive</li>
		<li>hogo</li>
		<li>iNs0MNiaC</li>
		<li>Lt Albrecht</li>
		<li>Mevitar</li>
		<li>Mig eater</li>
		<li>Modder666</li>
		<li>MRMIdAS</li>
		<li>mt.</li>
		<li>Nighthawk</li>
		<li>OmegaBolt</li>
		<li>Professor_Tesla</li>
		<li>sanedisruption</li>
		<li>Speeder</li>
		<li>ThePredator</li>
		<li>WoRmINaToR</li>
		<li>Xovvo</li>
		<li>ZombyDragon</li>
	</ul>
	
	<h2>Appendix A &ndash; New Flags/Sections</h2>
	<p>This is a list of new flags/sections only. Existing flags/sections whose functionality has changed are not listed here (except in extreme cases).</p>
	<div id="list_flags"></div>

	<h2>Appendix B &ndash; <span class="gamename">Ares</span> Feature Summary</h2>
	<p>Below is a list of everything that <span class="gamename">Ares</span> brings to <span class="gamename">Yuri's Revenge</span> as a series of quick bullet points.</p>
	
	<h3>Bug Fixes</h3>
	<ul id="list_bugfix"><li class="pseudo"></li></ul>

	<h3>Restored <span class="gamename">Tiberian Sun</span> Logic</h3>
	<ul id="list_restored"><li class="pseudo"></li></ul>

	<h3>New Features</h3>
	<ul id="list_new"><li class="pseudo"></li></ul>
	
	<h2>Appendix C &ndash; RockPatch/NPatch Features Not (Yet) Included</h2>
	<ul>
		<li>Chrono Factory (unit is delivered by chronoshift)</li>
		<li>DropPod Factory (unit is delivered by drop pod)</li>
		<li>Paradrop Factory (unit is delivered by paradrop)</li>
		<li>Non-VTOL Aircraft</li>
		<li>Command line switch to output list of missing string table entries</li>
		<li>VoiceIFVRepair</li>
		<li>Radiation types</li>
		<li>Bounty</li>
		<li>Immunities (obsolete because of new armor types)</li>
		<li>Unit upgrade morphing with veterancy</li>
		<li>Custom laser widths</li>
		<li>Custom weapon cursors</li>
		<li>Bespoke Main Menu</li>
		<li>TechLevel slider</li>
		<li>Multi-engineer</li>
		<li>Third campaign button</li>
		<li>Disable campaign menu</li>
		<li>Toggle Power can replace click-repair</li>
		<li>Custom dropdown colors</li>
		<li>Super weapons:
			<ul>
				<li>DropPod</li>
				<li>Custom Paradrop clones</li>
				<li>EMPulseCannon</li>
				<li>Autofire</li>
				<li>Hunterseeker</li>
				<li>SpySat</li>
				<li>IonCannon</li>
				<li>Upgrade</li>
				<li>General super weapon clones</li>
			</ul>
		</li>
		<li>AI targeting types</li>
		<li>Lighting</li>
	</ul>

	<p>30 of 59 <span class="gamename">NPatch</span> features are presently unique to <span class="gamename">NPatch</span> (this is an approximation and subject to interpretation).</p>

	<p>51 of 84 <span class="gamename">Ares</span> features are unique to <span class="gamename">Ares</span> (again, this is an approximation and subject to interpretation, however we have tried to be strict in only counting totally unique features).<br>
	This does not count the Bug Fixes section (<span class="gamename">NPatch</span> documentation does not go into detail about the extent of bug fixes, if any).</p>
	
	<!-- YOU SHOULD NOT NEED TO EDIT ANYTHING BELOW THIS LINE -->
	<script type="text/javascript">
		function makeId(id) {
			var doNotWant = /\W/gi;
			return id.replace(doNotWant, "");
		}
		
		function parseFlagData(datastring) {
			var number = /xxxnum(-?\d+)/;
			var percentage = /xxxperc(-?\d+)/;

			var RGB = /R_G_B/;
			var cursor = /Center_Middle/;

			var spyPlane = /SpyPlane_Approach/;
			
			var sectionChar = /(.+)____(.+)/;
			var spaceChar = /_/g;
			
			if(RGB.test(datastring)) {
				return 'R,G,B';
			}
			
			if(cursor.test(datastring)) {
				return 'Center,Middle';
			}
			
			if(number.test(datastring)) {
				return number.exec(datastring)[1];
			}
			
			if(percentage.test(datastring)) {
				return percentage.exec(datastring)[1] + '%';
			}
			
			if(spyPlane.test(datastring)) {
				return datastring;
			}
			
			if(sectionChar.test(datastring)) {
				var secData = sectionChar.exec(datastring);
				return '[' + secData[1] + ']&#9658' + secData[2];
			}
			
			return datastring.replace(spaceChar, " ");
		}
		
		function listNewFlags(file) {
			var flags = new Object();
			var definitions = $("." + file);
			for(var i = 0; i < definitions.length; ++i) {
				var curFlag = $(definitions[i]).text();
				var attributes = $(definitions[i]).attr("class").split(/\s/);
				
				if(attributes.length >= 2) { // this is a flag definition
					var curSection = attributes[1];
					
					if(!(curSection in flags)) {
						flags[curSection] = new Array();
					}
					
					var curIdx = flags[curSection].push(new Object()) - 1;
					
					// file section type default
					switch(attributes.length) {
						case 4: flags[curSection][curIdx].default = parseFlagData(attributes[3]);
						case 3: flags[curSection][curIdx].type = parseFlagData(attributes[2]);
						case 2: flags[curSection][curIdx].name = curFlag;
							break;
					}
				} else { // this is a section definition
					flags[curFlag] = new Array();
					flags[curFlag].ares = true;
				}
				
			}
			// create the table
			var table = $('<table id="flags_' + file + '" class="flagslist" summary="List of all new ' + file + ' flags and sections added by Ares." align="center"><caption>New ' + file + 'md.ini flags/sections<\/caption><tr><th width="33%">Flag/Section<\/th><th width="33%">Flag Type<\/th><th width="33%">Default Value<\/th><\/tr><\/table>');
			for (var section in flags) {
				flags[section].ares ? $('<tr class="section"><td>[' + section + ']<\/td><td>new section<\/td><td><\/td><\/tr>').appendTo(table) : $('<tr class="section"><td colspan="3">[' + section + ']<\/td><\/tr>').appendTo(table);
				for (var i = 0; i < flags[section].length; ++i) {
					var typ = flags[section][i].type ? flags[section][i].type : "";
					var def = flags[section][i].default ? flags[section][i].default : "";
					$("<tr><td>" + flags[section][i].name + "<\/td><td>" + typ + "<\/td><td>" + def + "<\/td><\/tr>").appendTo(table);
				}
			}
			$(table).appendTo("#list_flags");
		}
		
		function switchVersion(evt) {
			var version = /show_(\d\d)/.exec(evt.target.id)[1];
			/*console.debug(evt.target.checked, version);*/
			if(evt.target.checked) {
				$(".ares" + version).show();
			} else {
				$(".ares" + version).hide();
			}
		}
	
		function setup(evt) {
			/* Create TOC */
			var protoLink = $('<a href="#toc" class="toc-item">text<\/a>');
			$("h2, h3, h4, h5").each(function(i) {
				this.id = makeId($(this).text());
				var tempLink = protoLink.clone();
				tempLink.attr("href", "#" + this.id);
				tempLink.text($(this).text());
				var tempItem = $('<li class="toc-' + this.tagName + '"><\/li>');
				tempItem.append(tempLink)
				tempItem.appendTo("#toc");
			});
			
			/* Create appendices 
				Appendix B
			*/
			$("dfn").each(function() {
				if($(this).hasClass("inset")) {
					$(this).removeClass("inset");
					$('<li class="inset">' + $(this).text() + "<\/li>").appendTo("#list_" + $(this).attr("class"));
				} else {
					$("<li>" + $(this).text() + "<\/li>").appendTo("#list_" + $(this).attr("class"));
				}
			});
			
			/* Appendix A */
			listNewFlags("rules");
			listNewFlags("art");
			
			/* Hook up TOC toggle and hide TOC*/
			$("#toctoggle").click(function() {
				$("#toc").slideToggle("slow");
			});
			$("#toc").hide();
			
			/* Hook up version toggle */
			$("#show_02").change(switchVersion);
			switchVersion({'target': { 'checked': $("#show_02")[0].checked, 'id': $("#show_02")[0].id}});
		}
		$(document).ready(setup);
	</script>

</div>
</body>
</html>